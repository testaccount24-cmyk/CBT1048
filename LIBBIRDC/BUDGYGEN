//BUDGYGEN     PROC MAN=DAM,       PROGRAMMER INITIALS
//*
//*      LIBRARYN OPTIONS
//*
//             FILE=BIRDCAGE,      SOURCE LIBRARY FOR BUDGIE
//             BLKSIZE=1680,       BLOCKED INPUT FOR ASSEMBLER G
//*
//*      ASSEMBLER G OPTIONS
//*
//             SYSOUT=L,           DEFERRED OUTPUT
//             ASMBLR=B,           BATCH ASSEMBLIES                    X
//             LISTING=TER,        SYSTERM DIAGNOSTICS REQUIRED        X
//             EXECUTE=NOEXEC,     NO EXECUTION OPTION                 X
//             OBJECT=LOAD,        OBJECT MODULE IS REQUIRED           X
//             CORE=2K,            2K SYSTEM SPACE IN PARTITION        X
//             BUFFERS=3,          SYSUT1,2&3 ARE BUFFERED             X
//             XREF=X,             COMPRESSED CROSS-REFERENCE LIST
//             USER=NOUPD,         USER MAY OVERRIDE THIS DEFAULT      X
//             UMAP=UMAP,          USING/DROP MAP
//             MESSAGE=A,          IMMEDIATE DIAGNOSTICS (IF ANY)
//*
//*      LINKAGE EDITOR OPTIONS
//*
//             LKED='XREF,LIST,LET,SIZE=(100K,30K)', LKED OPTIONS      X
//             DDNAME=SYSLMOD,     SHARDISK ENQUEUE NAME               X
//             DUMP=L,             DEFERRED DUMP                       X
//             LINKMAP=L           DEFERRED LINKAGE EDITOR MAPS
//*
//*      THIS PROCEDURE ASSEMBLES ANY SELECTED BUDGIE SOURCE CSECTS,
//*       AND MERGES THE OBJECT DECKS WITH A SEQUENTIAL DATA SET
//*       CONTAINING PREVIOUSLY CREATED OBJECT MODULES, IN ORDER TO
//*       CREATE ALL NECESSARY INPUT TO THE LINKAGE EDITOR TO CREATE
//*       A NEW LOAD MODULE.  THE DATA SET '&MAN..BUDGOBJ' IS UPDATED
//*       SO THAT IT CONTAINS ONLT THE MOST RECENT OBJECT DECK FOR
//*       EACH CSECT.
//*
//LIBRARYN     EXEC PGM=LIBRARY,
//*
//*      SELECT AND MODIFY BUDGIE CSECTS
//*
//             PARM='DEPTH=60,IEX=IEX,NJTA,NRJS'
//MASTER       DD   DSN=LIBRARYN.&FILE,DISP=SHR
//STEPLIB      DD   DSN=SYS2.LIBRN53,DISP=SHR
//SYSPRINT     DD   SYSOUT=A,DCB=(RECFM=FM,LRECL=133,BLKSIZE=133)
//INDEX        DD   SYSOUT=A,DCB=(RECFM=FM,LRECL=133,BLKSIZE=133)
//LIST         DD   SYSOUT=A,DCB=(RECFM=FM,LRECL=133,BLKSIZE=133)
//OSJOB        DD   DSN=&&OSJOB,DISP=(,PASS),UNIT=SYSDA,
//             SPACE=(TRK,(38,38),RLSE),DCB=BLKSIZE=&BLKSIZE
//SYSPUNCH     DD   SYSOUT=B,DCB=BLKSIZE=80
//ASM          EXEC PGM=ASMG,REGION=128K,
//             PARM=(&ASMBLR,&LISTING,&EXECUTE,&OBJECT,
//*
//*      ASSEMBLE BUDGIE ( BATCH ASSEMBLIES )
//*
//             'SPACE=MAX-&CORE','UB=&BUFFERS',&XREF,&USER,&UMAP)
//*
//* REFER TO ASSEMBLER G MANUAL FOR EXPLANATION OF ASSEMBLER OPTIONS.
//* &USER IS SUPPLIED TO ALLOW FOR NON-STANDARD OPTIONS.
//*
//STEPLIB  DD      DSN=SYS2.ASMG27,DISP=SHR
//SYSLIB   DD      DSN=SYS1.MACLIB,DISP=SHR
//         DD      DSN=SYS2.MACLIB,DISP=SHR
//SYSPRINT DD      SYSOUT=&SYSOUT
//SYSTERM  DD      SYSOUT=&MESSAGE
//SYSUDUMP DD      SYSOUT=&DUMP
//SYSUT1   DD      UNIT=SYSDA,SPACE=(CYL,(5,1))
//SYSUT2   DD      UNIT=SYSDA,SPACE=(CYL,(5,1))
//SYSUT3   DD      UNIT=SYSDA,SPACE=(CYL,(5,1))
//SYSGO    DD      DSN=&&LOADSET,UNIT=SYSDA,DISP=(,PASS),              X
//             SPACE=(CYL,(1,1)),DCB=BLKSIZE=1680
//SYSIN        DD   DSN=&&OSJOB,DISP=(OLD,DELETE)
//SORT         EXEC PGM=BUDGIE1,REGION=64K,COND=(9,LT,ASM)
//*
//*      TREAT OBJECT DECKS AS BATCHES, AND SORT THEM, OUTPUTING DECKS
//*       IN CSECT NAME SEQUENCE, SO THAT, FOR A GIVEN CSECT, THE OLD
//*       DECK FOLLOWS THE NEW ( IF ANY ).
//*
//SYSUDUMP     DD   SYSOUT=A
//SYSPRINT     DD   DUMMY
//SYSLIST      DD   DUMMY
//SYSUT1       DD   DSN=&&LOADSET,DISP=(OLD,DELETE)
//             DD   DSN=&MAN..BUDGOBJ,DISP=SHR
//SYSUT2       DD   DSN=&&DECKS,DISP=(,PASS),UNIT=SYSDA,
//             SPACE=(TRK,(5,5),RLSE),
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//SYSIN        DD   DSN=SYS2.CONTRLIB(BUDGYGCC),DISP=SHR
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03     DD   UNIT=SYSDA,SPACE=(CYL,5)
//REJECT       EXEC PGM=BUDGIE3,COND=(9,LT,ASM)
//*
//*      REJECT OLD DECKS IF NEW EXIST
//*
//SYSUDUMP     DD   SYSOUT=A
//WORK         DD   UNIT=SYSDA,SPACE=(CYL,5)
//SYSUT1       DD   DSN=&&DECKS,DISP=(OLD,DELETE)
//SYSUT2       DD   DSN=&MAN..BUDGOBJ,DISP=OLD,SPACE=(TRK,(5,5),RLSE)
//SYSIN        DD   DSN=SYS2.CONTRLIB(BUDGYGCC),DISP=SHR
//LKED     EXEC    PGM=SHARDISK,PARM=(&DDNAME,IEWL,'&LKED'),           X
//*
//*      CREATE NEW LOAD MODULE FROM CURRENT AND OLD OBJECT DECKS
//*
//             COND=(9,LT,ASM)
//SYSPRINT DD      SYSOUT=&LINKMAP
//SYSUDUMP DD      SYSOUT=&DUMP
//SYSLIB   DD      DSN=SYS1.LINKLIB,DISP=SHR
//         DD      DSN=SYS1.LINKLIB2,DISP=SHR
//             DD   DSN=SYS2.TESTLIB,DISP=SHR
//SYSLIN       DD   DSN=&MAN..BUDGOBJ,DISP=SHR
//         DD      DDNAME=SYSIN
//SYSUT1   DD      UNIT=SYSDA,SPACE=(1024,(50,20),RLSE)
//SYSLMOD      DD   DSN=SYS2.TESTLIB(BUDGY&MAN),DISP=SHR

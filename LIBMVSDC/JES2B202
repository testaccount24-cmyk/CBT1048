***(ID)                            JES2B202
***(SUBSYSTEM)                     JES2
***(DESIGNER)                      D.A.MOORCROFT
***(AUTHOR)                        J. NOLS
*
***(DATE WRITTEN)                  SEPTEMBER 1977.
***(DATE TESTED)                   OCTOBER 1977.
***(DATE INSTALLED)                OCTOBER 1977.
*
***(ABSTRACT)
*
*        THE DATA/100 MODEL 70 SIMULATES A 2780 TERMINAL, AND SINCE
*         A 2780 IS NOT AN INTELLIGENT TERMINAL, BASIC HASP/JES2 DOES
*         NOT SUPPORT COMPRESSION OF THE PRINT-LINES.  HOWEVER, DATA/100
*         DO SUPPORT COMPRESSION/DECOMPRESSION WITHIN THEIR 2780 EMULATOR
*         DECK, AND THIS MODIFICATION IS THE CODE NECESSARY TO SUPPORT
*         THE COMPRESSION AT THE HOST.
*
*        ( UNDER HASP 3.1 THIS WAS MODIFICATION 'M060' ).
*
*        JANUARY 1978 :
*
*        NOTE : THIS MOD. HAS INCREASED THE SPEED OF DATA 100/70 PRINTER
*         OF MORE OR LESS 20%.
*
***(LOGIC SUMMARY)
*
*        AT AN APPROPRIATE POINT WITHIN '2770/2780 PRINT ROUTINE'
*        IN 'HASPRTAM' MODULE, EXIT WITH AN UNQUALIFIED -
*
*              $CBAL JES2B202,YES=MBHPRNC                           S0583600
*
*        IN THE EXIT ITSELF,
*
*        NOTE : AT ENTRY REGISTER 0 CONTAINS LENGTH OF THE LINE TO BE COMPRESSED
*         AND REGISTER 1 CONTAINS START ADDRESS OF THE LINE TO BE COMPRESSED.
*
*        1. CHECK IF FOR THIS REMOTE THE TYPE OF TERMINAL IS '2780'.
*
*              IF NO, SET PSW CONDITION CODE TO 'NO' AND RETURN TO JES2.
*              IF YES, -
*
*        2. CHECK IF FOR THIS REMOTE THE 'ADCID100' FLAG IS ON.
*
*              IF ON, SET PSW CONDITION CODE TO 'NO' AND RETURN TO JES2.
*              IF OFF, -
*
*        3. THE FIRST THING TO CHECK IS IF CURRENT RECORD HAS BEEN
*            ALREADY COMPRESSED BY THIS MOD. (THIS IS POSSIBLE WITH RTAM,
*            BECAUSE IT PREPARE AN RECORD BEFORE IT CHECK IF STILL ENOUGH
*            SPACE IN BUFFER. IF NOT THE RECORD WILL REPROCESSED).
*            IF RECORD ALREADY COMPRESSED GO TO STEP 6.
*
*        4. COMPRESS ANY STRING OF THREE OR MORE LIKE CHARACTERS INTO
*            A THREE-CHARACTER COMPRESSION SEQUENCE. A MAXIMUN OF 31
*            CONSECUTIVE LIKE CHARACTERS CAN BE REPRESENTED IN THE
*            THREE-CHARACTER SEQUENCE. IF A CHARACTER OCCURS MORE THAN
*            31 CONSECUTIVE POSITIONS IN THE LINE, SUCCESSIVE THREE-CHARACTER
*            SEQUENCES ARE UTILIZED TO EFFECT COMPRESSION.
*
*             NOTE : THE THREE-CHARACTER COMPRESSION SEQUENCE CONSISTS
*                     OF A SPECIAL CONTROL CODE TO DESIGNATE THE OPERATION,
*                     A COUNT TO REPRESENT THE NUMBER OF TIMES THAT THE
*                     CHARACTER OCCURS IN THE LINE, AND THE CHARACTER
*                     THAT IS BEING COMPRESSED
*
*                                   HEX     8-BIT BINARY CODE
*                                  =====   ===================
*
*               CONTROL CODE         11         0001 0001
*               COUNT              C3-DF        110X XXXX
*               CHARACTER                       XXXX XXXX
*
*        5. COMPUTE LENGTH OF COMPRESSED LINE, AND STORE VALUE IN 'APCESR0'.
*
*        6. SET PSW CONDITION CODE TO 'YES' AND RETURN TO JES2.
*
*        IF 'NOD100CP' IS SPECIFIED IN A 'DCT' CONTROL CARD FOR A '2780'
*         TERMINAL TYPE, THE COMPRESSION WILL BE BYPASSED.
*
*
***(INSTALLATION)
*
*        THIS IS A MONSANTO JES2 MOD DYNAMICALLY LOADED AT
*        INITIALISATION TIME UPON REQUEST VIA AN 'EXIT=' CONTROL CARD.
*
***(TESTING)
*
*        TO TEST :-
*
*         SUBMIT AND EXECUTE JOBS 'TESTB202' WITH THE JES2 TEST SYSTEM.
*
*         YOU WILL FIND THESE JOBS IN 'LIBRARYN.MVS' DATA SET,
*           MEMBER 'TESTB202', PASSWORD 'T202'.
*
*
*        TO PRINT THESE JOBS :-
*
*         1. SIGNON REMOTE14 TERMINAL AS REMOTE12 WITH THE 2780 EMULATOR
*             DECK SUPPLIED BY DATA 100 (IN THE CARDS FILE BESIDE JOE'S DESK).
*
*         2. START PRINTER.
*
*
*        RESULT TO BE OBTAINED :-
*
*         CHECK IF ALL THE LINES PRINTED CORRESPONDS WITH THE INPUT
*         LINES SUPPLIED.

***(ID)                            B405
***(SUBSYSTEM)                     JES2
***(DESIGNER)                      D.A.MOORCROFT
***(AUTHOR)                        J.NOLS
*
***(DATE WRITTEN)                  DECEMBER 1977
***(DATE TESTED)                   JANUARY 1978
***(DATE INSTALLED)                MARCH 1978
*
***(ABSTRACT)
*
*        HASP ACCOUNTING RECORDS VERY QUAINTLY RECORDED THE NUMBER OF LINES
*         GENERATED AND STORED ON SPOOL, AND NOT THE NUMBER OF LINES ACTUALLY
*         PRINTED ON A PHYSICAL DEVICE.  SINCE ARE CHARGE-OUT SYSTEM CHARGES
*         FOR LINES PRINTED RATHER THAN LINES CREATED, IT WAS NECESSARY TO
*         MODIFY THE HASP ACCOUNTING RECORD.  TO MY AMAZEMENT, JES2 MAKES THE
*         SAME SILLY MISTAKE, SO THE PURPOSE OF THIS MODIFICATION IS TO RECORD
*         IN THE SMF26 RECORD THE ACTUAL LINES PRINTED INSTEAD OF THE NUMBER
*         OF LINES CREATED ON SPOOL.
*
*        ( UNDER HASP 3.1 THIS WAS AN UNNUMBERED MODIFICATION ).
*
*
*        AND ALSO :-
*
*        THE FIELD IN THE SMF26 RECORD THAT WE FONDLY THOUGHT HELD THE
*         TIME THAT THE JOB STARTED PRINTING ACTUALLY CONTAINS THE TIME
*         THAT THE JOB WAS PLACED ON THE OUTPUT QUEUE.  THIS, OF COURSE,
*         PLAYS MERRY HELL WITH OUR TURNAROUND STATISTICS ( GENERATED FROM
*         THE PSEUDO HASP ACCOUNTING RECORDS CREATED FROM THE SMF26 ), AND
*         THE PURPOSE OF THIS MODIFICATION IS TO ADD THE TIME ON PRINTER
*         TO THE SMF26 RECORD.
*
*        ( UNDER HASP 3.1 THERE WAS NO EQUIVALENT MODIFICATION ).
*
*        ***********
*        *ATTENTION*
*        ***********
*            THIS MOD. STORED ADDITIONAL INFORMATION ONLY IN THE JCT.
*             'JES2B404' IS THE ONE THAT MOVE THESE INFORMATION IN SMF26
*
***(LOGIC SUMMARY)
*
*        NOTE : FIVE ADDITIONAL FIELDS OF 4 BYTES EACH HAVE BEEN DEFINED
*                IN THE JCT AND SMF DSECT'S.
*
*        AT APPROPRIATE POINT WITHIN 'BUILD SMF6 RECORD' ROUTINE
*         IN HASPPRPU MODULE, EXIT WITH AN UNQUALIFIED $CBAL, THUS :-
*
*             $CBAL JES2B405                              Q4711500.
*
*        IN THE EXIT ITSELF,
*
*         1. FOR THE NUMBER OF LINES PRINTED :-
*            ADD 'PPLNCDCT' VALUE (NO OF LINES PRINTED OF CURRENT D/S)
*             TO 'AJCTNLPR' FIELD (NO OF LINES PRINTED OF PREVIOUS D/S)
*
*         2. TIME ON PRINTER :-
*            SAVE TIME AND DATE WHEN CURRENT D/S HAS STARTED TO PRINT
*             INTO 'AJCTPRST' AND 'AJCTPRSD' FIELDS.
*             USE '$TIME' MACRO TO GET CURRENT IPL TIME AND DATE, AND MOVE THEM
*             INTO 'AJCTPRET' AND 'AJCTPRED' FIELDS.
*
*         3. USE '$#JCT' TO COPY THE MODIFIED JCT TO SPOOL.
*
*        THE FIVE ADDITIONAL JCT FIELDS DESCRIBED ABOVE WILL BE MOVED
*         INTO THE FIVE CORRESPONDING SMF FIELDS BY THE JES2B404 MOD.
*
*
***(INSTALLATION)
*
*        THIS MOD. IS DYNAMICALLY LOADED AT INITILISATION TIME
*         UPON REQUEST VIA AN 'EXIT=' CONTRL CARD.
*
***(TESTING)
*
*        DUMP THE SMF DATA SET AND PRINT THE CONTENTS.
*
*    TO DO THAT :-
*
*      1) RUN A NORMAL 'SMFHOUR' JOB.
*
*      2) SUBMIT AND EXECUTE THE JOB 'TESTB405' WITH THE JES2 TEST SYSTEM.
*
*         YOU WILL FIND THIS JOB IN 'LIBRARYN.MVS' DATA SET,
*           MEMBER 'TESTB405', PASSWORD 'T405'.
*
*
*        RESULT TO BE OBTAINED :-
*
*          A PRINT-OUT OF THE SMF RECORDS IN DUMP FORMAT.
*

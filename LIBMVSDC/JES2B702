***(ID)                            JES2B702
***(SUBSYSTEM)                     JES2
***(DESIGNER)                      D.H.CARTWRIGHT
***(AUTHOR)                        D.H.CARTWRIGHT
*
***(DATE WRITTEN)                  MAY 1977
***(DATE TESTED)
***(DATE INSTALLED)
*
***(ABSTRACT)
*
*        THIS ROUTINE ACTS AS AN INTERFACE BETWEEN JES2 OUTPUT
*        DEVICES AND VM SPOOL.IT ISSUES A 'CP CLOSE' COMMAND
*        FOR THE APPROPRIATE VIRTUAL DEVICE AT THE END OF EACH
*        OUTPUT FILE I.E.AFTER THE END SEPARATOR.
*        IT MUST BE SELECTED WITH THE 'VMONLY' ATTRIBUTE.
*
***(LOGIC SUMMARY)
*
*        AT THE END OF JOB PROCESSING IN HASPPRPU AT Q464120
*        WHICH IS IN THE LOCAL DEVICE BUFFER FREE ROUTINE
*        A $CBAL TRANSFERS CONTROL TO THIS MODULE,WHICH SETS UP A
*        COMMAND TO CLOSE THE PRINTER OR PUNCH DEPENDING ON THE
*        PCEID.IT DISABLES INTERRUPTS,LOADS THE REAL ADDRESS OF THE
*        CP COMMAND AND ISSUES A DIAGNOSE CODE 8 INSTRUCTION.
*        IT THEN RESTORES THE SYSTEM MASK FROM THE APCEUSER AREA
*        WHERE IT HAD BEEN SAVED AND RETURNS TO HASPPRPU.
*
*        NOTE THAT THE FIRST VERSION IS RATHER CRUDE -
*        IT DOES NOT TEST THE CP COMMAND COMPLETION AND IS GLOBAL
*        TO ALL LOCAL DEVICES.IF THERE IS A REQUIREMENT THIS MAY
*        BE ENHANCED AT A FUTURE DATE.
*
*        FOR DETAILS OF THE DIAGNOSE INSTRUCTION REFER TO
*        THE VM SYSTEM PROGRAMMERS' GUIDE GC20-1807
*
***(INSTALLATION)
*
*        ***** DESCRIBE INSTALLATION OR REFER TO ANOTHER MEMBER *****
*
***(TESTING)
*
*        ***** DESCRIBE HOW TO TEST MODIFICATION *****

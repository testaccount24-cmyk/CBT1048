***(ID)                            AUXCMM06
***(SUBSYSTEM)                     COMMAND
***(DESIGNER)                      J.E.ABBEY
***(AUTHOR)                        J.E.ABBEY
*
***(DATE WRITTEN)                  MAR 1977
***(DATE TESTED)                   MAR 1977
***(DATE INSTALLED)                MAR 1977
*
***(ABSTRACT)
*
*        THIS ROUTINE HANDLES THE OPERATOR COMMAND #D CPU
*        IT IS ATTACHED BY THE COMMAND PROCESSOR AUXCMM01 AS A SUB-
*        TASK OF THE COMMUNICATIONS TASK.
*          THE PURPOSE OF THE COMMAND IS TO ALLOW THE OPERATOR TO
*        DETERMINE THE ACTIVITY OF THE VARIOUS JOBS IN THE SYSTEM. AND
*        THE SYSTEM ITSELF. IT IS ATTACHED BY THE COMMAND PROCESSOR TO
*        ALLOW THE COMMUNICATIONS TASK TO CONTINUE PROCESSING THE
*        CONSOLE, SINCE THE COMMAND IS A RELATIVELY LONG ONE IN EXECUTION,
*        TYPICALLY 5-8 SECONDS.
*
*
***(LOGIC SUMMARY)
*
*
*          THE ROUTINE INITIALISES ITSELF BY BUILDING A TABLE OF
*        ENTRIES FOR ALL POSSIBLE ADDRESS SPACES AND ISSUING A
*        STIMER WAIT FOR 1/50 TH OF A SECOND. AT EACH INTERVAL, THE
*        ROUTINE 'SAMPLES' THE ACTIVITY IN THE SYSTEM BY DOING TWO
*        THINGS:
*          1)  THE EXTERNAL OLD PSW IS EXAMINED TO SEE WHAT PROTECT
*              KEY WAS IN CONTROL IMMEDIATELY PRIOR TO THE TIMER
*              INTERRUPT OR WHETHER THE MACHINE WAS IN A WAIT.
*          2)  THE ASCB CHAIN IS SCANNED FROM THE TOP TO DETERMINE
*              WHICH ADDRESS SPACE IS GOING TO BE DISPATCHED NEXT.
*              THIS ADRESS IS TAKEN TO BE THE ONE WHICH WOULD BE
*              EXECUTING IF THIS SAMPLE ROUTINE WERE NOT.
*          WHEN THE NEXT ADDRESS SPACE IS FOUND, TESTS ARE MADE TO SEE
*        IF THE ADDRESS SPACE IS RUNNING A SUPERVISOR ROUTINE OR IF IT
*        HAS SERVICE REQUEST BLOCKS SCHEDULED. APPROPRIATE ACCUMULATORS
*        ARE INCREMENTED ACCORDING TO WHAT IS FOUND BY THESE TESTS.
*          THE COLLECTED FIGURES REPRESENT A ROUGH 'HEAD COUNT' OF
*        CPU USAGE BY THE VARIOUS JOB IN THE SYSTEM.
*
*
***(INSTALLATION)
*
*          INSTALLATION OF THIS COMMAND IS BY ASSEMBLING THE SOURCE AND
*        LINKING THE OBJECT ONTO SYS1.LINKLIB AS A SINGLE LOAD MODULE.
*          THE ROUTINE IS NOT LINKED WITH THE REST OF THE AUXILIARY COMMAND
*        PROCESSOR, SINCE IT IS INVOKED DYNAMICALLY BY AUXCMM01 WHEN
*        THAT ROUTINE ATTACHES IT AS A SEPARATE SUBTASK. IDEALLY, THE
*        MODULE SHOULD BE INCLUDED IN THE MODIFIED LINK PACK AREA VIA
*        THE IEALPAXX MEMBER OF SYS1.PARMLIB.
*          A COMPLETE JOB TO LOAD THE MODULE IS ON LIBRARYN.MVS AND IS
*        CALLED AUXCMM06.
*
***(TESTING)
*
*          AFTER THE MODULE HAS BEEN LOADED, RUN SOME ORDINARY JOBS INTO
*        THE SYSTEM AND ISSUE THE COMMAND AS FOLLOWS:
*
*              DD CPU,SYS          LIST THE ACTIVITY OF ALL SYSTEM
*                                  COMPONENTS.
*              DD CPU,JOBS         LIST THE ACTIVITY OF ALL USERS
*              DD CPU,?            LIST THE VALID OPERANDS AND FUNCTIONS
*              DD CPU              DEFAULTS TO DD CPU,JOBS
*

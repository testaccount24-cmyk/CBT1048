1************
 * UT414    *
 ************
0B1801
 -----
01. PURPOSE
 ----------
0   DUPLICATE A DATA SET SELECTING, DELETING, OR MODIFYING
    RECORDS THAT CAN BE IDENTIFIED BY THEIR INDIVIDUAL CON-
    TENT.  OUTPUT LOGICAL RECORD LENGTH AND BLOCK SIZE MAY
    BE CHANGED BY DCB PARAMETERS.  THE ABSENCE OF A CONTROL
    CARD CAUSES A TOTAL COPY OF ALL RECORDS.
02. LIMITATIONS
 --------------
0   A.   CONTROL CARDS SPECIFYING THE TYPE OF RUN MAY NOT BE
         MIXED IN THE SAME RUN.  (EXAMPLE -- YOU MAY NOT
         INCLUDE A DELETE OR MODIFY CARD IN A SELECT RUN.)
0   B.   CONTROL STATEMENTS MAY NOT EXTEND BEYOND COLUMN 71
         IN THE CONTROL CARDS.  A PARAMETER MUST BE CON-
         TAINED ON A SINGLE CARD.
0   C.   THE NUMBER OF ARGUMENTS OR LITERALS IS LIMITED ONLY
         BY THE SIZE OF THE REGION.  EACH ARGUMENT OR LITERAL
         REQUIRES APPROXIMATELY 10 ADDITIONAL BYTES OF STORAGE
         BESIDES ITS OWN LENGTH.
0   D.   IF A PACKED OR NUMERIC ARGUMENT IS SPECIFIED, THE
         CORRESPONDING FIELDS IN THE RECORDS BEING COMPARED
         MUST BE VALID PACKED OR NUMERIC DATA.  IF AN INVALID
         FIELD IS ENCOUNTERED, THE RECORD IS IDENTIFIED AND
         THE RUN IS TERMINATED.
0   E.   THE NUMBER OF OPTIONAL OUTPUT DATA SETS IS LIMITED
         TO 128.
0   F.   WHEN OPTIONAL OUTPUT DATA SETS ARE USED, THE NUMBER
         IS DEPENDENT UPON THE REGION SIZE.  EACH OPTIONAL
         DATA SET REQUIRES AN ADDITIONAL 20 BYTES PLUS BUF-
         FERS.  ALL OUTPUT DATA SETS MUST HAVE THE SAME DCB
         ATTRIBUTES.
03. INPUT
 --------
0   A.   THE INPUT DATA SET MAY BE ON TAPE OR DISK.  DISK FILES
         AND STANDARD LABELED TAPE FILES DO NOT NEED DCB PARA-
         METERS.  SPANNED RECORDS (V S OR VBS) MAY BE PROCESSED.
0   B.   CONTROL CARDS SPECIFY THE TYPE RUN.  CONTROL CARDS MAY
         BE CONTINUED BY PLACING A COMMA AFTER THE LAST PARA-
         METER.  CARDS MAY START IN ANY COLUMN FROM 1 THRU 71.
1************
 * UT414    *
 ************
04. OUTPUT
 ---------
0   OUTPUT MAY BE DISK, TAPE OR SYSOUT TO THE PRINTER.  THE
    OUTPUT RECORD LENGTH NEED NOT BE THE SAME AS THE INPUT
    (IF RECFM=VS OR VBS, OUTPUT LRECL AND BLKSIZE WILL BE
    FORCED EQUAL TO THE INPUT).  IF THE OUTPUT LRECL IS
    GREATER THAN THE INPUT LRECL, HEX ZEROS WILL BE USED AS
    PADDING TO LENGTHEN THE RECORD.  IF THE OUTPUT LRECL IS
    LESS THAN THE INPUT LRECL, THE RECORD WILL BE TRUNCATED.
    IF NO OUTPUT DCB IS PRESENT, THE INPUT LRECL, BLKSIZE
    AND RECFM IS ASSUMED FOR OUTPUT.
05. OPERATION
 ------------
0   A.   CONTROL CARD FORMATS
0        1.   TYPE RUN CONTROL STATEMENT
0             IIIIII,C,PPPPP,T'A----A'
0             WHERE:
0             IIIIII IS THE RUN IDENTIFIER - SELECT, DELETE, MODIFY
0                  C IS THE CONDITIONAL OPERATOR - E IS EQUAL
                                                   G IS GREATER THAN
                                                   L IS LESS THAN
                                                   U IS UNEQUAL
0              PPPPP IS ONE TO FIVE NUMERIC DIGITS DEFINING THE
                        LEFT MOST POSITION OF THE FIELD IN THE
                        RECORD TO BE COMPARED TO THE ARGUMENT.
0                  T IS THE TYPE OF ARGUMENT AND DETERMINES THE
                        TYPE COMPARISON -          C IS CHARACTER
                                                   X IS HEX
                                                   P IS PACKED
                                                   N IS NUMERIC.
0                       IF T IS NOT SPECIFIED, CHARACTER IS ASSUMED
                        CHARACTER AND HEX LITERALS CAUSE A LOGICAL
                        COMPARISON.  PACKED AND NUMERIC LITERALS
                        CAUSE A NUMERIC COMPARISON WHICH CONSIDERS
                        THE SIGN IF PRESENT.
0          'A----A' IS THE ARGUMENT TO COMPARE TO THE INPUT
                        RECORDS.
0        FOR A GIVEN SELECT, DELETE OR MODIFY STATEMENT MULTIPLE
         CONDITIONS (,C,PPPPP,T'A----A') MAY BE SPECIFIED AND ALL
         OF THE CONDITIONS MUST BE SATISFIED BEFORE A RECORD IS
         SELECTED, DELETED OR MODIFIED.  MULTIPLE SELECT, DELETE
         OR MODIFY STATEMENTS MAY BE INCLUDED IN THE SAME RUN
         (BUT NOT MIXED) TO SELECT, DELETE, OR MODIFY RECORDS
         ON AN OR BASIS.
1************
 * UT414    *
 ************
0        AN INSERT CONTROL STATEMENT MUST FOLLOW EACH MODIFY
         STATEMENT TO SPECIFY THE DATA TO BE INSERTED INTO THE
         RECORDS WHICH MEET THE CONDITION SPECIFIED ON THE
         PREVIOUS MODIFY STATEMENT.
0        2.   INSERT CONTROL STATEMENT
0             INSERT,PPPPP,T'1----1'
0             WHERE:
0             INSERT IDENTIFIES THE STATEMENT TYPE
0              PPPPP IS ONE TO FIVE NUMERIC DIGITS DEFINING THE
                       LEFT MOST POSITION OF THE FIELD IN THE
                       RECORD WHERE THE LITERAL IS TO BE PLACED.
0                   T IS THE TYPE OF LITERAL -     C IS CHARACTER
                                                   X IS HEX
                                                   P IS PACKED
                                                   N IS NUMERIC
0           '1----1' IS THE LITERAL TO BE INSERTED.  MORE THAN
                       ONE LITERAL MAY BE INSERTED INTO A RECORD
                       BY REPEATING THE POSITION AND LITERAL
                       PARAMETERS (,PPPPP,T'1----1').
0        3.   SELECT CONTROL STATEMENT OPTIONAL POSITIONAL
              PARAMETERS
0             SELECT  (,OUTDD=X......X)(,DEFAULT)
                      (,LOGID=Y),C,PPPPP,T'A----A'
0             X-----X IS ANY VALID 1 TO 8 CHARACTER DDNAME.
                      ONLY 1 DDNAME IS ALLOWED ON EACH SELECT
                      CARD.  UP TO 128 UNIQUE DDNAME'S MAY BE
                      SPECIFIED ON AS MANY SELECT CARDS.  THE
                      NAMES SYSUT2, SYSPRINT, SYSUT1, AND SYSIN
                      MAY NOT BE USED.  A DD CARD MUST BE IN-
                      CLUDED IN THE JCL FOR EACH SPECIFIED DDNAME.
                      THE SAME DDNAME MAY BE SPECIFIED ON AS MANY
                      SELECT CARDS AS IS DESIRED.
0             DEFAULT INDICATES THAT IF SELECTION CRITERIA ARE
                      NOT MET FOR THE CORRESPONDING SELECT CARD
                      THE RECORD IS TO BE WRITTEN TO SYSUT2.
                      DEFAULT MAY ONLY BE SPECIFIED IF OUTDD IS
                      ALSO SPECIFIED.
0                   Y IS ANY VALID IMS LOG RECORD TYPE.  IF
                      LOGID IS SPECIFIED, ALL FIELD OFFSETS WILL
                      BE RELATIVE TO ZERO TO CORRESPOND TO IBM
                      DOCUMENTATION.
1************
 * UT414    *
 ************
0       NOTE:FOR EACH INPUT RECORD, AN ENTIRE PASS WILL BE MADE
             THROUGH ALL OF THE SELECTION CRITERIA FOR ALL OF
             THE SELECT CARDS, THEREBY MAKING IT POSSIBLE TO
             DUPLICATE RECORDS TO DIFFERENT OUTPUT DATA SETS.
             WHEN DEFAULT IS SPECIFIED, IT WILL APPLY ONLY TO
             THE SELECT CARD ON WHICH IT APPEARED.  ANY ONE
             INPUT RECORD WILL NOT BE DEFAULTED MORE THAN 1
             TIME.  IF DEFAULT DOES NOT APPEAR ON ANY OF THE
             SELECT CARD(S), AN INPUT RECORD WILL NOT BE DE-
             LETED IF SELECTION CRITERIA HAS BEEN PREVIOUSLY
             MET FOR A PRECEDING SELECT CARD.  IF THE OPTIONAL
             PARAMETERS HAVE NOT BEEN SPECIFIED, SELECT CARDS
             WILL BE PROCESSED AS THEY WERE IN THE OLDER
             VERSION.  (REFER TO ITEM 1, TYPE RUN CONTROL
             STATEMENT.)
0   B.   DEFINING THE TYPE OF ARGUMENT/LITERAL
0        IF T IS A C OR IF T IS NOT CODED, THE ARGUMENT/
         LITERAL FORMAT IS CHARACTER.  (ONE ALPHA-NUMERIC
         CHARACTER PER BYTE.)  THERE IS NO LENGTH RESTRICTION
         EXCEPT IT MUST FIT ON ONE CONTROL CARD.  A WARNING
         MESSAGE IS PRODUCED IF A COMMA IS IMBEDDED IN A
         CHARACTER ARGUMENT/LITERAL.
0        IF T IS A X, THE ARGUMENT/LITERAL FORMAT IS HEX (TWO
         HEX CHARACTERS PER BYTE).  IF AN ODD NUMBER OF
         CHARACTERS ARE SPECIFIED, A ZERO WILL BE ADDED TO THE
         LEFT OF THE ARGUMENT/LITERAL.  A WARNING MESSAGE WILL
         BE PRODUCED.  THERE IS NO LENGTH RESTRICTION EXCEPT
         IT MUST FIT ON ONE CONTROL CARD.
0        IF T IS A P, THE ARGUMENT/LITERAL FORMAT IS PACKED
         (TWO DIGITS PER BYTE AND A SIGN).  IF AN EVEN NUMBER
         OF DIGITS ARE SPECIFIED, A ZERO WILL BE ADDED TO THE
         LEFT OF THE ARGUMENT/LITERAL.  A WARNING MESSAGE WILL
         BE PRODUCED.  A PACKED ARGUMENT/LITERAL HAS A MAXIMUM
         LENGTH OF A SIGN POSITION AND UP TO 17 DIGITS.
0        IF T IS N, THE ARGUMENT/LITERAL FORMAT IS NUMERIC (ONE
         DIGIT PER BYTE) AND A SIGN WILL BE TAKEN INTO CON-
         SIDERATION IN THE COMPARISON.  A NUMERIC ARGUMENT/
         LITERAL HAS A MAXIMUM LENGTH OF A SIGN POSITION AND
         UP TO 17 DIGITS.
0   C.   CONDITION CODES
0        IF THE JOB IS TERMINATED BEFORE NORMAL END, A CONDITION
         CODE OF 8 IS SET.
0        A CONDITION CODE OF 4 IS SET IF WARNING MESSAGES WERE
         PRODUCED BECAUSE OF CONTROL CARD SPECIFICATIONS.
0        A NORMAL END OF RUN RETURNS A ZERO CONDITION CODE.
1************
 * UT414    *
 ************
06. EXAMPLE
 ----------
0   //EXAMPLEL  JOB  ACCOUNTING DATA
    //STEPNAME  EXEC PGM=B1801
    //SYSPRINT  DD   SYSOUT=A
    //SYSUT1    DD   DSN=INPUT,DISP=(OLD,KEEP),UNIT=TAPE9,
    //               DCB=(RECFM=FB,LRECL=80,BLKSIZE=800),
    //               VOL=SER=NOLABL,LABEL=(,NL)
    //SYSUT2    DD   DSN=&&OUTPUT,DISP=(NEW,PASS),UNIT=DISK,
    //               DCB=(RECFM=FB,LRECL=100,BLKSIZE=2000),
    //               SPACE=(CYL,(1,1))
    //SYSIN     DD   *
      DELETE,E,1,C'9'
      DELETE,L,10,N'20',G,10,N'-36'
    /*
0   IN THE ABOVE EXAMPLE THE INPUT IS A NO-LABEL TAPE,
    THEREFORE DCB PARAMETERS ARE NECESSARY.  THE OUTPUT
    IS A DISK DATA SET.  NOTE THAT THE RECORDS HAVE BEEN
    LENGTHENED AND THE BLOCKING FACTOR HAS BEEN CHANGED BY
    THE OUTPUT DCB PARAMETERS.  THE CONTROL CARDS SPECIFY
    THAT ANY RECORD WITH A CHARACTER 9 IN POSITION 1 WILL BE
    DELETED OR ANY RECORD WITH A VALUE BETWEEN A PLUS 20
    AND A MINUS 36 IN BYTES 10 AND 11 WILL BE DELETED.
0   //EXAMPLE2  JOB ACCOUNTING DATA
    //STEPNAME  EXEC PGM=B1801
    //SYSPRINT  DD   SYSOUT=A
    //SYSUT1    DD   DSN=INPUT,DISP=(OLD,KEEP),UNIT=TAPE9
    //SYSUT2    DD   DSN=OUTPUT,DISP=(NEW,KEEP),UNIT=TAPE9
    //SYSIN     DD   *
      SELECT,E,20,N'-12345'
      SELECT,E,10,X'A15E',U,30,P'-12345'
    /*
0   IN THE ABOVE EXAMPLE THE INPUT IS A STANDARD LABEL TAPE,
    THEREFORE NO DCB PARAMETERS ARE NECESSARY.  SINCE THE
    OUTPUT RECORD LENGTH AND BLOCKING ARE NOT BEING CHANGED,
    NO OUTPUT DCB PARAMETERS ARE NECESSARY.  THE CONTROL CARDS
    SPECIFY THAT ANY RECORD WILL BE SELECTED WHICH CONTAINS
    A MINUS 12345 IN POSITIONS 20 THROUGH 24 OR ANY RECORD
    WITH A HEX VALUE OF A15E IN BYTES 10 AND 11 AND THE
    PACKED VALUE IN BYTES 30 THRU 32 IS NOT EQUAL TO A MINUS
    12345.
1************
 * UT414    *
 ************
0   //EXAMPLE3     JOB  ACCOUNTING DATA
    //STEPNAME     EXEC PGM=B1801
    //SYSPRINT     DD   SYSOUT=A
    //SYSUT1       DD   DSN=INPUT,DISP=(OLD,KEEP)
    //SYSUT2       DD   DSN=OUTPUT,DISP=(NEW,KEEP),UNIT=TAPE9
    //SYSIN        DD   *
      MODIFY,E,1,'3',E,6,C'020001',E,31,'P'
      INSERT,6,'020009',31,'A',156,
      'THIS IS A PRINT CHANGE RECORD TYPE A'
      MODIFY,E,1,'1'
      INSERT,10,'123171'
    /*
0   IN THE ABOVE EXAMPLE THE INPUT IS A CATALOGED DATA SET.
    THE OUTPUT IS A NO-LABEL TAPE.  THE CONTROL CARDS SPECIFY
    THAT A RECORD WILL BE MODIFIED IF IT CONTAINS THE CHARACTER
    3 IN POSITION 1 AND 020001 IN POSITIONS 6 THROUGH 11 AND
    A P IN POSITION 31.  IF THE ABOVE CONDITIONS ARE MET
    THE LITERALS SPECIFIED IN THE FIRST SET OF INSERT CARDS
    WILL BE INSERTED INTO POSITIONS 6 THROUGH 11, 31 AND 156
    THROUGH 191 OF THE RECORD.  NOTE THE INSERT CARD IS CON-
    TINUED AT THE END OF A PARAMETER WITH A COMMA.
0   THE CONTROL CARDS ALSO SPECIFY THAT A RECORD CONTAINING
    THE CHARACTER 1 IN POSITION 1 WILL BE MODIFIED BY IN-
    SERTING 123171 IN POSITION 10 THROUGH 15.
0   //EXAMPLE4     JOB  ACCOUNTING DATA
    //STEPNAME     EXEC PGM=B1801
    //SYSPRINT     DD   SYSOUT=A
    //SYSUT1  DD   DSN=INPUT,DISP=(OLD,KEEP)
    //DD1          DD   DSN=OUTPUT1,DISP=(NEW,KEEP),UNIT=TAPE9
    //DD2          DD   DSN=OUTPUT2,DISP=(NEW,KEEP),UNIT=TAPE9
    //DD3          DD   DSN=OUTPUT3,DISP=(NEW,KEEP),UNIT=TAPE9
    //SYSUT2       DD   DSN=DEFAULT,DISP=(NEW,KEEP),UNIT=TAPE9
    //SYSIN        DD   *
 1    SELECT,OUTDD=DD1,DEFAULT,E,10,'ABC'
 2    SELECT,OUTDD=DD2,D,10,'ABC'
 3    SELECT,OUTDD=DD3,E,10,'ABC'
 4    SELECT,OUTDD=DD2,E,10,'DEF'
 5    SELECT,OUTDD=DD3,DEFAULT,E,10,'GHI',E,20,X'1234'
    /*
0   IN THE ABOVE EXAMPLE THE INPUT IS A CATALOGED DATA SET.
    THERE ARE 3 OUTPUT DATA SETS (DD1,DD2,DD3) AND A DEFAULT
    DATA SET (SYSUT2).  CONTROL CARD 1 SPECIFIES THAT A RE-
    CORD WILL BE SELECTED AND WRITTEN TO DD1 IF POSITIONS
    10 THROUGH 12 CONTAINS THE CHARACTERS 'ABC', AND IF NOT
    'ABC', THE RECORDS IS TO BE WRITTEN TO SYSUT2(DEFAULT).
    CONTROL CARDS 2 AND 3 SPECIFY THAT A RECORD WILL BE
    SELECTED AND WRITTEN TO DD2 AND DD3 IF POSITIONS 10 THRU
    12 CONTAINS THE CHARACTERS 'ABC'.  CONTROL CARD 4
    SPECIFIES THAT A RECORD WILL BE SELECTED AND WRITTEN TO
    DD2 IF POSITION 10 THRU 12 CONTAINS THE CHARACTERS 'DEF'.
1************
 * UT414    *
 ************
0   CONTROL CARD 5 SPECIFIES THAT A RECORD WILL BE WRITTEN
    TO DD3 IF POSITIONS 10 THRU 12 CONTAINS THE CHARACTERS
    'GHI' AND POSITIONS 20 AND 21 CONTAINS THE HEX VALUE
    '1234'.  CONTROL CARD 5 ALSO SPECIFIES THAT NON-SELECTED
    RECORDS ARE TO BE WRITTEN TO THE DEFAULT FILE (SYSUT2).
0   //EXAMPLE5     JOB ACCOUNTING DATA
    //STEPNAME     EXEC PGM=B1801
    //SYSPRINT     DD  SYSOUT=A
    //SYSUT1       DD  DSN=SYS1.IMSLOG,UNIT=TAPE9,
                       VOL=SER=907322,DISP=(OLD,KEEP)
    //DD1          DD  DSN=OUTPUT1,DISP=(NEW,KEEP),UNIT=TAPE9
    //DD2          DD  DSN=OUTPUT2,DISP=(NEW,KEEP),UNIT=TAPE9
    //SYSIN        DD  *
 1    SELECT,OUTDD=DD1,LOGID=7,E,5,'ACCTCD01'
 2    SELECT,OUTDD=DD2,LOGID=7,E,5,'ACCT02'
 3    SELECT,OUTDD=DD2,LOGID=7,E,5,'ACCT03'
 4    SELECT,OUTDD=DD2,LOGID=2
 5    SELECT,OUTDD=DD2,LOGID=6
 6    SELECT,OUTDD=DD1,LOGID=42,G,36,X'1244372F',L,36,X'1247137F'
 7    SELECT,OUTDD=DD2,LOGID=7,E,5,'ACCT04'
    /*
0   IN THE ABOVE EXAMPLE THE INPUT IS AN IMS LOG TAPE.  THERE
    ARE TWO OUTPUT DATA SETS (DD1 AND DD2).  CONTROL CARD 1
    SPECIFIES THAT A RECORD WILL BE SELECTED AND WRITTEN TO
    DD1 IF IT IS A TYPE 7 LOG RECORD AND POSITIONS 5 THRU 12
    CONTAINS THE CHAACTERS 'ACCTCD01'.  CONTROL CARD 2
    SPECIFIES THAT A RECORD WILL BE SELECTED AND WRITTEN TO
    DD2 IF IT IS A TYPE 7 LOG RECORD AND POSITIONS 5 THRU
    10 CONTAINS THE CHARACTERS 'ACCT02'.  CONTROL CARD 3
    SPECIFIES THAT A RECORD WILL BE SELECTED AND WRITTEN TO
    DD2 IF IT IS A TYPE 7 LOG RECORD AND POSITIONS 5 THRU 10
    CONTAINS THE CHARACTERS 'ACCT03'.  CONTROL CARD 4
    SPECIFIES THAT ALL TYPE 2 LOG RECORDS WILL BE SELECTED
    AND WRITTEN TO DD2.  CONTROL CARD 5 SPECIFIES THAT ALL
    TYPE 6 LOG RECORDS WILL BE SELECTED AND WRITTEN TO DD2.
    CONTROL CARD 6 SPECIFIES THAT A RECORD WILL BE SELECTED
    AND WRITTEN TO DD1 IF IT IS A TYPE 42 LOG RECORD AND
    POSITIONS 36 THRU 39 ARE GREATER THAN THE HEX VALUE,
    '1244372F' AND LESS THAN THE HEX VALUE '1247137F'.
    CONTROL CARD 7 SPECIFIES THAT A RECORD WILL BE SELECTED
    AND WRITTEN TO DD2 IF IT IS A TYPE 7 LOG RECORD AND
    POSITIONS 5 THRU 10 CONTAINS THE CHARACTERS 'ACCT04'
0   NOTES:
0   1.  ALL RECORD OFFSETS ARE TREATED AS RELATIVE TO ZERO
        WITH AN IMS LOG RUN.
0   2.  THE DDNAME'S DD1 AND DD2 ARE SHOWN FOR EXAMPLE
        PURPOSES ONLY.  ANY VALID DDNAME MAY BE USED,
        WITH THE EXCEPTION OF SYSUT1, SYSUT2, SYSPRINT, & SYSIN.
0   3.  IF DESIRED, THE OUTDD PARAMETER MAY BE OMITTED,
        THEREFORE MEANING THAT ALL OUTPUT WILL BE WRITTEN
        TO SYSUT2.  IF OUTDD IS SPECIFIED, A SYSUT2 DD
        STATEMENT NEED NOT BE PRESENT.

NEWPAGE00
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****    CCCCCCC OOOOOOO MM   MM PPPPPPP  AAAAA  RRRRRR  EEEEEEE           *****
*****    C       O     O M M M M P     P A     A R     R E                 *****
*****    C       O     O M  M  M P     P A     A R     R E                 *****
*****    C       O     O M     M PPPPPPP 1111111 RRRRRR  EEEE              *****
*****    C       O     O M     M P       1     1 R   R   E                 *****
*****    C       O     O M     M P       1     A R    R  E                 *****
*****    CCCCCCC OOOOOOO M     M P       A     A R     R EEEEEEE           *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                    OOOOOOO PPPPPPP  SSSSS                            *****
*****                    O     O P     P S     S                           *****
*****                    O     O P     P S                                 *****
*****                    O     O PPPPPPP  SSSSS                            *****
*****                    O     O P             S                           *****
*****                    O     O P       S     S   ..                      *****
*****                    OOOOOOO P        SSSSS    ..                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****             GGGGG  U     U IIIIIII DDDDDD  EEEEEEE                   *****
*****            G     G U     U    I    D     D E                         *****
*****            G       U     U    I    D     D E                         *****
*****            G       U     U    I    D     D EEEE                      *****
*****            G   GGG U     U    I    D     D E                         *****
*****            G    G  U     U    I    D     D E                         *****
*****             GGGGG   UUUUU  IIIIIII DDDDDD  EEEEEEE                   *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
NEWPAGE00
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****              HOW TO USE THIS GUIDE                                   *****
*****              ---------------------                                   *****
*****                                                                      *****
*****                                                                      *****
*****              THIS OPS GUIDE IS MAINTAINED ON LIBRARIAN               *****
*****              UNDER THE MODULE NAME 'T618S000'.                       *****
*****                                                                      *****
*****              A SPECIAL PROCEDURE (COMOPSGD) EXIST TO                ******
*****              PROVIDE THE FOLLOWING MAINTENANCE FEATURES              *****
*****                                                                      *****
*****                   A) UPDATING OF THE MODULE USING 2                  *****
*****                      LINKED EXECUTIONS OF LIBRARYN,                  *****
*****                      THUS ALLOWING '-INC' ETC.                       *****
*****                      FACILITIES                                      *****
*****                                                                      *****
*****                   B) THE PRINTING OF THE MODULE BY                   *****
*****                      VAMPIRE IN A PRESENTABLE FORMAT,                *****
*****                      WITH PAGE HEADINGS GENERATED FROM               *****
*****                      CONTROL STATEMENTS INCORPORATED                 *****
*****                      IN THE LIBRARYN MODULE.                         *****
*****                                                                      *****
*****                  C) THE SELECTION OF JCL HELD IN THE                 *****
*****                      MODULE FOR TRANSFER TO IEBUPDTE                 *****
*****                      AND CONSEQUENT PROCEDURE LIBRARY                *****
*****                      UPDATE.                                         *****
*****                                                                      *****
*****                   D) THE PUNCHING OUT OF THE SYSTEM                  *****
*****                      EXECUTION JCL (MAINTAINED IN                    *****
*****                      THE JOB FLOW SECTION)                           *****
*****                                                                      *****
*****              THIS GUIDE MUST BE USED IN CONJUNCTION WITH             *****
*****              A CONVENTIONAL DOCUMENTATION FOLDER WHICH               *****
*****              CONTAINS                                                *****
*****                                                                      *****
*****                   A) INPUT FORMS FOR USERS                           *****
*****                   B) RUN CONTROL SHEETS FOR OPS.                     *****
*****                   C) FILE LAYOUTS.                                   *****
*****                   D) CORRESPONDENCE                                  *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
NEWPAGE00
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****              OPS.GUIDE  -  CONTENTS                                  *****
*****              ----------------------                                  *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****              1. INTRODUCTION                                         *****
*****                                                                      *****
*****              2. PHASE LIST                                           *****
*****                                                                      *****
*****                 PHASE FLOWCHART                                      *****
*****                                                                      *****
*****                 INFORMATION ON BRIDGES                               *****
*****                                                                      *****
*****                 RUN SCHEDULE                                         *****
*****                                                                      *****
*****                 RUN TIMES                                            *****
*****                                                                      *****
*****                 CURRENCY IMPLICATIONS                                *****
*****                                                                      *****
*****                 FILE LIST                                            *****
*****                                                                      *****
*****              3. PHASES BY JOB                                        *****
*****                                                                      *****
*****              4. PROC INFORMATION (BY PROC) SHOWING                   *****
*****                                                                      *****
*****                   A) INTRODUCTION                                    *****
*****                   B) FLOWCHART                                       *****
*****                   C) JCL                                             *****
*****                                                                      *****
*****              5. EXECUTION J.C.L.                                     *****
*****                                                                      *****
*****              6. RERUN, RESTART AND DEPENDENCY RULES INSTRUCTIONS     *****
*****                                                                      *****
*****              7. REPORTS & DISTRIBUTION LIST                          *****
*****                                                                      *****
*****              8. SECURITIES                                           *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
NEWPAGE00
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****            IIIIIII N     N TTTTTTT RRRRRRR OOOOOOO                   *****
*****               I    NN    N    T    R     R O     O                   *****
*****               I    N N   N    T    R     R O     O                   *****
*****               I    N  N  N    T    RRRRRR  O     O                   *****
*****               I    N   N N    T    R   R   O     O                   *****
*****               I    N    NN    T    R    R  O     O  ..               *****
*****            IIIIIII N     N    T    R     R OOOOOOO  ..               *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
NEWPAGE00
                    INTRODUCTION  TO  COMPARE
                    -------------------------
                    -------------------------

                    THE COMPARE SYSTEM WAS ESTABLISHED TO PROVIDE
                    THE SOURCE FOR HANDLING MAPC'S SALES DATA
                    FROM A MANAGEMENT VIEWPOINT (IE A NON -
                    ACCOUNTING VIEWPOINT).

                         THE SYSTEM FULFILS THE FOLLOWING MAJOR
                    TASKS -

                         A) COLLECTS SALES VOLUMES SUPPLIED
                            BY MAPC SALES AREA MANAGERS ON A
                            QUARTERLY BASIS.

                         B) MAINTAINS A VARIETY OF PRICE FILES
                            AND ALLOWS BRUSSELS MANAGEMENT TO
                            PLAN FUTURE PRICES BEFORE ENTERING
                            THEM ON THOSE FILES.

                         C) CREATES BUDGET SALES FILES BY
                            INTERNAL BRIDGING FROM FORECAST DATA.
                            THE BUDGET DATA CAN THEN BE UPDATED
                            WITHOUT AFFECTING FORECAST FILES (AND
                            VICE VERSA).

                         D) CAPTURES ACTUAL SALES DATA FROM SUE
                            EVERY MONTH FOR ENTRY INTO THE MAPC
                            SALES HISTORY FILE.
                                THIS FILE IS AVAILABLE FOR USER
                            ACCESS BY MEANS OF A PARROT USER
                            CODING BOOKLET.

                         E) BRIDGES ACTUAL & BUDGET SALES DATA
                            TO MAGIC (MAPC'S SYSTEM FOR PRODUCING
                            AREA PERFORMANCE REPORTS EVERY MONTH).

                    FOR THE OPERATION OF THIS SYSTEM IT IS
                    CONVENIENT TO THINK OF COMPARE AS A SET
                    OF PHASES. A PHASE LIST AND PHASE FLOW
                    DIAGRAM FOLLOW THIS INTRODUCTION.

                         DETERMINATION OF WHICH PROCS ARE TO
                    BE RUN WILL BE PROVIDED BY THE USER'S
                    COMPLETION OF A RUN CHECKLIST. THIS LIST
                    IS A RUN REQUEST FORM SHOWING JOB FUNCTIONS
                    LAID OUT IN THE PATTERN OF THE PHASE FLOW.
                    THE USER WILL TICK THE FUNCTIONS REQUIRED.

                         AT THE TIME OF WRITING, THE SOLE USER
                    CONTACT FOR ALL MAPC IS

                             HERMAN VAN HEESVELDE
                             --------------------
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             *     PHASE       *
                                                             *     LIST        *
                                                             *******************
              PHASE     TASKS
              =====     ====================================

                1       CYCLE INITIALISATION.
                        SAVE REPORT FILE.
                        CMF UPDATES.
                        CREATE CONDENSED PRODUCT INFORMATION.


                2       UPDATE VOLUME FORECAST MASTER FILE.


                3       UPDATE FORECAST DEDUCTIONS
                          (THIS SEGMENT NOT YET ESTABLISHED).
                        UPDATE PRODUCT PRICES.
                        PRICE PLANNING
                          (THIS SEGMENT NOT YET ESTABLISHED).
                        PRICE LISTS.


                4       BUILD FORECAST REPORT FILES.


                5       MAINTAIN ACTUAL HISTORY FILE.
                        CREATE 'ACTUAL' REPORT FILES.


                6       BRIDGE TO BUDGET FILES.


                7       HANDLE BUDGET FILES.


                8       PRODUCE ALL MAIN REPORTS.


                9       TAKE FILE SECURITIES.
                        RESTORE FILES.



              THE SYSTEM'S PHASES ARE REFLECTED IN THE
              JCL JOB AND PROCEDURE NUMBERING.



                           |
                           |
                           V
                 C O M P R X X X
NEWPAGE00
                         ---------------                           *************
                         |      1      |                           * FLOWCHART *
                         | INITIALISE  |                           *    OF     *
                         |   SYSTEM    |                           *   PHASES  *
                         ---------------                           *************
                                |
                                |
                                |
                                |            ---------------
                                |            |      3      |
                                |            |   UPDATE    |
                                |            |  DEDN. FILE |
                                |            ---------------
                                |                   |
                                |                   |
                                |                   V
     ---------------            |            ---------------     ---------------
     |     2       |            |            |      3      |     |      3      |
     |  UPDATE     |            |            |    UPDATE   |<--->|    PRICE    |
     | VOL. FILE   |            |            |  PRICE FILES|     |   PLANNING  |
     ---------------            |            ---------------     ---------------
            |                   |                   |                   |
            --------------------|----------------------------------------
                                V
                         ---------------
                         |      4      |
                         | BUILD FCAST |
                         | REPORT FILE |
                         ---------------
                                |
                                |
                                |
     ---------------            |            ---------------
     |     6       |            |            |     5       |
     | BRIDGE TO   |            |<-----------|  CAPTURE    |
     |   BUDGETS   |            |            |  ACTUALS    |
     ---------------            |            ---------------
            |                   |
            |                   |
            V                   |
     ---------------            |
     |     7       |            |
     |   HANDLE    |----------->|
     |   BUDGETS   |            |
     ---------------            |
                                |
                                |
                                V
                         ---------------          ---------------
                         |      8      |          |      9      |
                         |   PRODUCE   |          |    FILE     |
                         |   REPORTS   |          |  SECURITIES |
                         ---------------          ---------------
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *     BRIDGES      *
                                                            *                  *
                                                            ********************
                   BRIDGES
                   =======
                   THE COMPARE SYSTEM IS CONCERNED WITH THE
                   FOLLOWING BRIDGES
        *******
        *     *
        * IN  *    FILE SUE.MIC010(0) FROM JOB SUEMTH05
        *     *    ENTERING JOB COMPR500
        *******

        *******
        *     *
        * OUT *    FILE COMPARE.CMPRTOBY FOR MAPC SALES BUDGET
        *     *    TO ENTER TOBY ONCE A YEAR FROM JOB COMPR790
        *******
                   FILE COMPARE.T618F562 WHICH IS READ BY
                   MAGIC ONCE A MONTH
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *       RUN        *
                                                            *    SCHEDULE      *
                                                            ********************
                   RUN SCHEDULE
                   ============
                   COMPARE CONSISTS OF CERTAIN JOBS WHICH ARE
                   RUN REGULARLY (ONCE PER MONTH) AND OTHERS
                   WHICH MAY BE REQUESTED AT ANY TIME BY THE
                   USER.
                        THE REGULAR JOBS ARE OUTLINED ON AN
                   OPERATIONS RUN CONTROL SHEET HELD IN THE
                   CONVENTIONAL DOCUMENTATION FOLDERC
                        THE USER SPECIFIES HIS OCCASIONAL JOBS
                   ON A USER RUN REQUEST SHEET ALSO TO BE FOUND
                   IN THE CONVENTIONAL DOCUMENTATION FOLDER, TO
                   THIS HE MAY ATTACH A PRINT REQUEST FORM
                   WHICH WILL BE USED BY JOB COMPR800 TO
                   GENERATE PRINT JOBS TO THE INTERNAL
                   READER.
                        WHETHER THE JOBS TO BE RUN ORIGINATED
                   FROM THE OPS SCHEDULE OR FROM USER REQUESTS
                   THE RUN CAN BE ASSEMBLED FOR EXECUTION
                   USING THE SIMPLE RULES PROVIDED IN THE
                   DEPENDENCY SECTION.
                        WHATEVER JOBS NEED TO BE RUN, USE THE SYSTEM'S
                   JOB GENERATOR (AS SHOWN ON USER RUN REQUEST
                   FORM - PROCEDURE COMPR900).
                        BY EXECING COMPR900 AND PLACING ALL YOUR
                   JOB REQUESTS AND DATA CARDS BEHIND, THE ENTIRE
                   JCL STREAM WILL BE ASSEMBLED INTERNALLY AND
                   SHUNTED TO THE INTERNAL READER. ALL DATA WILL
                   ALSO BE SHUNTED TO THE CORRECT DATA FILE FOR
                   LATER RETRIEVAL BY THE JOBS CONCERNED. NOTE THAT
                   THIS FACILITY ALSO TAKES CARE OF THE SYSTEM'S
                   DEPENDENCIES.
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *       RUN        *
                                                            *      TIMES       *
                                                            ********************
                   RUN TIMES
                   =========
                   AT PRESENT WE HAVE INSUFFICIENT DATA TO PROVIDE
                   ACCURATE FIGURES ON JOB RUN TIMES.
                        AFTER SAY SIX MONTHS EXPERIENCE WE WILL
                   WILLINGLY INSERT HERE A TABLE OF AVERAGE RUN
                   TIMES TO ASSIST SCHEDULE PREPARATION.
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *    CURRENCY      *
                                                            *   IMPLICATIONS   *
                                                            ********************
                   CURRENCY IMPLICATIONS
                   =====================
                   CURRENCY ENTERS INTO COMPARE PROCESSING
                   IN THE FOLLOWING WAYS
                        A) COMPARE ACCEPTS LOCAL CURRENCY
                           SALES VALUES FROM SUE ON FILE
                           SUE.MIC010(0) - SEE JOB COMPR500
                               IN THIS JOB, WE ACCEPT THE
                           CURRENCY CONVERSION FACTORS PROVIDED
                           IN THE SUE RECORD. WE THEN CALCULATE
                           DOLLAR VALUES FOR COMPARE ACTUAL
                           SALES RECORDS. THESE LOCAL CURRENCY
                           VALUES AND DOLLAR VALUES WILL
                           THEREAFTER BE PRESERVED UNCHANGED.
                           THEY WILL NEVER REQUIRE TO BE
                           REVALUED IN ANY WAY
                        B) COMPARE MAINTAINS PRODUCT PRICE
                           FILES IN LOCAL CURRENCY
                               COMPARE.T618F283
                               COMPARE.T618F284
                               COMPARE.T618F285
                           THESE PRICES ARE MATCHED AGAINST
                           SALES VOLUME FORECASTS REPORTED BY
                           FIELD SALES MANAGERS. IN THE MATCHING
                           PROCESS (PROG. T618P080) A CURRENCY
                           CONVERSION FACTOR IS RETRIEVED FROM
                           THE PRICE FILE.
                               THESE CONVERSION FACTORS ENTER
                           THE PRICE FILE WHEN AN UPDATE IS
                           MADE. THEREFORE, OVER AN EXTENDED
                           PERIOD OF TIME, PRICES WILL
                           COLLECT WITH DIFFERING FACTORS.
                               AT USER REQUEST IT WILL BE
                           NECESSARY TO REVALUE THESE FACTORS.
                           THIS IS A COMPLEX TASK AND IS
                           HANDLED AUTOMICALLY WITHIN COMPARE.
                           (SEE NOTES ON PROGRAM T618P036 IN
                           PROCEDURE COMPR310).
                               0HE RULES FOR SCHEDULING ARE
                           QUITE STRAIGHTFORWARD, HOWEVER
                               1) WHEN MONSANTO PARITIES
                                  CHANGE REVALUE COMPARE.PROGLIB
                               2) ONLY RUN PRICE REVALUATION JOBS
                                  WHEN THE USER REQUESTS THEM.
                        C) BUDGET PRICE FILES ARE COPIED
                           ACROSS FROM FORECAST PRICES ONCE
                           PER YEAR. THE BUDGET FILES TAKE
                           THE PARITIES FROM THE
                           FORECAST FILES AND REVALUATION TO
                           BUDGETS WILL REMAIN THE RESPONSIBILITY
                           OF THE SYSTEMS GROUP.
                               THIS IS DUE TI THE VARYING NATURE
                           OF AXCEPTIONS WHICH MAY BE NECESSARY
                           AT BUDGET TIME.
NEWPAGEFL
                                                            ********************
                                                            *     COMPARE      *
                                                            *      FILE        *
                                                            *      LIST        *
                                                            ********************
CMF.BACKUP(0)            CMF SEQ BACKUP GDG
COMPARE.CMPRTOBY         BRIDGE FILE FOR SALES INPUT TO TOBY.
                         CREATED ANNUALLY (EG AUGUST/SEPTEMBER).
CMF.TABLES               NEW I/S CMF
COMPARE.CONTRLIB         UTILITY CONTROL STATEMENTS.
COMPARE.T618F000         SYSTEM'S CYCLE CONTROL DATE.
                         USED TO CONTROL START MONTH IN
                         THE FORECAST REPORTS.
COMPARE.T618F001         THE CONTROL DATE FOR THE START
                         OF CURRENT YEAR BUDGET CYCLE
COMPARE.T618F002         NEXT YEARS BUDGET CYCLE START DATE
COMPARE.T618F007         CMF TABLE IDENTITIES FOR BUDGIE EXIT
                         ALLOWS DIFFERENT TABLE ID'S FOR COMPARE &
                         IMPAIR.
COMPARE.T618F009         PRODUCTS CODES AND NAMES IN A
                         CONDENSED FORM. ONLY THOSE
                         PRODUCT GROUPS WHICH INTEREST
                         MAPC.
COMPARE.T618F040(0)      VOLUME FORECAST FILE
COMPARE.T618F180(0)      OLD DEDUCTION MASTER
COMPARE.T618F283(0)      APPROVED PRICES.
COMPARE.T618F284(0)      FORECASTED PRICES.
COMPARE.T618F28(0)       COMMODITY PRODUCTS ALL PRICES.
COMPARE.T618F500         CONTAINS ALL SALES TRANSACTIONS
                         COLLECTED AND VALIDATED BY THE
                         SUE SYSTEM DURING THE PRESENT
                         ACCOUNTING MONTH BUT WITHOUT
                         SOUTH-AFRICA AND ROW SALES
COMPARE.T618F510         CONTAINS ALL SALES TRANSACTIONS
                         VALIDATED AS CORRECT OF SOUTH-
                         AFRICA & ROW ACTUAL SALES
COMPARE.T618F520(0)      CONTAINS ALL THE ACTUAL SALES
                         TRANSACTIONS ENTERED INTO THE
                         COMPARE SYSTEM, IT IS THE
                         SYSTEM MASTER FILE KEPT ON A
                         TAPE REEL  (GDG WITH 5 GENERAT.
                         IONS, TAPES 1649,1650,1651,
                         1652,1653
COMPARE.T618F521         CONTAINS THE NEW VERSION OF
                         THE ACTUAL SALES HISTORY FILE.
                         THIS FILE  IS     COPIED AND
                         DELETED ONTO A NEW GENERATION
                         OF THE ASHF IF THE MAIN UPDATE
                         PERFORMED BY PROGRAM T618P050
                         IS SUCCESSFUL
COMPARE.T618F522(0)      PARROTISED WHOLE HISTORY
                         ACTUALS FILE CONTAINING ALL
                         INPUT INFORMATION  + NAMES
               THIS FILE IS KEPT ON A TAPE REEL
               (GDG WITH 1 GENERATION 1715 )
COMPARE.T618F530(0)      CONTAINS THE ACTUAL DATE OF
                         THE LAST MASTER FILE UPDATE
                         (GDG OF 99 GENERATIONS ON DISK)
COMPARE.T618F531         CONTAINS THE NEW VERSION OF
                         THE LAST UPDATE DATE FILE.
                         THIS FILE IS COPIED AND
                         DELETED ONTO A NEW GENERATION
                         OF THE LUDF IF THE MAIN UPDATE
                         PERFORMED BY PROGRAM T618P050
                         IS SUCCESSFUL
COMPARE.T618F540         CONTAINS ALL THE TRANSACTIONS
                         ASSOCIATED TO SALES OF THE WHOLE
                         PREVIOUS YEAR
COMPARE.T618F542         PARROTISED WHOLE LAST YEAR'S
                         ACTUALS FILE CONTAINING ALL
                         INPUT INFORMATION  + NAMES
               THIS FILE IS KEPT ON A TAPE REEL
               (GDG WITH 1 GENERATION 1729 )
COMPARE.T618F550         CONTAINS ALL THE TRANSACTIONS
                         ASSOCIATED TO SALES RECORDED
                         DURING THE PREVIOUS YEAR BUT
                         AS YEAR TO DATE, IT COVERS THE
                         SAME THE SAME TIME FRAME AS
                         THE Y-T-D ACTUAL SALES FILE,
                         BUT FOR THE PREVIOUS YEAR
COMPARE.T618F552         PARROTISED LAST YEAR'S AS YTD
               THIS FILE IS KEPT ON A TAPE REEL
               (GDG WITH 1 GENERATION 1730 )
COMPARE.T618F560         CONTAINS ALL THE TRANSACTIONS
                         ASSOCIATED TO SALES RECORDED
                         DURING THE CURRENT YEAR
COMPARE.T618F562         PARROTISED CURRENT YEAR'S AS YTD
               THIS FILE IS KEPT ON A TAPE REEL
               (GDG WITH 1 GENERATION 1731 )
COMPARE.T618F564         PARROTISED CURRENT YEAR'S AS YTD
                         PREVIOUS VERSION
COMPARE.T618F703         PARROTISED TOTAL YR BUDGET FILE (NEXT YEAR)
COMPARE.T618F704         PARROTISED ALL YTD BUDGET FILE
                         CONTAINING ALL INPUT INFORMATION
                          + NAMES
                         PREVIOUS VERSION
                          THIS FILE IS KEPT ON A TAPE REEL
COMPARE.T618F720         UNPARROTISED THIS YEARS BUDGET
COMPARE.T618F722         PARROTIZED TOTAL YEAR BUDGET
                         FILE CONTAINING ALL INPUT INFO + NAMES
COMPARE.T618F724         PARROTISED ALL YTD BUDGET FILE
                         CONTAINING ALL INPUT INFORMATION
                          + NAMES
COMPARE.T618F730         UNPARROTISED NEXT YEARS BUDGET
COMPARE.T618F740(+1)     BUDGET VOLUME MASTER (THIS YEAR)
COMPARE.T618F745(+1)     BUDGET VOLUME MASTER (NEXT YEAR)
COMPARE.T618F783(+1)     APPROVED PRICES        (THIS YEARS BUDGET)
COMPARE.T618F784(+1)     FORECASTED PRICES      (THIS YEARS BUDGET)
COMPARE.T618F785(+1)     COMMODITY PRICES       (THIS YEARS BUDGET)
COMPARE.T618F793(+1)     APPROVED PRICES        (NEXT YEARS BUDGET)
COMPARE.T618F794(+1)     FORECASTED PRICES      (NEXT YEARS BUDGET)
COMPARE.T618F795(+1)     COMMODITY PRICES       (NEXT YEARS BUDGET)
COMPARE.T618F800         PARROTISED CONTINUING FORECASTS
                         FILE CONTAINING ALL INPUT
                         INFORMATION + NAMES
                         PREVIOUS VERSION
                          THIS FILE IS KEPT ON A TAPE REEL
COMPARE.T618F801         PARROTISED CONTINUING FORECASTS
                         FILE CONTAINING ALL INPUT
                         INFORMATION + NAMES
COMPARE.T618F806         PARROTISED BALANCE OF YEAR
                         FORECASTS FILE CONTAINING ALL
                         INPUT INFORMATION + NAMES
                         PREVIOUS VERSION
COMPARE.T618F820         VOLUMES, VALUES IN COMMON UNITS
COMPARE.T618F824         PARROTISED ALL FORECASTS FILE
                         CONTAINING ALL INPUT INFORMATION
                          + NAMES
COMPARE.T618F826         PARROTISED BALANCE OF YEAR
                         FORECASTS FILE CONTAINING ALL
                         INPUT INFORMATION + NAMES
MAGNET.CONTRLIB          SCRATCH CONTROL CARDS
SUE.MIC010(0)            CONTAINS ALL SALES TRANSACTIONS
                         COLLECTED AND VALIDATED BY THE
                         SUE SYSTEM DURING THE PRESENT
                         ACCOUNTING MONTH
SUE.T523F010             PRODUCT INDEX. CONTAINS DETAIL
                         INFORMATION ON ALL MONSANTO
                         EUROPE PRODUCT CODES & NAMES.
TOBY.CONTRLIB            SORT SEQUENCE PARAMETERS
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *      JOB         *
                                                            *      FLOW        *
                                                            ********************
                   INTRODUCTION
                   ============
                   THIS SECTION SHOWS YOU THE RELATIONSHIPS
                   BETWEEN COMPARE JOBS. THE FOLLOWING DIAGRAM
                   FOLLOWS THE FLOW OF THE PHASE FLOWCHART,
                   BREAKING EACH PHASE OUT INTO ITS RELEVANT JOBS.
                        TO SAVE SPACE, JOBS ARE REFERRED TO
                   BY THEIR SUFFIX ONLY, E.G.
                        JOB COMPR750 IS SHOWN AS  '750'
NEWPAGE00
                    ********************                    *****************@@4
                    *     PHASE 1      *                    *     COMPARE      *
                    *   INITIALISATION *                    *       JOB        *
                    ********************                    *      FLOW        *
                    *100 SET.FC.CTL.DTE*                    ********************
                    *110 CREATE OLD FC.*
                    *120 CREATE CND.PRD*
                    *130 UPDATE CMF    *
                    *135 PRINT CMF     *
                    *140 SET.BUD.CTL.DT*
                    ********************
                             |
                             |
                             |     ********************
                             |     *    PHASE 3       *
                             |     * UPDTE FCST DEDNS *
                             |     ********************
                             |     *300 UPD.FCST.DEDNS*
                             |     ********************
                             |               |
                             |               |
                             |               V
********************         |     ********************     ********************
*     PHASE 2      *         |     *    PHASE 3       *     *     PHASE 3      *
*  UPD. FCST. VOLS.*         |     * UPD.FCST.PRICES  *     *  PRICE PLANNING  *
********************         |     ********************<===>********************
*200 UPD.FCST.VOLS *         |     *310 UPD.FCST.PR.1 *     *  THIS SEGMENT    *
********************         |     *311 UPD.FCST.PR.2 *     *    NOT YET       *
          |                  |     *312 UPD.FCST.PR.3 *     *  ESTABLISHED     *
          |                  |     *320 REVAL.FC.PR.1 *     ********************
          |                  |     *321 REVAL.FC.PR.2 *
          |                  |     *322 REVAL.FC.PR.3 *
          |                  |     *350 PRNT.ALL FC.PR.*
          |                  |     *********************
          |                  |               |
          |                  |               |
          |----------------->|<--------------|
                             |
                             |
                             V
                    ********************
                    *     PHASE 4      *
                    * BLD.FCST.REP.FILE*
                    ********************
                    *450 PRICE FCSTS.  *
                    *455 BLD.FC.REP.FLE*
                    ********************
                             |
                             |
                             V
                           -----
                           |   |
                           | A |
                           |   |
                           -----
NEWPAGE00
                           -----
                           |   |
                           | A |
                           |   |
                           -----
                             |
                             |
                             |
                             |
                             |
********************         |     ********************
*    PHASE 6       *         |<----*      PHASE 5     *
* BRIDGE BUDGETS   *         |     *  CAPTURE ACTUALS *
********************         |     ********************
*610 BRDG.VOL-BUDG.*         |     *500 BRDG.SUE-COMPR*
*620 BRDG.PR1-BUDG.*         |     *510 VET MANUAL IPT*
*621 BRDG.PR2-BUDG.*         |     *520 UPD.ACT.MASTER*
*622 BRDG.PR3-BUDG.*         |     *530 BLD.ACTL.REPS.*
*650 BRD.VL.NXYR.BU*         |     *540 BLD.OTHER REPS*
*651 BRD.P1.NXYR.BU*         |     ********************
*652 BRD.P2.NXYR.BU*         |
*653 BRD.P3.NXYR.BU*         |
*660 NXYR VL THISYR*         |
*661 NXYR P1 THISYR*         |
*662 NXYR P2 THISYR*         |
*663 NXYR P3 THISYR*         |
********************         |
          |                  |
          |                  |
          V                  |
********************         |
*     PHASE 7      *         |
*  HANDLE BUDGETS  *-------->|
********************         |
*700 UPD.BUDG.VOL  *         |
*705 CREATE OLD BUD*         |
*710 UPD.BUD.PRCE.1*         |
*711 UPD.BUD.PRCE.2*         |
*712 UPD.BUD.PRCE.3*         |
*750 PRICE BUDGETS *         |
*755 BLD.BUDG.REP. *         |
*760 PRT BUD PRICES*         |
*770 UPD NXYR BUDVL*         |
*775 UPD NXYR BUDP1*         |
*776 UPD NXYR BUDP2*         |
*777 UPD NXYR BUDP3*         |
*780 PRICE NXYR BUD*         |
*785 BLD NXYR BUDRP*         |
*790 PRT NXYR BD PR*         |
*795 BRIDGE TO TOBY*         |
********************         |
                             |
                             |
                             |
                             V
                    ********************
                    *     PHASE 8      *
                    *  PRINT REPORTS   *
                    ********************
                    *800 PRINT GENERATE*
                    ********************
                    *850 REPORT R050   *
                    *852 REPORT R052   *
                    *854 REPORT R054   *
                    *860 REPORT R060   *
                    *862 REPORT R062   *
                    *864 REPORT R064   *
                    *866 REPORT R066   *
                    *868 REPORT R068   *
                    *870 THISYR BUDGETS*
                    *875 NEXTYR BUDGETS*
                    ********************
NEWPAGE00
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****          PPPPPP  RRRRRR  OOOOOOO  CCCCCC  SSSSS                      *****
*****          P     P R     R O     O C       S     S                     *****
*****          P     P R     R O     O C       S                           *****
*****          PPPPPP  RRRRRR  O     O C        SSSSS                      *****
*****          P       R   R   O     O C             S                     *****
*****          P       R    R  O     O C       S     S ..                  *****
*****          P       R     R OOOOOOO  CCCCCC  SSSSS  ..                  *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR100 *
                                                             *     INTRO       *
                                                             *******************










                    SYSTEM CYCLE INITIALISATION
                    ---------------------------





          PURPOSE
          -------


                    THIS PROC ESTABLISHES A FILE WHICH CONTAINS
                    THE DATE FOR THE START OF THE COMING
                    FORECAST QUARTERLY CYCLE. THE DATE IS IN
                    THE FORM 'YYMM' (CARD COLUMNS 1 - 4) AND
                    IT CONTROLS
                         A) DATA INCLUDED IN FORECAST REPORTS
                         B) PRINT HEADINGS ON PARROT REPORTS







          EXAMPLE
          -------


                    IF THE DATE IS THE BEGINNING OF MARCH 77,
                    THE USER WILL BE ABOUT TO UPDATE MIS
                    FILES WITH FORECASTS FOR THE 18 MONTH
                    PERIOD BEGINNING WITH APRIL 77.
                         HE MUST, THEREFORE, ESTABLISH THE
                    SYSTEM CONTROL DATE AS '7704'.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR100 *
                                                             *     FLOW        *
                                                             *******************
                                  /------------
                                 /            |
                                | DATE CARD   |
                                |             |
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------       ---------------
                                |             |      (  COMPARE.    (
STEP01                          |    UT432    |---->(   T618F000   (
                                |             |      (              (
                                ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
                                       V
            ---------------     ---------------
           ( COMPARE.     (     |             |
STEP02    (  CONTRLIB    ( ---->|  VAMPIRE    |
           ( (R000VAMP)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |             |
                                |  R000       |
                                |        ------
                                --------/

NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR100 *
                                                             *      JCL        *
                                                             *******************

./ ADD NAME=COMPR100,LIST=ALL
//COMPR100  PROC FILE='000',DATA='100'
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01 EXEC PGM=UT432
//******************************************************************************
//*STEP01              UT432          COPIES USER'S DATE FROM INPUT CARD DIR-
//*                                ECTLY TO A DISK FILE FOR CONVENIENCE.
//*                                THIS FILE, THEREFORE, ONLY EVER CONTAINS
//*                                ONE LOGICAL RECORD.
//******************************************************************************
//SYSPRINT DD SYSOUT=A
//SYSUT1  DD DSN=COMPARE.T618D&DATA.,DISP=SHR
//SYSUT2   DD  DSN=COMPARE.T618F&FILE.,DISP=(OLD,KEEP,DELETE),
//       SPACE=(TRK,(1,1),RLSE),
//       VOL=REF=COMPARE.POINTER1,LABEL=EXPDT=11111,
//      DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//STEP02       EXEC  PGM=VAMPIRE,PARM='  '
//******************************************************************************
//*STEP02              VAMPIRE        PRINTS THE CONTROL DATE FOR USERS INFO.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//PRINTOUT     DD  SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA DD  DSN=COMPARE.T618F&FILE.,DISP=SHR
//SYSIN        DD  DSN=COMPARE.CONTRLIB(R000VAMP),DISP=SHR
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR110 *
                                                             *     INTRO       *
                                                             *******************



                    CREATE 'OLD' DATA REPORT FILE
                    ---------------------------------





          PURPOSE
          -------


                    THE PURPOSE OF THIS PROC IS TO CREATE A
                    FILE, OF  IDENTICAL FORMAT TO ALL THE
                    SYSTEM'S REPORT FILES, WHICH CONTAINS
                    THE PREVIOUS CYCLE'S DATA.
                         THIS WILL BE USED IN DATA CHANGE
                    REPORTS AFTER THE FILE UPDATES HAVE
                    CREATED THE 'NEW' DATA.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR110 *
                                                             *     FLOW        *
                                                             *******************

                                ---------------
                               (  COMPARE.    (
                              (   T618F801   (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |             |
STEP01                          |    B1801    |
                                |             |
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (  COMPARE.    (
                              (   T618F800   (
                               (              (
                                ---------------
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR110 *
                                                             *      JCL        *
                                                             *******************

./ ADD NAME=COMPR110,LIST=ALL
//COMPR110 PROC INFILE='801',OUTFILE='800'
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=B1801,REGION=0120K
//******************************************************************************
//*STEP01             B1801           COPIES FILE AND INSERTS '1'
//*                                IN BYTE 500 TO SIGNIFY THAT
//*                                THE FILE IS 'OLD'.
//******************************************************************************
//SYSPRINT     DD  SYSOUT=A,DCB=BLKSIZE=133
//SYSUT1   DD   DSN=COMPARE.T618F&INFILE.,DISP=SHR
//SYSUT2   DD   DSN=COMPARE.T618F&OUTFILE.,DISP=(OLD,KEEP,DELETE),
//             SPACE=(TRK,(90,3),RLSE),VOL=REF=COMPARE.POINTER1,
//             LABEL=EXPDT=11111,
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SYSIN    DD    DSN=COMPARE.CONTRLIB(BYTE500),DISP=SHR
//*
//******************************************************************************
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR120 *
                                                             *     INTRO       *
                                                             *******************



                    CREATE & CHECK CONDENSED PRODUCT INDEX
                    --------------------------------------





          PURPOSE
          -------


                    COMPARE USES STANDARD FP CODES. THESE ARE
                    REQUIRED AT SEVERAL POINTS IN THE SYSTEM.
                    FOR CONVENIENCE'S SAKE, A FILE IS CREATED
                    WHICH CONTAINS ONLY THE RECORDS REQUIRED
                    FOR MAPC. THE DATA IS ALSO REFORMATTED TO
                    CONTAIN ONLY THE ESSENTIALS.


                         THE FP NAMES, HOWEVER, ARE NOT
                    SUITABLE FOR MAPC PURPOSES. COMPARE THEREFORE,
                    KEEPS A TABLE OF NAMES & GROUPS FOR MAPC FP
                    CODES ON THE CMF. THIS TABLE IS MANUALLY
                    UPDATED BY THE COMPARE USER. ONE OF THE
                    FUNCTIONS OF THIS PROC IS TO CHECK THE
                    CONDENSED PRODUCT INDEX (DERIVED FROM SUE)
                    AGAINST THE CMF TO SHOW IF UPDATES ARE
                    REQUIRED FOR THE TABLE.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR120 *
                                                             *     FLOW        *
                                                             *******************
                                  /------------
                                 /            |
                                |    PARM     |
                                |             |
                                ---------------
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  SUE.        (     |  T618P009   |      (  COMPARE.    (
STEP01    (   T523F010   ( ---->| CREATE COND.|---->(   T618F009   (
           (              (     | PROD. INDEX |      (              (
            ---------------     ---------------       ---------------
                                       |                     |
                                       |<--------------------|
                                       |                     |
                                       V                     |
            ---------------     ---------------              |
           (  COMPARE.    (     |             |              |
STEP02    (   CONTRLIB   ( ---->|   VAMPIRE   |              |
           ( (PRNTPROD)   (     |             |              |
            ---------------     ---------------              |
                                       |                     |
            ---------------            |                     |
            |             |            |                     |
            | R020        |<-----------|                     |
            |        ------            |                     |
            --------/                  |                     |
                                       |                     |
              /------------            |                     |
             /            |            |                     |
            |    PARM     |            |                     |
            |             |            |                     |
            ---------------            |                     |
                   |                   |                     |
                   |------------------>|<--------------------|
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  CMF.        (     |  T618P010   |      (              (
STEP03    (   TABLES     ( ---->| CHECK INDEX |---->(   FAILURES   (
           (              (     | AGAINST CMF |      (              (
            ---------------     ---------------       ---------------
                                       |                     |
                                       |<--------------------|
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |             |       |             |
STEP04    (   CONTRLIB   ( ---->|   VAMPIRE   | ----->|  R025       |
           (  (R025VAMP)  (     |             |       |        ------
            ---------------     ---------------       --------/
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR120 *
                                                             *      JCL        *
                                                             *******************

./ ADD NAME=COMPR120,LIST=ALL
//COMPR120    PROC
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01      EXEC PGM=T618P009,PARM='MAPC,31,32,33,34,35'
//******************************************************************************
//*STEP01              T618P009       READS WHOLE PRODUCT INDEX. SELECTS THE
//*                                PRODUCT GROUPS INDICATED IN THE PARM
//*                                VALUE. REFORMATS AND OUTPUTS BASIC CODES
//*                                AND NAMES.
//******************************************************************************
//STEPLIB  DD DSN=COMPARE.PROGLIB,DISP=SHR
//PRODINDX DD DSN=SUE.T523F010,DISP=SHR,
//            DCB=(LRECL=156,BLKSIZE=780)
//CONDINDX DD DSN=COMPARE.T618F009,DISP=(OLD,KEEP),
//      SPACE=(TRK,(1,1),RLSE),
//       VOL=REF=COMPARE.POINTER1,
//      LABEL=EXPDT=11111,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//*
//*
//STEP02      EXEC PGM=VAMPIRE,PARM='  '
//******************************************************************************
//*STEP02              VAMPIRE        PRINTS WHOLE REFORMATTED FILE.
//******************************************************************************
//STEPLIB  DD DSN=COMPARE.PROGLIB,DISP=SHR
//PRINTOUT DD SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA DD DSN=COMPARE.T618F009,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(PRNTPROD),DISP=SHR
//*
//*
//STEP03      EXEC PGM=T618P010,PARM='282'
//******************************************************************************
//*STEP03              T618P010       CHECKS ALL CONDENSED FILE PRODUCT CODES
//*                                AGAINST CMF TABLE (ACTUAL TABLE NUMBER
//*                                IS TAKEN FROM PARM STATEMENT). IF NO
//*                                MATCH ON CMF, RECORD IS WRITTEN TO A
//*                                WORK FILE.
//******************************************************************************
//STEPLIB  DD DSN=COMPARE.PROGLIB,DISP=SHR
//PRODFILE DD DSN=COMPARE.T618F009,DISP=SHR
//T618CMF  DD DSN=CMF.TABLES,DISP=SHR
//FAILURES DD DSN=&&STEP03A,DISP=(,PASS),UNIT=SYSDA,
//            SPACE=(CYL,(1,1),RLSE),
//            DCB=(LRECL=80,BLKSIZE=1680,RECFM=FB)
//*
//*
//STEP04      EXEC PGM=VAMPIRE,PARM='  '
//******************************************************************************
//*STEP04              VAMPIRE        PRINTS THE WORK FILE OF UNMATCHED RECS.
//******************************************************************************
//STEPLIB  DD DSN=COMPARE.PROGLIB,DISP=SHR
//PRINTOUT DD SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA DD DSN=&&STEP03A,DISP=(OLD,DELETE)
//SYSIN  DD DSN=COMPARE.CONTRLIB(R025VAMP),DISP=SHR
//*
//*
//******************************************************************************
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR130 *
                                                             *     INTRO       *
                                                             *******************



         PURPOSE
         -------
                    THE PURPOSE OF THIS PROC IS TO UPDATE THE
                    COMPARE SYSTEM'S TABLES. THESE ARE KEPT
                    ON A CMF FORMAT FILE WHICH IS ALSO USED
                    FOR THE MAGNET SYSTEM.
                         IT IS POSSIBLE THAT THIS CMF FILE
                    WILL BE USED FOR MORE SYSTEMS AND WILL
                    CONSEQUENTLY BE UPDATED BY DIFFERENT
                    USERS INDEPENDENTLY. THIS WILL REQUIRE
                    REVISION OF THE SECURITY PROCEDURES FOR
                    THE FILE.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR130 *
                                                             *     FLOW        *
                                                             *******************
                                  /------------
                                 /    CMF     |
                                |   UPDATES   |
                                |             |
                                ---------------
                                       |
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  TOBY.       (     |  IERRCO00   |      (              (
STEP01    (   CONTRLIB   ( ---->|             |---->(     WORK     (
           (  (SRTT001)   (     |    SORT     |      (              (
            ---------------     ---------------       ---------------
                                       |                     |
                                       |<---------------------
            CMF.BACKUP                 V
            ---------------     ---------------       ---------------
           (     (0)      (---->|  T655P001   |      (              (
STEP02    (---------     (      |   UPDATE    |<===>(     WORK     (
       ----(     (+1)     (<----|     CMF     |      (              (
       |    ---------------     ---------------       ---------------
       |                               |
       |                               |              ---------------
       |                               |              | VALIDATION  |
       |                               |------------->| REPORT      |
       |                               |              |        ------
       |                               |              --------/
       |                               V
       |    ---------------     ---------------
       |   (  MAGNET.     (     |    UT434    |
STEP03 |  (   CONTRLIB   ( ---->|  SCRATCH    |
       |   (  (SCRT001)   (     |             |
       |    ---------------     ---------------
       |                               |
       |                               V
       |                        ---------------       ---------------
       |                        |   LYNETTE   |      (              (
STEP04 |----------------------->| CREATE IS   |---->(   CMF.TABLES ( -------
                                |    CMF      |      (              (      |
                                ---------------       ---------------      |
                                       |                                   |
                                       |                                   |
                                       |                                   |
                                       |                                   |
                                       V                                   V
                                     -----                               -----
                                     |   |                               |   |
                                     | A |                               | B |
                                     |   |                               |   |
                                     -----                               -----
NEWPAGE00
                                     -----                               -----
                                     |   |                               |   |
                                     | A |                               | B |
                                     |   |                               |   |
                                     -----                               -----
                                       |                                   |
                                       V                                   |
            ---------------     ---------------                            |
           (              (     |  T655P002   |                            |
STEP05    (    WORK      ( <===>|    PRINT    |<---------------------------|
           (              (     |     CMF     |
            ---------------     ---------------
                                       |
                                      /
                                     /
                                    /
                                   /
            ---------------       /
            | CMF         |<-----/
            | LISTING     |
            |        ------
            --------/
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR130 *
                                                             *      JCL        *
                                                             *******************

./ ADD NAME=COMPR130,LIST=ALL
//COMPR130    PROC MAST='CMF.TABLES',BACK='CMF.BACKUP',
//             SCR='MAGNET.CONTRLIB(SCRT001)',
//             DATA='130',LISTCTL='0',
//             POINT='CMF.POINTER1'
//*
//*    CMF  UPDATE
//*
//******************************************************************************
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//* J O B  -  C O M P R 1 3 0 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP00           NONE                          STEP00                   *****
//*STEP01           NONE                          STEP01                   *****
//*STEP02           IF CMF.BACKUP(+1) HAS         STEP01                   *****
//*                 BEEN CATALOGUED, RESET.                                *****
//*STEP03           NONE                          STEP03                   *****
//*STEP04           NONE                          STEP03                   *****
//*STEP05           NONE                          STEP05                   *****
//******************************************************************************
//******************************************************************************
//STEP00   EXEC PGM=UTLCODE,PARM='&LISTCTL.'
//******************************************************************************
//*STEP00              UTLCODE        IF CONDITION CODE = 1 ONLY THE PRINT
//*                                   STEP WILL BE EXECUTED
//******************************************************************************
//STEP01   EXEC PGM=IERRCO00,COND=(1,EQ,STEP00),REGION=0130K
//******************************************************************************
//*STEP01              IERRCO00       SORTS UPDATES TO CMF TABLE ORDER
//******************************************************************************
//SORTLIB      DD  DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT       DD  SYSOUT=A
//SYSUDUMP     DD  SYSOUT=L
//SORTWK01     DD  UNIT=SYSDA,SPACE=(TRK,3)
//SORTWK02     DD  UNIT=SYSDA,SPACE=(TRK,3)
//SORTWK03     DD  UNIT=SYSDA,SPACE=(TRK,3)
//SORTIN  DD DSN=COMPARE.T618D&DATA.,DISP=SHR
//SORTOUT      DD  DSN=&&STEP01A,DISP=(,PASS),SPACE=(TRK,(5,5),RLSE),
//             DCB=(LRECL=80,RECFM=FB,BLKSIZE=960),UNIT=SYSDA
//SYSIN        DD  DSN=TOBY.CONTRLIB(SRTT001),DISP=SHR
//*
//*
//STEP02   EXEC PGM=T665P001,PARM='AT',COND=(1,EQ,STEP00),
//           REGION=0100K
//******************************************************************************
//*STEP02              T655P001       READS CMF UPDATES. VALIDATES THEM
//*                                ACCORDING TO RULES IN HEADER RECORDS FOR
//*                                EACH TABLE.
//******************************************************************************
//STEPLIB      DD  DSN=TOBY.PROGLIB,DISP=SHR
//SYSPRINT DD   SYSOUT=A,DCB=BLKSIZE=133
//LM09     DD   DSN=BXLTAB.T599F010,DISP=SHR,DCB=DSORG=IS
//TOBYCMF  DD   DSN=TOBY.CMFTABS,DISP=SHR,DCB=DSORG=IS
//SYSUDUMP     DD  SYSOUT=L
//SYSOUT       DD  SYSOUT=A,DCB=(LRECL=120,RECFM=FB,BLKSIZE=120)
//T610F2       DD  DSN=&BACK.(0),DISP=OLD
//T610F3       DD  SYSOUT=A,DCB=BLKSIZE=133
//T610F4       DD  DSN=&&STEP01A,DISP=(OLD,DELETE)
//T610F5       DD  DCB=(LRECL=76,RECFM=FB,BLKSIZE=380),
//             SPACE=(TRK,(38,38),RLSE),UNIT=SYSDA
//T610F6       DD  DSN=&BACK.(+1),DISP=(,CATLG,DELETE),
//             DCB=(DSCB,LRECL=76,RECFM=FB,BLKSIZE=760),
//             SPACE=(TRK,(38,38),RLSE),VOL=REF=&POINT,
//             LABEL=EXPDT=11111
//*
//*
//STEP03   EXEC PGM=UT434,COND=(1,EQ,STEP00),REGION=0080K
//******************************************************************************
//*STEP03              UT434       PRECAUTIONARY SCRATCH OF CMF
//******************************************************************************
//SYSPRINT     DD  SYSOUT=A
//SYSOUT       DD  SYSOUT=A
//DD1          DD  VOL=REF=&POINT,DISP=SHR
//SYSIN        DD  DISP=SHR,DSN=&SCR
//*
//*
//STEP04   EXEC PGM=LYNETTE,COND=(1,EQ,STEP00)
//******************************************************************************
//*STEP04              LYNETTE        CREATE IS VERSION OF CMF FROM UPDATED
//*                                SEQUENTIAL FILE.
//******************************************************************************
//SYSPRINT     DD  SYSOUT=A
//SYSOUT       DD  SYSOUT=A
//SYSUT1       DD  DSN=*.STEP02.T610F6,DISP=SHR
//SYSUT2       DD  DSN=&MAST,DISP=(,CATLG,DELETE),
//             DCB=(DSORG=IS,OPTCD=ILR,RKP=2,KEYLEN=15,RECFM=FB,
//             LRECL=76,BLKSIZE=760),VOL=REF=&POINT,
//             SPACE=(CYL,(5,5,1),RLSE,CONTIG),LABEL=EXPDT=11111
//SYSIN        DD  DUMMY,DCB=BLKSIZE=80
//*
//*            CMF PRINT
//*
//STEP05   EXEC PGM=T665P002,COND=(1,LT),REGION=0080K
//******************************************************************************
//*STEP05              T655P002       PRINTS THE CMF TABLES SELECTED BY THE
//*                                PARAMETERS IN //*STEP05. FORMATS THE
//*                                PRINTING OF EACH TABLE ACCORDING TO THE
//*                                RULES IN HEADER RECORDS FOR EACH TABLE.
//*                                     ALL THE CONTROL INFORMATION FOR
//*                                THE TABLES IS KEPT ON TABLE '   '.
//******************************************************************************
//STEPLIB   DD DSN=TOBY.PROGLIB,DISP=SHR
//SYSPRINT  DD SYSOUT=A
//SYSUDUMP  DD SYSOUT=A
//SYSOUT    DD SYSOUT=A
//T665F1   DD DSN=COMPARE.CONTRLIB(CMFPRINT),DISP=SHR
//T665F2    DD DSN=&MAST,DISP=SHR
//T665F3    DD DCB=(RECFM=FB,LRECL=76,BLKSIZE=760),
//             UNIT=SYSDA,SPACE=(TRK,(38,38),RLSE)
//T665F4    DD SYSOUT=A,DCB=BLKSIZE=133
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR200 *
                                                             *     INTRO       *
                                                             *******************
          PURPOSE
          -------
                    THE PURPOSE OF THIS PROC IS TO VALIDATE AND
                    EFFECT UPDATES TO THE VOLUME FORECAST MASTER
                    FILE.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR200 *
                                                             *     FLOW        *
                                                             *******************
                                  /------------
                                 /            |
                                |   UPDATES   |
                                |             |
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |  IERRCO00   |      (  SORTED      (
          (   CONTRLIB   ( ---->|    SORT     |---->(   UPDATES    (
           (  (SORTFCAST) (     |             |      (              (
            ---------------     ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
            ---------------            |              ---------------
           (  COMPARE.    (            |             (  COMPARE.    (
          (   CONTRLIB   ( ----------->|<-----------(   T618F009   (
           (  (FCBUDGIE)  (            |             (              (
            ---------------            |              ---------------
                                       |
                                       V
            ---------------     ---------------       ---------------
           (              (     |   BUDGIE3   |      (   VALID      (
          (  CMF.TABLES  (----->| & COBOL EXIT|---->(   UPDATES    (
           (              (     |  T618P007   |      (              (
            ---------------     ---------------       ---------------
                                      /|                     |
                                     / |                     |
                                    /  |<--------------------|
            ---------------        /   |
            |             |       /    |
            | R100        |<------     |
            |        ------            |
            --------/                  V
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
NEWPAGE00
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------       ---------------
                                |  T618P043   |      (              (
                                | SPLIT VOLS  |---->(     WORK     (
                                |  BY  PACK   |      (              (
                                ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |  AARDVARK   |      (              (
          (   CONTRLIB   ( ---->|             |---->(              (
           (  (FCREFRMT)  (     |  REFORMAT   |      (     WORK     (
            ---------------     ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |  IERRCO00   |      (  SORTED     (
          (   CONTRLIB   ( ---->|             |---->(    UPDATES   (
           (  (J100SRT2)  (     |    SORT     |      (              (
            ---------------     ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
                                       V            COMPARE.T618F040
            ---------------     ---------------       ---------------
            |             |     |  T618P045   |<---- (     (0)      (  <---
            |  R110       |<----|  UPDATE VOL |     (--------------(       |
            |        ------     |   MASTER    |----> (     (+1)     (  ----
            --------/           ---------------       ---------------
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR200 *
                                                             *      JCL        *
                                                             *******************

./ ADD NAME=COMPR200,LIST=ALL
//COMPR200 PROC FILE='040',BUDGIE='FC',DATA='200'
//******************************************************************************
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//* J O B  -  C O M P R 2 0 0 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           NONE                          STEP01                   *****
//*STEP02           NONE                          STEP01                   *****
//*STEP03           NONE                          STEP01                   *****
//*STEP04           NONE                          STEP01                   *****
//*STEP05           NONE                          STEP01                   *****
//*STEP06           IF COMPARE.T618F040(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED, THEN                              *****
//*                 RESET                                                  *****
//******************************************************************************
//* J O B  -  C O M P R 7 0 0 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           NONE                          STEP01                   *****
//*STEP02           NONE                          STEP01                   *****
//*STEP03           NONE                          STEP01                   *****
//*STEP04           NONE                          STEP01                   *****
//*STEP05           NONE                          STEP01                   *****
//*STEP06           IF COMPARE.T618F740(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED, THEN                              *****
//*                 RESET                                                  *****
//******************************************************************************
//******************************************************************************
//STEP01   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP01              IERRCO00       SORTS VOLUME FILE UPDATES INTO BUDGIE
//*                                INPUT ORDER.
//******************************************************************************
//SORTLIB   DD  DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT    DD  SYSOUT=A
//SORTWK01  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SYSIN DD DSN=COMPARE.CONTRLIB(SORTFCST),DISP=SHR
//SORTIN  DD DSN=COMPARE.T618D&DATA.,DISP=SHR
//SORTOUT   DD  DSN=&&STEP01A,DISP=(,PASS),SPACE=(CYL,(2,2),RLSE),
//        UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//*
//*
//STEP02   EXEC PGM=BUDGIE3,REGION=0190K
//******************************************************************************
//*STEP02              BUDGIE3        VALIDATES VOLUME FILE UPDATES. BUDGIE
//*                                DOES FIELD CLASS ETC. CHECKS AND USES A
//*                                COBOL EXIT (PROGRAM T618P007) FOR
//*                                CHECKING THAT PRODUCTS / CUSTOMERS ETC.
//*                                EXIST ON CERTAIN FILES.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSOUT      DD  SYSOUT=A
//SYSPRINT DD SYSOUT=A
//SYSUDUMP DD SYSOUT=A
//SYSUT1 DD DSN=&&STEP01A,DISP=(OLD,DELETE),
//           DCB=(LRECL=80,BLKSIZE=800)
//SYSUT2 DD DSN=&&STEP02A,UNIT=SYSDA,DISP=(,PASS),
//          DCB=(RECFM=FB,LRECL=80,BLKSIZE=800),
//          SPACE=(TRK,(1,1),RLSE)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//LOGIN DD DUMMY,DCB=BLKSIZE=80
//LOGOUT DD DUMMY,DCB=BLKSIZE=80
//SUSPOUT DD DUMMY,DCB=BLKSIZE=80
//WORK DD DSN=&&WORK,UNIT=SYSDA,
//        DCB=(RECFM=FB,LRECL=160,BLKSIZE=1600),
//        SPACE=(CYL,5)
//T618CMF DD DSN=CMF.TABLES,DISP=SHR
//T618PRD DD DSN=COMPARE.T618F009,DISP=SHR
//SYSIN DD DSN=COMPARE.CONTRLIB(&BUDGIE.BUDGIE),DISP=SHR
//EXITCTRL DD DSN=COMPARE.T618F007,DISP=SHR
//*
//*
//STEP03       EXEC  PGM=T618P043,COND=(00,NE,STEP02)
//******************************************************************************
//*STEP03              T618P043       APPORTIONS FORECAST VOLUMES BY % TO THE
//*                                LIST OF PACKAGE CODES PROVIDED ON AN
//*                                INPUT FORM.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//FCEXBUDG DD DSN=&&STEP02A,DISP=(OLD,DELETE)
//FCAPPORT DD DSN=&&STEP03A,DISP=(,PASS),SPACE=(TRK,(90,2),RLSE),
//           UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=800)
//*
//*
//STEP04       EXEC  PGM=AARDVARK,COND=(00,NE,STEP02)
//******************************************************************************
//*STEP04              AARDVARK       TAKES DIFFERENT RECORD TYPES ON INPUT
//*                                AND REFORMATS TO A COMMON LAYOUT. THIS
//*                                COULD NOT BE DONE BY BUDGIE AT TIME OF
//*                                SYSTEM'S CREATION.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA DD DSN=&&STEP03A,DISP=(OLD,DELETE),
//           DCB=(LRECL=80,BLKSIZE=800)
//LOGIC DD DSN=COMPARE.CONTRLIB(FCREFRMT),DISP=SHR
//OUTDATA DD DSN=&&STEP02A,DISP=(,PASS),SPACE=(TRK,(1,1),RLSE),
//           UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=800)
//*
//*
//STEP05   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP05              IERRCO00       SORTS ALL UPDATES INTO MASTER FILE SEQ-
//*                                UENCE.
//******************************************************************************
//SORTLIB   DD  DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT    DD  SYSOUT=A
//SORTWK01  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SYSIN DD DSN=COMPARE.CONTRLIB(J100SRT2),DISP=SHR
//SORTIN DD DSN=&&STEP02A,DISP=(OLD,DELETE)
//SORTOUT DD DSN=&&STEP05A,DISP=(,PASS),
//         SPACE=(TRK,(2,1),RLSE),
//         UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680)
//*
//*
//STEP06       EXEC  PGM=T618P045,COND=(00,NE,STEP02)
//******************************************************************************
//*STEP06              T618P045       UPDATES VOLUME MASTER FILE. PRINTS A
//*                                LIST OF ANY DELETIONS WHICH COULD FIND
//*                                NO MATCH ON THE OLD MASTER.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSOUT DD SYSOUT=A,DCB=(LRECL=120,BLKSIZE=120)
//SYSUDUMP DD SYSOUT=A
//T618D001 DD DSN=COMPARE.T618F&FILE.(0),DISP=SHR
//T618D002 DD DSN=COMPARE.T618F&FILE.(+1),DISP=(,CATLG,DELETE),
//             SPACE=(TRK,(19,2),RLSE),
//             VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111,
//      DCB=DSCB
//T618D003 DD DSN=&&STEP05A,DISP=(OLD,DELETE)
//T618R001 DD SYSOUT=A,DCB=BLKSIZE=133
//*
//******************************************************************************
NEWPAGEJH
                                                            ********************
                                                            *    COMPARE       *
                                                            *  JOB  - COMPR300 *
                                                            *     INTRO        *
                                                            ********************
          PURPOSE
          -------
                    THE PURPOSE OF THIS PROC IS TO VALIDATE AND
                    EFFECT UPDATES TO THE COMPARE DEDUCTION
                    FILE.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR300 *
                                                             *     FLOW        *
                                                             *******************
            ---------------       /------------       ---------------
           (  COMPARE.    (      /   DEDN.    |      (  COMPARE.    (
          (   CONTRLIB   (      |    FILE     |     (   T618F009   (
           (  (DFBUDGIE)  (     |  UPDATES    |      (              (
            ---------------     ---------------       ---------------
                   |                   |                     |
                   |                   |                     |
                   |------------------>|<--------------------|
                                       |
                                       V
            ---------------     ---------------       ---------------
           (              (     |             |      (              (
          (     WORK     ( <===>|   BUDGIE3   |<----(   CMF.TABLES (
           (              (     |             |      (              (
            ---------------     ---------------       ---------------
                                       |
                                       |
                   |-------------------|---------------------|
                   |                   |                     |
                   V                   |                     V
            ---------------            |              ---------------
            |             |            |             (              (
            |  R180       |            |            (    WORK      (
            |        ------            |             (              (
            --------/                  |              ---------------
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
                                       V
                                ---------------       ---------------
                                |  IERRCO00   |      (              (
                                |    SORT     |---->(     WORK     (
                                |             |      (              (
                                ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |                     |
                                       |                     |
                                       V                     V
                                     -----                 -----
                                     |   |                 |   |
                                     | A |                 | B |
                                     |   |                 |   |
                                     -----                 -----
NEWPAGE00
                                     -----                 -----
                                     |   |                 |   |
                                     | A |                 | B |
                                     |   |                 |   |
                                     -----                 -----
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
                                       V
                                ---------------       ---------------
                                |  T618P023   |      (              (
                                |  REFORMAT   |---->(     WORK     (
                                |   UPDATES   |      (              (
                                ---------------       ---------------
                                       |
                                       |
                                       |
                                       |
          COMPARE.T618F180             V
            ---------------     ---------------       ---------------
           (    (0)       (---->|   UT485     |       |  UPDATE     |
          (--------------(      |  UPDATE     |------>|  ACTION     |
           (    (+1)      (<----| DEDN FILE   |       |  LIST  ------
            ---------------     ---------------       --------/
                   |                   |
                   |                   |
                   |                   |
                   |                   |
                   |                   V
                   |            ---------------       ---------------
                   |            |  VAMPIRE    |      (  COMPARE.    (
                   |----------->|   PRINT     |<----(   CONTRLIB   (
                                | DEDN FILE   |      (  (R180VAMP)  (
                                ---------------       ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |             |
                                |  R180       |
                                |        ------
                                --------/
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR300  *
                                                             *      JCL        *
                                                             *******************

./ ADD NAME=COMPR300,LIST=ALL
//COMPR300  PROC DATA='300'
//*
//*
//******************************************************************************
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//* J O B  -  C O M P R 3 0 0 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           NONE                          STEP01                   *****
//*STEP02           NONE                          STEP01                   *****
//*STEP03           NONE                          STEP01                   *****
//*STEP04           IF COMPARE.T618F180 HAS       STEP01                   *****
//*                 BEEN CATALOGUED, THEN                                  *****
//*                 RESET                                                  *****
//*STEP05           OVERRIDE DDNAME INPTDATA      STEP05                   *****
//*                 WITH COMPARE.T618F180(0)                               *****
//******************************************************************************
//******************************************************************************
//STEP01   EXEC PGM=BUDGIE3,REGION=0190K
//******************************************************************************
//*STEP01              BUDGIE3        VALIDATES DEDUCTION FILE UPDATES. CALLS
//*                                USER COBOL EXIT P021MOD FOR CODE
//*                                VALIDATION.
//******************************************************************************
//STEPLIB DD DSN=COMPARE.PROGLIB,DISP=SHR
//SYSPRINT DD SYSOUT=A
//SYSUT1   DD DSN=COMPARE=T618D&DATA.,DISP=SHR
//SYSUT2 DD DSN=&&OUT,UNIT=SYSDA,DISP=(,PASS),
//          DCB=(RECFM=FB,LRECL=80,BLKSIZE=800),
//          SPACE=(TRK,(1,1),RLSE)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//LOGIN DD DUMMY,DCB=BLKSIZE=80
//LOGOUT DD DUMMY,DCB=BLKSIZE=80
//SUSPOUT DD DUMMY,DCB=BLKSIZE=80
//WORK DD DSN=&&WORK,UNIT=SYSDA,
//        DCB=(RECFM=FB,LRECL=160,BLKSIZE=1600),
//        SPACE=(CYL,5)
//SYSIN DD DSN=COMPARE.CONTRLIB(DFBUDGIE),DISP=SHR
//T618CMF DD DSN=CMF.TABLES,DISP=SHR
//T618PRD DD DSN=COMPARE.T618F009,DISP=SHR
//*
//*
//STEP02   EXEC PGM=IERRCO00,COND=(00,NE,STEP01),REGION=0130K
//******************************************************************************
//*STEP02              IERRCO00       SORTS UPDATES EX VALIDATION TO SEQUENCE
//*                                OF DEDUCTION MASTER.
//******************************************************************************
//SORTLIB   DD  DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT    DD  SYSOUT=A
//SORTWK01  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SYSIN DD DSN=COMPARE.CONTRLIB(SORTFCST),DISP=SHR
//SORTIN DD DSN=&&OUT,DISP=(OLD,DELETE)
//SORTOUT   DD  DSN=&&SRTDDEDS,DISP=(,PASS),SPACE=(CYL,(2,2),RLSE),
//      UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//*
//*
//STEP03 EXEC PGM=T618P023,PARM='MAPC',COND=(00,NE,STEP01)
//******************************************************************************
//*STEP03              T618P023       REFORMATS DEDUCTION          UPDATES.
//*                                CONVERTS DATES.
//******************************************************************************
//STEPLIB DD DSN=COMPARE.PROGLIB,DISP=SHR
//T618F100 DD DSN=&&SRTDDEDS,DISP=(OLD,DELETE)
//T618F110 DD DSN=&&RFMTDEDS,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//        UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP04 EXEC PGM=UT485,PARM=('KEYS=(1,42)'),
//******************************************************************************
//*STEP04              UT485          UPDATES DEDUCTION MASTER.
//******************************************************************************
//        COND=(00,NE,STEP01),REGION=0220K
//SORTLIB   DD  DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT    DD  SYSOUT=A
//SORTWK01  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTLIST DD SYSOUT=A
//SYSPRINT DD SYSOUT=A,DCB=BLKSIZE=133
//SYSIN  DD DSN=&&RFMTDEDS,DISP=(OLD,DELETE)
//SYSUT1 DD DSN=COMPARE.T618F180(0),DISP=SHR
//SYSUT2 DD DSN=COMPARE.T618F180(+1),DISP=(,CATLG,DELETE),
//         SPACE=(TRK,(1,1),RLSE),LABEL=EXPDT=11111,
//       VOL=REF=COMPARE.POINTER1,
//       DCB=(DSCB,RECFM=FB,LRECL=80,BLKSIZE=800)
//*
//*
//STEP05 EXEC PGM=VAMPIRE,PARM='NP',COND=(00,NE,STEP01)
//STEPLIB DD DSN=COMPARE.PROGLIB,DISP=SHR
//SYSUDUMP DD SYSOUT=L
//INPTDATA DD DSN=COMPARE.T618F180(+1),DISP=SHR
//PRINTOUT DD SYSOUT=A,DCB=BLKSIZE=133
//SYSIN    DD DSN=COMPARE.CONTRLIB(R180VAMP),DISP=SHR
//SYSIN   DD DSN=COMPARE.CONTRLIB(R180VAMP),DISP=SHR
NEWPAGE00
                                                            ********************
                                                            *    COMPARE       *
                                                            * PROC - COMPR310  *
                                                            *     INTRO        *
                                                            ********************




                    PURPOSE
                    -------


                    THE PURPOSE OF THIS PROC IS TO UPDATE THE
                    COMPARE FORECAST PRICE FILES. THERE ARE
                    THREE SUCH FILES

                         A) APPROVED PRICES - THIS FILE
                            CONTAINS PRICES WHICH HAVE BEEN
                            APPROVED FOR CHARGING TO CUSTOMERS.

                         B) FORECASTED PRICES - THIS FILE
                            CONTAINS THE BEST POSSIBLE GUESSES
                            FOR COUNTRIES AND PRODUCTS FOR
                            WHICH NO PRICING POLICY EXISTS.

                         C) COMMODITY PRODUCT PRICES - THIS
                            FILE CONTAINS APPROVED & FORECAST
                            PRICES FOR COMMODITY PRODUCTS.
                            THESE PRICES ARE HELD ON A SEPARATE
                            FILE BECAUSE UPDATING RESPONSIBILITY
                            WILL EVENTUALLY BE TRANSFERRED TO A
                            DIFFERENT USER.


                    THERE IS ONLY ONE PROCEDURE FOR A PRICE FILE
                    UPDATE. A SYMBOLIC PARAMETER DETERMINES THE
                    ACTUAL FILE FOR UPDATE.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR310 *
                                                             *     FLOW        *
                                                             *******************
                                  /------------
                                 /  PRICE     |
                                |   FILE      |
                                |   UPDATES   |
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |  IERRCO00   |      (              (
STEP01    (   CONTRLIB   ( ---->|    SORT     |---->(     WORK     (
           (  (SORTPF01)  (     |             |      (              (
            ---------------     ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
            ---------------            |              ---------------
           (  COMPARE.    (            |             (  COMPARE.    (
          (   CONTRLIB   (  ---------->|<-----------(   T618F009   (
           (  (PFBUDGIE   (            |             (              (
            ---------------            V              ---------------
            ---------------     ---------------       ---------------
           (              (     |  BUDGIE3 &  |      (              (
STEP02    (  CMF.TABLES  ( ---->|  COBOL EXIT |---->(     WORK     (
           (              (     |   T618P008  |      (              (
            ---------------     ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |                     |
                                       |                     |
                                      /|                     |
            ---------------          / |                     |
            |             |<--------/  |                     |
            |  R200       |            |<--------------------|
            |        ------            |
            --------/                  V
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
NEWPAGE00
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------       ---------------
                                |  T618P015   |      (              (
STEP03                          |    DATE     |---->(      WORK    (
                                |  HANDLING   |      (              (
                                ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |  AARDVARK   |      (              (
STEP04    (   CONTRLIB   ( ---->|             |---->(     WORK     (
           (  (PRFAARDV)  (     |  REFORMAT   |      (              (
            ---------------     ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
                                       V
            ---------------     ---------------       ---------------
           (              (     |  T618P035   |      (    WORK      (
STEP05    (  CMF.TABLES  ( ---->|   PRICE     |---->(     PRINT    ( -------
           (              (     | CALCULATION |      (   RECORDS    (      |
            ---------------     ---------------       ---------------      |
                                      /|                                   |
                                     / |                                   |
                    ----------------/  |                                   |
                   |                   |                                   |
                   V                   V            COMPARE.T618F283/4/5   |
            ---------------     ---------------       ---------------      |
           (    WORK      (     |   UT485     |<---- (     (0)      (      |
STEP06    (    UPDATE    ( ---->| UPDATE PRICE|     (--------------(       |
           (   RECORDS    (     |    FILE     |----> (     (+1)     (      |
            ---------------     ---------------       ---------------      V
                                       |                     |           -----
                                      /|                     |           |   |
                                     / |<--------------------|           | B |
                                    /  |                                 |   |
                                   /   V                                 -----
            ---------------       /  -----
            |             |      /   |   |
            | ACTION LIST |<-----    | C |
            |        ------          |   |
            --------/                -----
NEWPAGE00
                                     -----
                                     |   |
                                     | C |
                                     |   |
                                     -----
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |             |       |             |
STEP07    (   CONTRLIB   ( ---->|   PARROT    |------>| RXXX        |
           (  (RXXXPRRT)  (     |             |       |        ------
            ---------------     ---------------       --------/
     RXXX = R210
            R220
            R230
                                                                         -----
                                                                         |   |
                                       |---------------------------------| B |
                                       |                                 |   |
                                       V                                 -----
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |  IERRCO00   |      (    WORK      (
STEP08    (   CONTRLIB   ( ---->|             |---->(              (
           (  (SORTPF02)  (     |    SORT     |      (              (
            ---------------     ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
            ---------------     ---------------       ---------------
           (              (     |  T618P040   |      (  COMPARE.    (
STEP09    (  CMF.TABLES  ( ---->| FULL PRICE  |<----(   T618F009   (
           (              (     |    LIST     |      (              (
            ---------------     ---------------       ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |             |      RXXX = R211
                                | RXXX        |             R221
                                |        ------             R231
                                --------/

NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR310 *
                                                             *      JCL        *
                                                             *******************

./ ADD NAME=COMPR310,LIST=ALL
//COMPR310 PROC MASTER='F283',REPORT='R210',BUDGIE='PF',DATA='310'
//*
//*
//******************************************************************************
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//* J O B  -  C O M P R 3 1 0 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           NONE                          STEP01                   *****
//*STEP02           NONE                          STEP01                   *****
//*STEP03           NONE                          STEP01                   *****
//*STEP04           NONE                          STEP01                   *****
//*STEP05           NONE                          STEP01                   *****
//*STEP06           IF COMPARE.T618F283(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED RESET                              *****
//*STEP07           RESET COMPARE.T618F283        STEP01                   *****
//*STEP08           RESET COMPARE.T618F283        STEP01                   *****
//*STEP09           OVERRIDE DDNAME SYSUT1        STEP09                   *****
//*                 BY COMPARE.T618F283(0)                                 *****
//******************************************************************************
//* J O B  -  C O M P R 3 1 1 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           NONE                          STEP01                   *****
//*STEP02           NONE                          STEP01                   *****
//*STEP03           NONE                          STEP01                   *****
//*STEP04           NONE                          STEP01                   *****
//*STEP05           NONE                          STEP01                   *****
//*STEP06           IF COMPARE.T618F284(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED,RESET                              *****
//*STEP07           RESET COMPARE.T618F284        STEP01                   *****
//*STEP08           RESET COMPARE.T618F284        STEP01                   *****
//*STEP09           OVERRIDE DDNAME SYSUT1        STEP09                   *****
//*                 BY COMPARE.T618F284(0)                                 *****
//******************************************************************************
//* J O B  -  C O M P R 3 1 2 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           NONE                          STEP01                   *****
//*STEP02           NONE                          STEP01                   *****
//*STEP03           NONE                          STEP01                   *****
//*STEP04           NONE                          STEP01                   *****
//*STEP05           NONE                          STEP01                   *****
//*STEP06           IF COMPARE.T618F285(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED,RESET                              *****
//*STEP07           RESET COMPARE.T618F285        STEP01                   *****
//*STEP08           RESET COMPARE.T618F285        STEP01                   *****
//*STEP09           OVERRIDE DDNAME SYSUT1        STEP09                   *****
//*                 BY COMPARE.T618F285(0)                                 *****
//******************************************************************************
//* J O B  -  C O M P R 7 1 0 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           NONE                          STEP01                   *****
//*STEP02           NONE                          STEP01                   *****
//*STEP03           NONE                          STEP01                   *****
//*STEP04           NONE                          STEP01                   *****
//*STEP05           NONE                          STEP01                   *****
//*STEP06           IF COMPARE.T618F783(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED,RESET                              *****
//*STEP07           RESET COMPARE.T618F783        STEP01                   *****
//*STEP08           RESET COMPARE.T618F783        STEP01                   *****
//*STEP09           OVERRIDE DDNAME SYSUT1        STEP09                   *****
//*                 BY COMPARE.T618F783(0)                                 *****
//******************************************************************************
//* J O B  -  C O M P R 7 1 1 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           NONE                          STEP01                   *****
//*STEP02           NONE                          STEP01                   *****
//*STEP03           NONE                          STEP01                   *****
//*STEP04           NONE                          STEP01                   *****
//*STEP05           NONE                          STEP01                   *****
//*STEP06           IF COMPARE.T618F784(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED,RESET                              *****
//*STEP07           RESET COMPARE.T618F784        STEP01                   *****
//*STEP08           RESET COMPARE.T618F784        STEP01                   *****
//*STEP09           OVERRIDE DDNAME SYSUT1        STEP09                   *****
//*                 BY COMPARE.T618F784(0)                                 *****
//******************************************************************************
//* J O B  -  C O M P R 7 1 2 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           NONE                          STEP01                   *****
//*STEP02           NONE                          STEP01                   *****
//*STEP03           NONE                          STEP01                   *****
//*STEP04           NONE                          STEP01                   *****
//*STEP05           NONE                          STEP01                   *****
//*STEP06           IF COMPARE.T618F785(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED RESET                              *****
//*STEP07           RESET COMPARE.T618F785        STEP01                   *****
//*STEP08           RESET COMPARE.T618F785        STEP01                   *****
//*STEP09           OVERRIDE DDNAME SYSUT1        STEP09                   *****
//*                 BY COMPARE.T618F785(0)                                 *****
//******************************************************************************
//******************************************************************************
//STEP01   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP01              IERRCO00       SORTS PRICE FILE UPDATES.
//******************************************************************************
//******************************************************************************
//*STEP02              BUDGIE3        VALIDATES FIELDS FOR NORMAL NUMERIC ETC.
//*                 WITH EXIT      CHECKS. ACCESSES CMF AND CONDENSED PROD.
//*                 T618P008       FILE TO ENSURE MATCH FOR CERTAIN CODES.
//*                                    EXIT WAS WRITTEN BEFORE BUDGIE COULD
//*                                SUPPLY THIS FACILITY.
//******************************************************************************
//SORTLIB   DD  DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT    DD  SYSOUT=A
//SORTWK01  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SYSIN DD DSN=COMPARE.CONTRLIB(SORTPF01),DISP=SHR
//SORTIN  DD DSN=COMPARE.T618D&DATA.,DISP=SHR
//SORTOUT   DD  DSN=&&STEP01A,DISP=(,PASS),SPACE=(CYL,(2,2),RLSE),
//        UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//*
//*
//STEP02   EXEC PGM=BUDGIE3,REGION=0190K
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSPRINT DD SYSOUT=A
//SYSUDUMP DD SYSOUT=A
//SYSUT1 DD DSN=&&STEP01A,DISP=(OLD,DELETE)
//SYSUT2 DD DSN=&&STEP02A,UNIT=SYSDA,DISP=(,PASS),
//          DCB=(RECFM=FB,LRECL=80,BLKSIZE=800),
//          SPACE=(CYL,(4,1),RLSE)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//LOGIN DD DUMMY,DCB=BLKSIZE=80
//LOGOUT DD DUMMY,DCB=BLKSIZE=80
//SUSPOUT DD DUMMY,DCB=BLKSIZE=80
//WORK DD DSN=&&WORK,UNIT=SYSDA,
//        DCB=(RECFM=FB,LRECL=160,BLKSIZE=1600),
//         SPACE=(TRK,(90,2),RLSE)
//SYSIN    DD   DSN=COMPARE.CONTRLIB(&BUDGIE.BUDGIE),DISP=SHR
//T618CMF DD DSN=CMF.TABLES,DISP=SHR
//T618PRD DD DSN=COMPARE.T618F009,DISP=SHR
//SYSOUT DD SYSOUT=A,DCB=(LRECL=120,BLKSIZE=120)
//EXITCTRL     DD  DSN=COMPARE.T618F007,DISP=SHR
//*
//*
//STEP03 EXEC PGM=T618P015,COND=(00,NE,STEP02)
//******************************************************************************
//*STEP03              T618P015       PERFORMS DATE CONVERSION. ALSO WRITTEN
//*                                BEFORE BUDGIE COULD DO THIS.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA DD DSN=&&STEP02A,DISP=(OLD,DELETE)
//OUTDATA DD DSN=&&STEP03A,DISP=(,PASS),UNIT=SYSDA,
//         SPACE=(CYL,(4,1),RLSE),DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//*
//*
//STEP04 EXEC PGM=AARDVARK,COND=(00,NE,STEP02)
//******************************************************************************
//*STEP04              AARDVARK       REFORMATS DIFFERENT INPUT CARD LAYOUTS
//*                                TO A COMMON FORMAT. ASSIGNS DEFAULT
//*                                VALUES TO INCOMPLETE INPUT FIELDS.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA DD DSN=&&STEP03A,DISP=(OLD,DELETE)
//LOGIC DD DSN=COMPARE.CONTRLIB(PRFAARDV),DISP=SHR
//OUTDATA DD DSN=&&STEP04A,DISP=(,PASS),
//         SPACE=(CYL,(1,1),RLSE),UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680)
//*
//*
//STEP05 EXEC PGM=T618P035,COND=(00,NE,STEP02)
//******************************************************************************
//*STEP05              T618P035       CALCULATES PRICES IN COMBINATIONS OF
//*                                LOCAL AND US UNITS AND CURRENCY. APPLIES
//*                                SALES DEDUCTIONS. CREATES 2 WORK FILES
//*                                WHICH WILL
//*                                    A) PRODUCE FULL PRICE LIST
//*                                    B) UPDATE CONDENSED PRICE FILE.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//T618CMF DD DSN=CMF.TABLES,DISP=SHR
//RUNCURRS DD DUMMY,DCB=BLKSIZE=80
//REGCURRS DD DUMMY,DCB=BLKSIZE=80
//SYSUDUMP DD SYSOUT=A
//RAWPRICE DD DSN=&&STEP04A,DISP=(OLD,DELETE)
//PRTPRICE DD DSN=&&STEP05A,DISP=(,PASS),
//         SPACE=(CYL,(1,1),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680)
//CNDPRICE DD DSN=&&STEP05B,DISP=(,PASS),SPACE=(TRK,(90,2),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=200,BLKSIZE=1000)
//*
//*
//STEP06   EXEC PGM=UT485,PARM=('KEYS=(1,36)'),REGION=0220K,
//******************************************************************************
//*STEP06              UT485          UPDATES PRICE FILE. PRINTS LIST OF
//*                                ACTION TAKEN.
//******************************************************************************
//         COND=(00,NE,STEP02)
//SORTLIB   DD  DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT    DD  SYSOUT=A
//SORTWK01  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTLIST DD SYSOUT=A
//SYSPRINT DD SYSOUT=A,DCB=BLKSIZE=133
//SYSIN  DD DSN=&&STEP05B,DISP=(OLD,DELETE)
//SYSUT1 DD DSN=COMPARE.T618&MASTER.(0),DISP=SHR
//SYSUT2 DD DSN=COMPARE.T618&MASTER.(+1),DISP=(,CATLG,DELETE),
//         SPACE=(TRK,(1,1),RLSE),LABEL=EXPDT=11111,
//       VOL=REF=COMPARE.POINTER1,
//       DCB=(DSCB,RECFM=FB,LRECL=200,BLKSIZE=1000)
//*
//*
//STEP07   EXEC PGM=IERRCO00,COND=(00,NE,STEP02),REGION=0130K
//******************************************************************************
//*STEP07              IERRCO00       SORTS FULL PRICE INFORMATION.
//******************************************************************************
//SORTLIB   DD  DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT    DD  SYSOUT=A
//SORTWK01  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SYSIN DD DSN=COMPARE.CONTRLIB(SORTPF02),DISP=SHR
//SORTIN DD DSN=&&STEP05A,DISP=(OLD,DELETE)
//SORTOUT DD DSN=&&STEP07A,DISP=(,PASS),
//         SPACE=(TRK,(1,1),RLSE),UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680)
//*
//*
//STEP08   EXEC PGM=T618P040,PARM='MAPC,1,C',REGION=0100K,
//******************************************************************************
//*STEP08              T618P040       PRINTS THE PRICE FILE UPDATES IN 'FULL'
//*                                FORMAT. VARIES HEADING ACCORDING TO
//*                                PARM VALUE.
//******************************************************************************
//       COND=(00,NE,STEP02)
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSUDUMP DD SYSOUT=A
//SYSOUT DD SYSOUT=A
//PRINTOUT DD SYSOUT=A,DCB=BLKSIZE=133
//PRTPRICE DD DSN=&&STEP07A,DISP=(OLD,DELETE)
//T618CMF DD DSN=CMF.TABLES,DISP=SHR
//PRODFILE DD DSN=COMPARE.T618F009,DISP=SHR
//*
//*
//STEP09   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP09              PARROT         PRINTS UPDATED PRICE FILE IN CONDENSED
//*                                FORMAT.
//******************************************************************************
//SYSUT1 DD DSN=COMPARE.T618&MASTER.(+1),DISP=SHR
//SYSIN DD DSN=COMPARE.CONTRLIB(&REPORT.PRRT),DISP=SHR
//SYSPRINT DD SYSOUT=A
//PL1DUMP DD SYSOUT=A
//SYSOUT DD DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80  DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,30)
//SYSLIN DD DSN=PARROT.PICTURE,DISP=SHR
//WORK DD UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//           SPACE=(TRK,(9,9),RLSE)
//*
//******************************************************************************
NEWPAGEJH
                                                            ********************
                                                            *    COMPARE       *
                                                            * PROC - COMPR320  *
                                                            *     INTRO        *
                                                            ********************
                    PURPOSE
                    -------




                    THE PURPOSE OF THIS PROC IS TO REVALUE
                    THE COMPARE PRICE FILES.


                         A PRICE RECORD IN COMPARE COVERS
                    A CERTAIN TIME FRAME, EITHER A SEASON
                    OR OPEN-ENDED, EG

                     A) SEASON  -  FROM 76030  TO  77029

                     B) OPEN    -  FROM 76030  TO  99365


                    THESE PRICES ARE HELD IN LOCAL CURRENCY
                    TOGETHER WITH A DOLLAR CONVERSION FACTOR.


                         THIS PROC WILL READ THE PRICE FILE
                    AND WILL CONVERT PRICES TO THE  NEW
                    MONSANTO CONVERSION RATES DEPENDENT
                    ON A DATE ENTERED IN THE PARM.

                         EG. IF THE PARM DATE WERE '76150'
                    CASE A (SEE ABOVE) WOULD END UP AS 2
                    PRICE RECORDS ON THE OUTPUT FILE.

                         A)  FROM 76030  TO  76149  (AT OLD RATE)
                                  76150      77029  (AT NEW RATE)

                    LIKEWISE FOR CASE B)

                         B   FROM 76030  TO  76149  (AT OLD RATE)
                                  76150      99365  (AT NEW RATE).
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR320 *
                                                             *     FLOW        *
                                                             *******************





                                  /------------
                                 /            |
                                |    PARM     |
                                |             |
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V             COMPARE.T618F283/4/5
                                ---------------       ---------------
                                |  T618P036   |<---- (     (0)      (
STEP01                          |             |     (--------------(
                                |   REVALUE   |----> (     (+1)     (
                                ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |<--------------------|
                                       |
                                       V
            ---------------     ---------------
           (  COMPARE.    (     |             |
STEP02    (   CONTRLIB   ( ---->|   PARROT    |
           (  (RXXXPRRT)  (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
          RXXX = R210           ---------------
                 R220           |             |
                 R230           | RXXX        |
                                |        ------
                                --------/

NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR320 *
                                                             *      JCL        *
                                                             *******************

./ ADD NAME=COMPR320,LIST=ALL
//COMPR320  PROC MASTER=F283,REPORT=R210,PARAM=9999999
//*
//*
//******************************************************************************
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//* J O B  -  C O M P R 3 2 0 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           IF COMPARE.T618F283(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED, THEN                              *****
//*                 DELETE                                                 *****
//*STEP02           OVERRIDE DDNAME SYSUT1        STEP02                   *****
//*                 BY COMPARE.T618F283(0)                                 *****
//******************************************************************************
//* J O B  -  C O M P R 3 2 1 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           IF COMPARE.T618F284(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED, THEN                              *****
//*                 DELETE                                                 *****
//*STEP02           OVERRIDE DDNAME SYSUT2        STEP02                   *****
//*                 BY COMPARE.T618F284(0)                                 *****
//******************************************************************************
//* J O B  -  C O M P R 3 2 2 **************************************************
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM             *****
//******************************************************************************
//*STEP01           IF COMPARE.T618F285(+1)       STEP01                   *****
//*                 HAS BEEN CATALOGUED, THEN                              *****
//*                 DELETE                                                 *****
//*STEP02           OVERRIDE DDNAME SYSUT1        STEP02                   *****
//*                 BY COMPARE.T618F285(0)                                 *****
//******************************************************************************
//******************************************************************************
//STEP01  EXEC PGM=T618P036,PARM='&PARAM'
//*        (YY = YEAR OF LAST RECORD NOT UPDATED)
//*        LAYOUT OF PARAM IS YYDDDYY   (YYDDD = START DATE OF UPDATE)
//*        I,E. '7900178'  -  IF REVALUATION BEGINING OF YEAR
//*                           IF MID-YEAR '7817078'
//******************************************************************************
//*STEP01              T618P036       WILL EXAMINE THE JULIAN DATE GIVEN IN
//*                                THE PARM. WILL REVALUE THOSE PRICE
//*                                RECORDS WHICH REQUIRE HANDLING AS OF THE
//*                                NEW DATE. WILL CREATE EXTRA RECORDS IF
//*                                JULIAN DATE OCCURS IN THE MIDDLE OF A
//*                                PRICE PERIOD. (THIS IS MORE LIKELY TO BE
//*                                TRUE THAN NOT).
//*                                    THUS, OVER A PERIOD OF TIME, OLD
//*                                PRICE RECORDS RETAIN THEIR EXCHANGE
//*                                RATES UNTOUCHED, WHILE THE NEW ONES WILL
//*                                BE HELD AT MONSANTO'S LATEST RATES.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSUDUMP DD SYSOUT=A
//OLDPRICE DD DSN=COMPARE.T618&MASTER.(0),DISP=SHR
//CNDPRICE DD DSN=COMPARE.T618&MASTER.(+1),DISP=(,CATLG,DELETE),
//             SPACE=(TRK,(9,9),RLSE),LABEL=EXPDT=11111,
//       VOL=REF=COMPARE.POINTER1,
//       DCB=(DSCB,RECFM=FB,LRECL=200,BLKSIZE=1000)
//*
//*
//STEP02   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP02              PARROT         PRINTS NEW PRICE FILE IN CONDENSED
//*                                FORMAT.
//******************************************************************************
//SYSUT1 DD DSN=COMPARE.T618&MASTER.(+1),DISP=SHR
//SYSIN DD DSN=COMPARE.CONTRLIB(&REPORT.PRRT),DISP=SHR
//SYSPRINT DD SYSOUT=A
//PL1DUMP DD SYSOUT=A
//SYSOUT DD DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80  DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,30)
//SYSLIN DD DSN=PARROT.PICTURE,DISP=SHR
//WORK DD UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//           SPACE=(TRK,(9,9),RLSE)
//*
//******************************************************************************
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR350 *
                                                            *       INTRO      *
                                                            ********************
                    PURPOSE
                    -------


                    THIS PROC PRINTS ALL OF THE COMPARE FORECAST
                    FILES.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR350 *
                                                             *     FLOW        *
                                                             *******************
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |             |      (  COMPARE.    (
STEP01    (   T618F283   ( ---->|   PARROT    |<----(   CONTRLIB   (
           (   (0)        (     |             |      (  CR210PRRT   (
            ---------------     ---------------       ---------------
                                       |
            ---------------           /|
            |             |          / |
            | R210        |<--------/  |
            |        ------            |
            --------/                  |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |             |      (  COMPARE.    (
STEP02    (   T618F284   ( ---->|   PARROT    |<----(   CONTRLIB   (
           (    (0)       (     |             |      (  (R220PRRT)  (
            ---------------     ---------------       ---------------
                                       |
            ---------------           /|
            |             |          / |
            | R220        |<--------/  |
            |       -------            |
            -------/                   |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |             |      (  COMPARE.    (
STEP03    (   T618F285   (----->|   PARROT    |<----(   CONTRLIB   (
           (    (0)       (     |             |      (  (R230PRRT)  (
            ---------------     ---------------       ---------------
                                       |
            ---------------           /
            |             |          /
            | R230        |<--------/
            |        ------
            --------/

NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR350 *
                                                             *      JCL        *
                                                             *******************

./ ADD NAME=COMPR350,LIST=ALL
//COMPR350 PROC FILES='2'
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP01              PARROT         PRINTS REPORT.
//******************************************************************************
//SYSUT1 DD DSN=COMPARE.T618F&FILES.83(0),DISP=SHR
//SYSIN DD DSN=COMPARE.CONTRLIB(R210PRRT),DISP=SHR
//SYSPRINT DD SYSOUT=A
//PL1DUMP DD SYSOUT=A
//SYSOUT DD DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80  DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,30)
//SYSLIN DD DSN=PARROT.PICTURE,DISP=SHR
//WORK DD UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//           SPACE=(TRK,(9,9),RLSE)
//*
//*
//STEP02   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP02              PARROT         PRINTS ANOTHER REPORT.
//******************************************************************************
//SYSUT1 DD DSN=COMPARE.T618F&FILES.84(0),DISP=SHR
//SYSIN DD DSN=COMPARE.CONTRLIB(R220PRRT),DISP=SHR
//SYSPRINT DD SYSOUT=A
//PL1DUMP DD SYSOUT=A
//SYSOUT DD DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80  DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,30)
//SYSLIN DD DSN=PARROT.PICTURE,DISP=SHR
//WORK DD UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//           SPACE=(TRK,(9,9),RLSE)
//*
//*
//*
//STEP03   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP03              PARROT         PRINTS YET ANOTHER REPORT. THAT PROGRAM
//*                                HAS NO IMAGINATION.
//******************************************************************************
//SYSUT1 DD DSN=COMPARE.T618F&FILES.85(0),DISP=SHR
//SYSIN DD DSN=COMPARE.CONTRLIB(R230PRRT),DISP=SHR
//SYSPRINT DD SYSOUT=A
//PL1DUMP DD SYSOUT=A
//SYSOUT DD DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80  DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,30)
//SYSLIN DD DSN=PARROT.PICTURE,DISP=SHR
//WORK DD UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//           SPACE=(TRK,(9,9),RLSE)
//*
//******************************************************************************
NEWPAGEJH
                                                            ********************
                                                            *     COMPARE      *
                                                            * PROC - COMPR450  *
                                                            *      INTRO       *
                                                            ********************




                    PURPOSE
                    -------


                    THIS PROC MATCHES THE SALES VOLUME FILE
                    AGAINST 3 PRICE FILES, HUNTING FOR A
                    SUITABLE PRICE. IT THEN EXTENDS THE
                    INFORMATION FROM VOLUME AND PRICE SOURCES
                    PERFORMING UNIT CONVERSION TO PRODUCE
                    A FILE WHICH WILL ENTER THE COMPARE REPORT
                    FILE BUILD PROGRAM.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR450 *
                                                             *     FLOW        *
                                                             *******************
            ---------------
           (  COMPARE.    (                             COMPARE.
          (   T618F040   ( ------------|              ---------------
           (    (0)       (            |             ( T618F283(0)  (
            --------------             | <--------- (--------------(
                                       V            (  T618F284(0) (
            ---------------     ---------------     (--------------(
           (              (     |  T618P080   |      ( T618F285(0)  (
STEP01    (  CMF.TABLES  ( ---->|    PRICE    |       ---------------
           (              (     |   VOLUMES   |
            ---------------     ---------------
                                       |
            ---------------           /|              ---------------
            |             |          / |             (  COMPARE.    (
            |  R150       |<--------/  |----------->(   T618F820   (
                      -----                          (              (
            --------/                                 ---------------
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR450 *
                                                             *     JCL         *
                                                             *******************

./ ADD NAME=COMPR450,LIST=ALL
//COMPR450 PROC VOL='040',PRICE='28',OUT='820'
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=T618P080,REGION=0080K
//******************************************************************************
//*STEP01              T618P080       MATCHES VOLUME MASTER FILE WITH 3 PRICE
//*                                FILES. SEARCHES FOR PRICE IN THE SEQ :
//*                                APPROVED / FORECASTED / COMMODITY. IF A
//*                                PRICE IS FOUND EXTENSIVE UNIT AND
//*                                CURRENCY CALCULATIONS ARE PERFORMED. IF
//*                                NOT, A MESSAGE IS PRINTED ON THE PRICE
//*                                FAILURE REPORT.
//******************************************************************************
//STEPLIB DD DSN=COMPARE.PROGLIB,DISP=SHR
//DATEFILE     DD  DSN=COMPARE.T618F000,DISP=SHR
//INPTDATA DD DSN=COMPARE.T618F&VOL.(0),DISP=SHR
//CND1PRCE     DD  DSN=COMPARE.T618F&PRICE.3(0),DISP=SHR
//CND2PRCE     DD  DUMMY
//CND3PRCE     DD  DUMMY
//PRINTOUT DD SYSOUT=A,DCB=BLKSIZE=133
//OUTDATA DD DSN=COMPARE.T618F&OUT.,DISP=(OLD,KEEP),
//         SPACE=(CYL,(3,1),RLSE),LABEL=EXPDT=11111,
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=250,BLKSIZE=1000)
//T618CMF  DD DSN=CMF.TABLES,DISP=SHR
//SYSUDUMP DD SYSOUT=A,DCB=BLKSIZE=133
//*
//*
//******************************************************************************
NEWPAGEJH


                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR500 *
                                                             *     INTRO       *
                                                             *******************


            PURPOSE
            -------
                    THE PURPOSE OF THIS PROC IS TO SELECT MAPC
                    AND NON SOUTH-AFRICAN PLUS R-O-W ACTUAL
                    SALES FROM THE SUE BRIDGED ACTUALS
                    AND TO CREATE A FILE USING THE SELECTED
                    RECORDS ALSO SHOWN ON REPORT R058
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR500 *
                                                             *     FLOW        *
                                                             *******************


                                ---------------
                               ( SUE.MIC010(0)(
                              (              (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
STEP01      ---------------     ---------------
           (COMPARE.      (     | B1801       |
          ( CONTRLIB     (----->|             |
           ((SELCP500)    (     |             |
            ---------------     ---------------
                                       |
                    -------------------|
                    |                  |
                    |                  |
                    V                  V
            ---------------     ---------------
           ( WORFILE 2    (     ( WORKFILE 1  (
          (              (    (              (
           (              (     (             (
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP02     ( COMPARE.     (     | IEBGENER    |
          (  CONTRLIB    (----->|             |
           ( (GENCP500)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
NEWPAGE00
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
            ---------------     ---------------
           (  WORKFILE 2  (    (  WORKFILE 3  (
          (              (    (              (
           (              (    (              (
            ---------------     ---------------
                    |                  |
                    |                  |
                    |----------------->|
                                       |
                                       V
            ---------------     ---------------
STEP03     ( COMPARE.     (     |IERRCO00     |
          (  CONTRLIB    (----->|(SORT)       |
           ( (SRTCP500    (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               ( COMPARE.     (
                              (  T618F500    (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP04     ( COMPARE.     (     | VAMPIRE     |
          (  CONTRLIB    (----->|             |
           ( (R058PRT1)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                | R058 REPORT |
                                |             |
                                |        ------
                                |-------/
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR500 *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR500,LIST=ALL
//COMPR500     PROC
//*
//*
//STEP00   EXEC PGM=UT434,REGION=0080K,
//         PARM='REMOVE DSN=COMPARE.T618F500'
//SYSPRINT     DD   SYSOUT=A
//DD1          DD   DISP=OLD,VOL=REF=COMPARE.POINTER1
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=B1801,REGION=0120K
//******************************************************************************
//*STEP01              B1801          SELECT ALL MAPC AND DROP ALL SOUTH-AFRICAN
//*                                AND R-O-W SALES
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//SYSUT1       DD   DSN=SUE.MIC010(0),DISP=SHR
//DD1          DD   DSN=&&STEP01A,DISP=(,PASS,DELETE),
//             UNIT=SYSDA,SPACE=(TRK,(20,9),RLSE),
//             DCB=(RECFM=FB,LRECL=800,BLKSIZE=1600)
//DD2          DD   DSN=&&STEP01B,DISP=(,PASS,DELETE),
//             UNIT=SYSDA,SPACE=(TRK,(20,9),RLSE),
//             DCB=(RECFM=FB,LRECL=800,BLKSIZE=1600)
//SYSIN        DD  DSN=COMPARE.CONTRLIB(SELCP500),DISP=SHR
//*
//*
//STEP02       EXEC PGM=IEBGENER
//******************************************************************************
//*STEP02              IEBGENER       IF THE ENDUSER COUNTRY IS MISSING REPLACE
//*                                IT WITH    THE INVOICEE COUNTRY CODE
//******************************************************************************
//SYSUT1       DD   DSN=&&STEP01B,DISP=OLD
//SYSUT2       DD   DSN=&&STEP02A,DISP=(,PASS,DELETE),
//             UNIT=SYSDA,SPACE=(TRK,(20,9),RLSE),
//             DCB=(RECFM=FB,LRECL=800,BLKSIZE=1600)
//SYSPRINT     DD   SYSOUT=A
//SYSIN        DD  DSN=COMPARE.CONTRLIB(GENCP500),DISP=SHR
//*
//*
//STEP03   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP03              IERRCO00       SORT ALL SELECTED AND EVENTUALLY MODIFIED
//*                                INPUT
//******************************************************************************
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT       DD   SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SYSUDUMP     DD   SYSOUT=A
//SORTIN       DD   DSN=&&STEP01A,DISP=(OLD,DELETE,KEEP),
//             DCB=(RECFM=FB,LRECL=800,BLKSIZE=1600)
//             DD   DSN=&&STEP02A,DISP=(OLD,DELETE,KEEP),
//             DCB=(RECFM=FB,LRECL=800,BLKSIZE=1600)
//SORTOUT      DD   DSN=COMPARE.T618F500,DISP=(,CATLG,DELETE),
//             VOL=REF=COMPARE.POINTER1,SPACE=(TRK,(20,9),RLSE),
//             LABEL=RETPD=75,
//             DCB=(RECFM=FB,LRECL=800,BLKSIZE=1600)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK02     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK03     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK04     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SYSIN        DD  DSN=COMPARE.CONTRLIB(SRTCP500),DISP=SHR
//*
//*
//STEP04       EXEC PGM=VAMPIRE,PARM='  '
//******************************************************************************
//*STEP04              VAMPIRE        PRINTS ALL SORTED RECORDS IN //*STEP03
//******************************************************************************
//STEPLIB      DD   DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R058PRT1),DISP=SHR
//INPTDATA     DD   DSN=COMPARE.T618F500,DISP=(OLD,PASS)
//PRINTOUT     DD   SYSOUT=A,DCB=BLKSIZE=133

NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR510 *
                                                             *     INTRO       *
                                                             *******************
            PURPOSE
            -------

                    THE PURPOSE OF THIS PROC IS TO VALIDATE
                    AND BATCH BALANCE  THE MANUAL ACTUAL
                    SALES  AND CREATE A FILE WITH ALL THE
                    DATE IF ALL ARE CORRECT,
                    ONLY SOUTH AFRICAN AND R-O-W ACTUAL
                    SALES SHOULD BE ENTERED USING THIS
                    PROCEDURE
                    ALL THE DATA IS SHOWN ON A BATCH BALANC-
                    ING REPORT  R056
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR510 *
                                                             *     FLOW        *
                                                             *******************
                                ---------------
STEP01                          | UT434       |
                                |(REMOVE COMPA|
                                |RE.T618F510) |
                                ---------------





                                    AESCARDS
                                  /------------
                                 /ACTUALS ENTRY|
                                |  ENTRY CARDS |
                                |(AE0 AE1 AE2) |
                                ----------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP02     ( COMPARE.     (     | BUDGIE1     |
          (  CONTRLIB    (----->|             |
           ( (R056BUDG)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (  WORKFILE 1  (
                              (              (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
NEWPAGE00
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
                                       |
                                ---------------
STEP03                          | BUDGIE 3    |
                                |             |
                                |             |
                                ---------------
                                       |
                                       |
                    -------------------|
                    |                  |
                    V                  V
            ---------------     ---------------
            |R056 BATCH   |    ( WORKFILE 3   (
            |BALANCING    |   (              (
            |REPORT /-----     (              (
            -------/            ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP04     ( COMPARE.     (     | IERRCO00    |
          (  CONTRLIB    (----->| (SORT)      |
           ( (SRTCP510)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               ( COMPARE.     (
                              (  T618F510    (
                               (              (
                                ---------------

NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR510 *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR510,LIST=ALL
//COMPR510     PROC
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=UT434,REGION=0080K,
//         PARM='REMOVE DSN=COMPARE.T618F510'
//******************************************************************************
//*STEP01              UT434          REMOVE COMPARE.T618F510 FILE
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//DD1          DD   DISP=OLD,VOL=REF=COMPARE.POINTER1
//*
//*
//STEP02   EXEC PGM=BUDGIE1,REGION=0180K
//******************************************************************************
//*STEP02              BUDGIE1        INPUT VALIDATION ,   BATCH BALANCING AND
//******************************************************************************
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,4)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,4)
//SORTWK03     DD   UNIT=SYSDA,SPACE=(CYL,4)
//SYSUDUMP     DD   SYSOUT=A
//SYSPRINT     DD   SYSOUT=A
//SYSLIST      DD   SYSOUT=A
//SYSUT1       DD   DDNAME=AESCARDS
//SYSUT2       DD   DSN=&&STEP00B,DISP=(,PASS),UNIT=SYSDA,
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//             SPACE=(TRK,(9,9),RLSE)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(R056BUDG),DISP=SHR
//*
//*
//STEP03   EXEC PGM=BUDGIE3,REGION=0190K
//******************************************************************************
//*STEP03              BUDGIE3        PRINTING
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//SYSUDUMP     DD   SYSOUT=A
//PRINT        DD   SYSOUT=A
//SYSLIN       DD   DSN=SYS2.PICTURES(BUDGIE),DISP=SHR
//SYSUT1       DD   DSN=&&STEP00B,DISP=(OLD,PASS)
//SYSUT2       DD   DSN=&&STEP00C,DISP=(NEW,PASS),
//             SPACE=(TRK,(9,9),RLSE),UNIT=SYSDA,
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//WORK         DD   UNIT=SYSDA,SPACE=(TRK,(50,19),RLSE)
//CMFTABLE     DD   DSN=CMF.TABLES,DCB=(DSORG=IS),DISP=SHR
//SYSIN        DD   DSN=COMPARE.CONTRLIB(R056BUDG),DISP=SHR
//*
//*
//STEP04   EXEC PGM=IERRCO00,COND=(00,NE,STEP03),REGION=0130K
//******************************************************************************
//*STEP04              IERRCO00       SORT OF ALL THE ACCEPTED BATCHES IF ALL
//*                                ARE BATCH BALANCED, VALID AND ACCEPTED
//******************************************************************************
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT       DD   SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SYSUDUMP     DD   SYSOUT=A
//SORTIN       DD   DSN=&&STEP00C,DISP=(OLD,DELETE,KEEP),
//             DCB=(RECFM=FB,LRECL=080,BLKSIZE=1600)
//SORTOUT      DD   DSN=COMPARE.T618F510,DISP=(,CATLG,DELETE),
//             VOL=REF=COMPARE.POINTER1,SPACE=(TRK,(20,9),RLSE),
//             LABEL=RETPD=75,
//             DCB=(RECFM=FB,LRECL=080,BLKSIZE=1600)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK02     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK03     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK04     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SYSIN        DD   DSN=COMPARE.CONTRLIB(SRTCP510),DISP=SHR

NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR520 *
                                                             *     INTRO       *
                                                             *******************
            PURPOSE
            -------

                    THE PURPOSE OF THIS PROC IS TO UPDATE THE
                    ACTUALS HISTORY FILE USING THE BRIDGED
                    AND MANUAL DATA AND CREATE THE WHOLE
                    LAST YEAR'S, LAST YEARS' AS YTD, AND
                    CURRENT'S YEARS ACTUALS
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR520 *
                                                             *     FLOW        *
                                                             *******************
            ---------------     ---------------
STEP01     ( COMPARE.     (     | UT434       |
          (  CONTRLIB    (----->|             |
           ( (SCRCP520)   (     |             |
            ---------------     ---------------


            ---------------     ---------------       ---------------
           ( COMPARE.     (    ( CMF.TABLES   (      ( COMPARE.     (
          (  T618F510    (    (              (      (  T618F500    (
           (              (    (              (      (              (
            ---------------     ---------------       ---------------
                  |                    |                      |
                  V                    V                      V
                  ---------------------------------------------
                  |                    |                      |
                  V                    V                      V
             COMPARE                                   COMPARE
            ---------------     ---------------       ---------------
STEP02     (.T618F520(0)  (---->| T618P050    |<-----(.T618F530(0)  (
          (--------------(      |             |     (--------------(
           (.T618F521     (<----|             |----->(.T618F531     (
            ---------------     ---------------       ---------------
                                       |
                                       |
                    ------------------/|
                    |                  |
                    V                  V
            ---------------            |
            |REJECT LIST  |            |
            |             |            |
            |        /-----            |
            ---------                  |
                                       |
                                       V
                    -------------------------------------------
                    |                  |                      |
                    V                  V                      V
            ---------------     ---------------       ---------------
           ( COMPARE.     (    ( COMPARE.     (      ( COMPARE.     (
          (  T618F540    (    (  T618F550    (      (  T618F560    (
           (              (    (              (      (              (
            ---------------     ---------------       ---------------
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
NEWPAGE00
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
                                       |
            ---------------     ---------------       ---------------
STEP03     ( COMPARE.     (     | COPY        |      ( COMPARE.     (
          (  T618F531    (----->|             |---->(  T618F530(+1)(
           (              (     |             |      (              (
            ---------------     ---------------       ---------------


            ---------------     ---------------       ---------------
STEP04     ( COMPARE.     (     | COPY        |----->( COMPARE.     (----> (+1)
          (  T618F521    (----->|             |     (  T618F520    (     |
           (              (     |             |      ( (TAPE FILE)  (<---V (-4)
            ---------------     ---------------       ---------------

NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR520 *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR520,LIST=ALL
//COMPR520     PROC
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM
//******************************************************************************
//*STEP01                  NONE                  STEP01
//*STEP02                  NONE                  STEP01
//*STEP03   IF T618F520 CATALOGUED,RESET         STEP03
//*STEP04   IF T618F530 CATALOGUED,RESET         STEP04
//******************************************************************************
//STEP01   EXEC PGM=UT434,REGION=0080K
//******************************************************************************
//*STEP01              UT434          REMOVES THE FOLLOWING FILES:
//*                                COMPARE.T618F521
//*                                COMPARE.T618F540
//*                                COMPARE.T618F550
//*                                COMPARE.T618F560
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//DD1          DD   DISP=OLD,VOL=REF=COMPARE.POINTER1
//SYSIN        DD   DSN=COMPARE.CONTRLIB(SCRCP520),DISP=SHR
//*
//*
//STEP02       EXEC PGM=T618P050,PARM='YYYYYYYYYN',REGION=120K
//******************************************************************************
//*STEP02              T618P050       MAIN UPDATE OF THE ACTUAL SALES HISTORY
//*                                FILE (T618F520) USING BOTH THE INPUT
//*                                PRODUCED IN COMPR500 & COMPR510.
//*                                IT ALSO GENERATES THE CURRENT YEAR'S YTD,
//*                                THE TOTAL LAST YEAR'S AND LAST YEAR'S AS
//*                                YTD ACTUAL FILES
//******************************************************************************
//STEPLIB      DD   DSN=TOBY.PROGLIB,DISP=SHR
//             DD   DSN=COMPARE.PROGLIB,DISP=SHR
//SYSOUT       DD   SYSOUT=A,DCB=BLKSIZE=120
//SYSUDUMP     DD   SYSOUT=A
//T618ASHI     DD   DSN=COMPARE.T618F520(0),DISP=OLD
//T618INPC     DD   DUMMY,DCB=BLKSIZE=80
//T618SUEB     DD   DSN=COMPARE.T618F500,DISP=OLD
//T618DATI     DD   DSN=COMPARE.T618F530(0),DISP=OLD
//TOBYCMF      DD   DSN=CMF.TABLES,DISP=SHR
//T618ASHO     DD   DSN=COMPARE.T618F521,DISP=(,CATLG,DELETE),
//             LABEL=RETPD=75,
//             SPACE=(TRK,(110,10),RLSE),VOL=REF=COMPARE.POINTER1,
//             DCB=(RECFM=FB,LRECL=250,BLKSIZE=2500)
//T618LYAT     DD   DSN=COMPARE.T618F540,DISP=(,CATLG,DELETE),
//             SPACE=(TRK,(50,5),RLSE),VOL=REF=COMPARE.POINTER1,
//             LABEL=RETPD=75,
//             DCB=(RECFM=FB,LRECL=250,BLKSIZE=2500)
//T618LYAY     DD   DSN=COMPARE.T618F550,DISP=(,CATLG,DELETE),
//             SPACE=(TRK,(50,5),RLSE),VOL=REF=COMPARE.POINTER1,
//             LABEL=RETPD=75,
//             DCB=(RECFM=FB,LRECL=250,BLKSIZE=2500)
//T618YTDA     DD   DSN=COMPARE.T618F560,DISP=(,CATLG,DELETE),
//             SPACE=(TRK,(50,5),RLSE),VOL=REF=COMPARE.POINTER1,
//             LABEL=RETPD=75,
//             DCB=(RECFM=FB,LRECL=250,BLKSIZE=2500)
//T618DATO     DD   DSN=COMPARE.T618F531,DISP=(,CATLG,DELETE),
//             SPACE=(080,1),VOL=REF=COMPARE.POINTER1,
//             LABEL=RETPD=75,
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP03       EXEC PGM=COPY
//******************************************************************************
//*STEP03              COPY        COPIES FILE T618F521 ONTO A NEW GENERATION
//*                                OF T618F520 (+1) IF THE //*STEP02 IS
//*                                SUCCESSFULL
//******************************************************************************
//REFBACK      DD   DSN=COMPARE.T618F520(-4),DISP=OLD
//SYSIN        DD   DUMMY
//SYSPRINT     DD   SYSOUT=A
//SYSUT1       DD   DSN=COMPARE.T618F521,DISP=(OLD,KEEP,KEEP)
//SYSUT2       DD   DSN=COMPARE.T618F520(+1),DISP=(,CATLG,DELETE),
//             LABEL=RETPD=125,
//             UNIT=2400,VOL=REF=*.REFBACK,
//             DCB=(DSCB,RECFM=FB,LRECL=250,BLKSIZE=7500)
//STEP04       EXEC PGM=COPY
//******************************************************************************
//*STEP03              COPY        COPIES FILE T618F531 ONTO A NEW GENERATION
//*                                OF T618F530 (+1) IF THE //*STEP02 IS
//*                                SUCCESSFULL
//******************************************************************************
//SYSIN        DD   DUMMY
//SYSPRINT     DD   SYSOUT=A
//SYSUT1       DD   DSN=COMPARE.T618F531,DISP=(OLD,DELETE,KEEP)
//SYSUT2       DD   DSN=COMPARE.T618F530(+1),DISP=(,CATLG,DELETE),
//             SPACE=(80,1),VOL=REF=COMPARE.POINTER1,
//             LABEL=RETPD=75,
//             DCB=(DSCB,RECFM=FB,LRECL=80,BLKSIZE=080)

NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR530 *
                                                             *     INTRO       *
                                                             *******************
            PURPOSE
            -------

                    THE PURPOSE OF THIS PROC IS TO CREATE
                    THE ACTUALS REPORTING FILE
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR530 *
                                                             *     FLOW        *
                                                             *******************


            ---------------     ---------------       ---------------
           ( COMPARE.     (    ( COMPARE.     (      ( COMPARE.     (
          (  T618F530(0) (    (  T618FAAA    (      (  T618F009    (  AAA=520(0)
           (              (    (              (      (              (     540
            ---------------     ---------------       ---------------     550
                    |                  |                      |           560
                    |                  |                      |
                    ------------------>|<----------------------
                                       |
                                       V
            ---------------     ---------------       ---------------
STEP01     ( CMF.TABLES   (     | T618P090    |       | ERROR LIST  |
          (              (----->|             |------>|             |
           (              (     |             |       |       /------
            ---------------     ---------------       --------
                                       |
                                       |
                    -------------------V-----------------------
                    |                  |                      |
                    V                  V                      V
            ---------------     ---------------       ---------------
           ( COMPARE.     (    ( DUMMY        (      ( DUMMY        (BBB=522(+1)
          (  T618FBBB    (    (              (      (              (     542(+1)
           (              (    (              (      (              (    552(+1)
            ---------------     ---------------       ---------------    562(+1)
                    |
                    |
                    |----------------->
                                      |
                                      V
            ---------------     ---------------
STEP02     ( COMPARE.     (     | B1801       |
          (  CONTRLIB    (----->|             |
           ( (RPTB1801    (     |             |
            ---------------     ---------------
                                      |
                                      |
                                      |
                                      |
                                      V
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
NEWPAGE00
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
                                       |
                                ---------------
                               (       8      (
                              (  WORKFILES   (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V

            ---------------     ---------------
STEP03     ( COMPARE.     (     | VAMPIRE     |
          (  CONTRLIB    (----->|             |
           ( (R101VAMP)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       |
            ---------------            /
            | R101 REPORT |           /
            |             |----------/
            |       /------          |
            ---------                |
                                     .
                                     .
                                     .
                                     .
                                     .
                                ET CETERA
                                   FOR
   STEP     CONTRLIB            WORK FILE             REPORT
   ----     --------            ---------             ------
   STEP04   R102VAMP                2                 R102
   STEP05   R103VAMP                3                 R103
   STEP06   R104VAMP                4                 R104
   STEP07   R105VAMP                5                 R105
   STEP08   R106VAMP                6                 R106
   STEP09   R107VAMP                7                 R107
   STEP10   R108VAMP                8                 R108
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR530 *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR530,LIST=ALL
//COMPR530     PROC INPTDAT=560,FCSTCMP='562(+1)',BACK='562(0)',
//             PARAM1=MAPC,PARAM2=A,VAMPOUT=DUMMY
//*
//* PARAMETER ENTRIES MAY BE ONE OF THE FOLLOWING VALUES,
//*
//* 1-INPUT FILE
//* **************
//*
//*    INPTDAT=520 - TO PROCESS THE ALL HISTORY ACTUALS FILE
//*    INPTDAT=540 - TO PROCESS THE LAST YEAR'S ACTUALS FILE
//*    INPTDAT=550 - TO PROCESS THE LAST YEAR'S ACTUALS AS Y-T-D FILE
//*    INPTDAT=560 - TO PROCESS THE CURRENT YEAR'S ACTUALS AS Y-T-D FILE
//*
//*
//* 2-OUTPUT FILES
//* **************
//*
//*    FCSTCMP=542(+1) - TO PRODUCE A PARROTIZED OUTPUT FILE USING THE INPUT
//*    AND ITS ASSOCIATED BACK= 542(0)
//*    FCSTCMP=552(+1) - TO PRODUCE A PARROTIZED OUTPUT FILE USING THE INPUT
//*    AND ITS ASSOCIATED BACK= 552(0)
//*    FCSTCMP=562(+1) - TO PRODUCE A PARROTIZED OUTPUT FILE USING THE INPUT
//*    AND ITS ASSOCIATED BACK= 562(0)
//*
//*     PARAM1=MAPC- TO ENTER THE MAPC ACRONYM INTO THE OUTPUT RECORDS
//*
//*     PARAM2=A   - TO INDICATE WHETHER THE INPUT IS ACTUAL
//*     PARAM2=L   - TO INDICATE WHETHER THE INPUT IS LAST YEAR'S ACTUAL
//*
//* EACH SYMBOLIC PARAMETER BEING ASSOCIATED WITH THE MATCHING DDNAME
//* (7 LEFTMOST POSITIONS ONLY) OF THE OUTPUT FILES DEFINED IN THE
//* FOLLOWING PROCEDURE
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM
//******************************************************************************
//*STEP01                  NONE                  STEP01
//*STEP02                  NONE                  STEP02
//*STEP03                  NONE                  STEP02
//*STEP04 TO STEP10        NONE                  STEP02
//******************************************************************************
//STEP01   EXEC PGM=T618P090,PARM='&PARAM1,&PARAM2',REGION=0230K
//******************************************************************************
//*STEP01              T618P090       THIS PROGRAM FINDS NAMES AND / OR GROUPS
//*                                FOR CODES ON THE INPUT FILE. IT RETRIEVES
//*                                NAMES ETC., FROM BOTH THE CMF AND THE
//*                                CONDENSED PRODUCT FILE.
//******************************************************************************
//STEPLIB      DD   DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA     DD   DSN=COMPARE.T618F&INPTDAT,DISP=(SHR,PASS)
//REFBACK      DD   DSN=COMPARE.T618F&BACK,DISP=OLD
//FCSTCMPL     DD   DSN=COMPARE.T618F&FCSTCMP,DISP=(,CATLG,DELETE),
//             UNIT=2400,VOL=REF=*.REFBACK,LABEL=RETPD=75,
//             DCB=(DSCB,RECFM=FB,LRECL=600,BLKSIZE=2400)
//FCSTCONT     DD   DUMMY,
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//FCSTBLYR     DD   DUMMY,
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//CMFTABLS     DD   DSN=CMF.TABLES,DISP=SHR
//DATECARD     DD   DSN=COMPARE.T618F530(0),DISP=(SHR,PASS)
//PRODFILE     DD   DSN=COMPARE.T618F009,DISP=(SHR,PASS)
//PRINTOUT     DD   SYSOUT=A,DCB=BLKSIZE=133
//SYSUDUMP     DD   SYSOUT=A
//*
//*
//STEP02   EXEC PGM=B1801,REGION=0120K
//******************************************************************************
//*STEP02              B1801          IF PROGRAM T618P090 FAILED TO FIND A NAME
//*                                 / GROUP ETC., IT FILLS THE RELEVANT FIELD
//*                                ON THE REPORT WITH QUESTION MARKS.
//*                                B1801 LOOKS FOR THIS CHARACTER AND,
//*                                DEPENDANT ON THE FIELD, SHUNTS THE GUILTY
//*                                RECORD TO THE APPROPRIATE WORK FILE.
//******************************************************************************
//SYSPRINT     DD  SYSOUT=A
//SYSUT1       DD  DSN=COMPARE.T618F&FCSTCMP,DISP=OLD
//SYSUT2       DD  DUMMY
//DD1          DD  DSN=&&STEP02A,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD2          DD  DSN=&&STEP02B,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD3          DD  DSN=&&STEP02C,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD4          DD  DSN=&&STEP02D,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD5          DD  DSN=&&STEP02E,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD6          DD  DSN=&&STEP02F,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD7          DD  DSN=&&STEP02G,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD8          DD  DSN=&&STEP02H,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SYSIN DD DSN=COMPARE.CONTRLIB(RPTB1801),DISP=SHR
//*
//*
//STEP03       EXEC  PGM=VAMPIRE,PARM='  '
//******************************************************************************
//*STEP03              VAMPIRE        PRINTS RECORDS FROM THE WORK FILE FROM
//*                                B1801. VAMPIRE'S HEADINGS STATE WHAT TYPE
//*                                OF TABLE INFORMATION IS MISSING.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R101VAMP),DISP=SHR
//PRINTOUT     DD  SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02A,DISP=(OLD,DELETE)
//*
//*
//STEP04       EXEC  PGM=VAMPIRE,PARM='  '
//******************************************************************************
//*STEP04              VAMPIRE        THESE //*STEPS ARE IDENTICAL IN CONCEPT TO
//*TO                                 STEP03.
//*STEP10
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R102VAMP),DISP=SHR
//PRINTOUT     DD  &VAMPOUT,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02B,DISP=(OLD,DELETE)
//*
//*
//STEP05       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R103VAMP),DISP=SHR
//PRINTOUT     DD  &VAMPOUT,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02C,DISP=(OLD,DELETE)
//*
//*
//STEP06       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R104VAMP),DISP=SHR
//PRINTOUT     DD  &VAMPOUT,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02D,DISP=(OLD,DELETE)
//*
//*
//STEP07       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R105VAMP),DISP=SHR
//PRINTOUT     DD  &VAMPOUT,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02E,DISP=(OLD,DELETE)
//*
//*
//STEP08       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R106VAMP),DISP=SHR
//PRINTOUT     DD  &VAMPOUT,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02F,DISP=(OLD,DELETE)
//*
//*
//STEP09       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R107VAMP),DISP=SHR
//PRINTOUT     DD  &VAMPOUT,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02G,DISP=(OLD,DELETE)
//*
//*
//STEP10       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R108VAMP),DISP=SHR
//PRINTOUT     DD  &VAMPOUT,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02H,DISP=(OLD,DELETE)
//*
//******************************************************************************



NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR540 *
                                                             *     INTRO       *
                                                             *******************
            PURPOSE
            -------

                    THE PURPOSE OF THIS PROC IS TO CREATE
                    THE BUDGET REPORTING FILE
                    AND
                    THE FORECASTING REPORTING FILE


NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR540 *
                                                             *     FLOW        *
                                                             *******************
            ---------------     ---------------       --------------- AAA=720
           ( COMPARE.     (    ( COMPARE.     (      ( COMPARE.     (     820
          (  T618F530(0) (    (  T618FAAA    (      (  T618F009    (
           (              (    (              (      (              (
            ---------------     ---------------       ---------------
                    |                  |                      |
                    |                  |                      |
                    ------------------>|<----------------------
                                       |
                                       V
            ---------------     ---------------       ---------------
STEP01     ( CMF TABLES   (     | T618P090    |       | ERROR LIST  |
          (              (----->|             |------>|             |
           (              (     |             |       |       /------
            ---------------     ---------------        -------
                                       |
                                       |
                    -------------------V-----------------------
                    |                  |                      |
                    V                  V                      V
            ---------------     ---------------       ---------------
           ( COMPARE.     (    ( COMPARE.     (      ( COMPARE.     (
          (  T618FBBB    (    (  T618FCCC    (      (  T618FDDD    (
           (              (    (              (      (              (
            ---------------     ---------------       ---------------
            BBB=542 |           CCC=701               DDD=826
                552 |               801
                562 |------------------
                724                   |
                824                   V
            ---------------     ---------------
STEP02     ( COMPARE.     (     | B1801       |
          (  CONTRLIB    (----->|             |
           ( (RPTB1801    (     |             |
            ---------------     ---------------
                                      |
                                      |
                                      |
                                      |
                                      V
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
NEWPAGE00
                                     -----
                                     |   |
                                     | A |
                                     |   |
                                     -----
                                       |
                                ---------------
                               (       8      (
                              (  WORKFILES   (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP03     ( COMPARE.     (     | VAMPIRE     |
          (  CONTRLIB    (----->|             |
           ( (R101VAMP)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       |
            ---------------            /
            | R101 REPORT |           /
            |             |----------/
            |       /------          |
            ---------                |
                                     .
                                     .
                                     .
                                     .
                                     .
                                ET CETERA
                                   FOR
   STEP     CONTRLIB            WORK FILE             REPORT
   ----     --------            ---------             ------
   STEP04   R102VAMP                2                 R102
   STEP05   R103VAMP                3                 R103
   STEP06   R104VAMP                4                 R104
   STEP07   R105VAMP                5                 R105
   STEP08   R106VAMP                6                 R106
   STEP09   R107VAMP                7                 R107
   STEP10   R108VAMP                8                 R108

NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR540 *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR540,LIST=ALL
//COMPR540     PROC INPTDAT=540,FCSTCMP=542,FCSTCON=544,FCSTBLY=546    C
//             PARAM1=MAPC,PARAM2=L
//* PARAMETER ENTRIES MAY BE ONE OF THE FOLLOWING VALUES,
//* 1-INPUT FILE
//* **************
//*
//*    INPTDAT=720 - TO PROCESS THE BUDGET FILE
//*    INPTDAT=820 - TO PROCESS THE FORECASTS FILE
//*
//* 2-OUTPUT FILES
//* **************
//*
//*
//*    FCSTCMP=724 - TO PRODUCE A PARROTIZED OUTPUT FILE USING THE INPUT
//*    FCSTCMP=824 - TO PRODUCE A PARROTIZED OUTPUT FILE USING THE INPUT
//*
//*    FCSTCON=701 - TO PRODUCE A PARROTIZED UNLIMITED FORECAST FILE
//*    FCSTCON=801 - TO PRODUCE A PARROTIZED UNLIMITED BUDGET FILE
//*
//*    FCSTBLY=826 - TO PRODUCE A PARROTIZED BALANCE OF YEAR BUDGET FILE
//*
//*     PARAM1=MAPC- TO ENTER THE MAPC ACRONYM INTO THE OUTPUT RECORDS
//*     PARAM2=A   - TO INDICATE WHETHER THE INPUT IS ACTUAL
//*     PARAM2=B   - TO INDICATE WHETHER THE INPUT IS BUDGET
//*     PARAM2=F   - TO INDICATE WHETHER THE INPUT IS FORECAST
//*     PARAM2=L   - TO INDICATE WHETHER THE INPUT IS LAST YEAR'S ACTUAL
//* EACH SYMBOLIC PARAMETER BEING ASSOCIATED WITH THE MATCHING DDNAME
//* (7 LEFTMOST POSITIONS ONLY) OF THE OUTPUT FILES DEFINED IN THE
//* FOLLOWING PROCEDURE
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//* JOB STEP       *ACTION BEFORE RESTART        *RESTART FROM
//******************************************************************************
//*STEP01                  NONE                  STEP01
//*STEP02                  NONE                  STEP02
//*STEP03                  NONE                  STEP02
//*STEP04 TO STEP10        NONE                  STEP02
//******************************************************************************
//STEP01   EXEC PGM=T618P090,PARM='&PARAM1,&PARAM2',REGION=0230K
//******************************************************************************
//*STEP01              T618P090       THIS PROGRAM FINDS NAMES AND / OR GROUPS
//*                                FOR CODES ON THE INPUT FILE. IT RETRIEVES
//*                                NAMES ETC., FROM BOTH THE CMF AND THE
//*                                CONDENSED PRODUCT FILE.
//******************************************************************************
//STEPLIB      DD   DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA     DD   DSN=COMPARE.T618F&INPTDAT,DISP=(SHR,PASS)
//FCSTCMPL     DD   DSN=COMPARE.T618F&FCSTCMP,DISP=(OLD,KEEP),
//             VOL=REF=COMPARE.POINTER1,LABEL=EXPDT=11111,
//             SPACE=(TRK,(200,10),RLSE),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//FCSTCONT     DD   DSN=COMPARE.T618F&FCSTCON,DISP=(OLD,KEEP),
//             VOL=REF=COMPARE.POINTER1,LABEL=EXPDT=11111,
//             SPACE=(TRK,(200,10),RLSE),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//FCSTBLYR     DD   DSN=COMPARE.T618F&FCSTBLY,DISP=(OLD,KEEP),
//             VOL=REF=COMPARE.POINTER1,LABEL=EXPDT=11111,
//             SPACE=(TRK,(200,10),RLSE),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//CMFTABLS     DD   DSN=CMF.TABLES,DISP=SHR
//DATECARD     DD   DSN=COMPARE.T618F530(0),DISP=(SHR,PASS)
//PRODFILE     DD   DSN=COMPARE.T618F009,DISP=(SHR,PASS)
//PRINTOUT     DD   SYSOUT=A,DCB=BLKSIZE=133
//SYSUDUMP     DD   SYSOUT=A
//*
//*
//STEP02   EXEC PGM=B1801,REGION=0120K
//******************************************************************************
//*STEP02              B1801          IF PROGRAM T618P090 FAILED TO FIND A NAME
//*                                 / GROUP ETC., IT FILLS THE RELEVANT FIELD
//*                                ON THE REPORT WITH QUESTION MARKS.
//*                                B1801 LOOKS FOR THIS CHARACTER AND,
//*                                DEPENDANT ON THE FIELD, SHUNTS THE GUILTY
//*                                RECORD TO THE APPROPRIATE WORK FILE.
//******************************************************************************
//SYSPRINT     DD  SYSOUT=A
//SYSUT1       DD  DSN=COMPARE.T618F&FCSTCMP,DISP=OLD
//SYSUT2       DD  DUMMY
//DD1          DD  DSN=&&STEP02A,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD2          DD  DSN=&&STEP02B,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD3          DD  DSN=&&STEP02C,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD4          DD  DSN=&&STEP02D,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD5          DD  DSN=&&STEP02E,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD6          DD  DSN=&&STEP02F,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD7          DD  DSN=&&STEP02G,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DD8          DD  DSN=&&STEP02H,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//             UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SYSIN DD DSN=COMPARE.CONTRLIB(RPTB1801),DISP=SHR
//*
//*
//STEP03       EXEC  PGM=VAMPIRE,PARM='  '
//******************************************************************************
//*STEP03              VAMPIRE        PRINTS RECORDS FROM THE WORK FILE FROM
//*                                B1801. VAMPIRE'S HEADINGS STATE WHAT TYPE
//*                                OF TABLE INFORMATION IS MISSING.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R101VAMP),DISP=SHR
//PRINTOUT     DD  SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02A,DISP=(OLD,DELETE)
//*
//*
//STEP04       EXEC  PGM=VAMPIRE,PARM='  '
//******************************************************************************
//*STEP04              VAMPIRE        THESE //*STEPS ARE IDENTICAL IN CONCEPT TO
//*                                   STEP03.
//*STEP10
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R102VAMP),DISP=SHR
//PRINTOUT     DD  SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02B,DISP=(OLD,DELETE)
//*
//*
//STEP05       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R103VAMP),DISP=SHR
//PRINTOUT     DD  SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02C,DISP=(OLD,DELETE)
//*
//*
//STEP06       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R104VAMP),DISP=SHR
//PRINTOUT     DD  SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02D,DISP=(OLD,DELETE)
//*
//*
//STEP07       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R105VAMP),DISP=SHR
//PRINTOUT     DD  SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02E,DISP=(OLD,DELETE)
//*
//*
//STEP08       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R106VAMP),DISP=SHR
//PRINTOUT     DD  SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02F,DISP=(OLD,DELETE)
//*
//*
//STEP09       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R107VAMP),DISP=SHR
//PRINTOUT     DD  SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02G,DISP=(OLD,DELETE)
//*
//*
//STEP10       EXEC  PGM=VAMPIRE,PARM='  '
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//SYSIN  DD DSN=COMPARE.CONTRLIB(R108VAMP),DISP=SHR
//PRINTOUT     DD  SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA     DD  DSN=&&STEP02H,DISP=(OLD,DELETE)
//*
//******************************************************************************
NEWPAGEJH
                                                            ********************
                                                            *     COMPARE      *
                                                            *  JOB - COMPR610  *
                                                            *     INTRO        *
                                                            ********************
                    PURPOSE
                    -------
                    THE PURPOSE OF THIS JOB IS TO BRIDGE FORECAST
                    VOLUMES INTO THE BUDGET VOLUME MASTER FILE.
                        SINCE THE FORECAST FILES CONTAIN PROJECTIONS
                    FOR AT LEAST 18 MONTHS AHEAD, THE DATA BEING
                    BRIDGED IS CONTROLLED BY THE BUDGET CYCLE CONTROL
                    DATE.
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *  JOB - COMPR610  *
                                                            *      FLOW        *
                                                            ********************
            ---------------     ---------------       ---------------
           ( COMPARE.     (     |   GRAFT     |      ( COMPARE.     (
STEP01    (  T618F001    ( ---->| GENERATE    |<----(  COMTRLIB    (
           (              (     |B1801 SYSIN  |      ( (GRAFT001)   (
            ---------------     ---------------       ---------------
                                       |
                                       |
                   |-------------------|---------------------|
                   |                   |                     |
                   V                   |                     V
            ---------------            |              ---------------
            | COMTROL     |            |             (    WORK      (
            | LIST        |            |           (   B1801 SYSIN(
            |        ------            |             (              (
            --------/                  |              ---------------
                                       |                     |
                                       |                     |
                                       |<---------------------
                                       |
                                       V
            ---------------     ---------------       ---------------
           ( COMPARE.     (     |   B1801     |      ( COMPARE.     (
STEP02    (  T618F040    ( ---->| SELECT VOLS.|---->(  T618F740    (
           (   (0)        (     | FOR BUDGET  |      (    (+1)      (
            ---------------     ---------------       ---------------
NEWPAGEJC
                                                            ********************
                                                            *     COMPARE      *
                                                            *  JOB - COMPR610  *
                                                            *      JCL         *
                                                            ********************
./ ADD NAME=COMPR610,LIST=ALL
//COMPR610 PROC IN='040',OUT='740',DAT='001'
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01      EXEC PGM=GRAFT
//******************************************************************************
//*STEP01              GRAFT          THIS PROGRAM CAN READ
//*                                     A) A SKELETON B1801 SYSIN
//*                                     B) ANY TABLE FILE
//*                                AND CAN GENERATE B1801 CONTROL CARDS FOR
//*                                EVERY ENTRY ON THE TABLE.
//*                                     IN THIS CASE THE 'TABLE' IS THE
//*                                BUDGET CONTROL DATE, A ONE-RECORD FILE
//*                                WHICH GIVES THE START OF THE BUDGET
//*                                CYCLE.
//*                                     GRAFT READS THIS DATE AND GENERATES
//*                                A SELECT CARD (INCLUDING THE BUDGET YEAR)
//*                                WHICH IS APPLIED IN THE B1801 BRIDGE IN
//*                                   STEP02.
//******************************************************************************
//STEPLIB DD DSN=COMPARE.PROGLIB,DISP=SHR
//SYSOUT   DD SYSOUT=A
//PRINT    DD SYSOUT=A,DCB=BLKSIZE=133
//TABLE    DD   DSN=COMPARE.T618F&DAT.,DISP=SHR
//MDFYINST DD DSN=&&STEP01A,DISP=(,PASS),UNIT=SYSDA,
//      SPACE=(TRK,(9,9),RLSE),
//    DCB=(LRECL=80,RECFM=FB,BLKSIZE=80)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(GRAFT001),DISP=SHR
//*
//*
//STEP02   EXEC PGM=B1801,REGION=0120K
//******************************************************************************
//*STEP02              B1801          THIS UTILITY BRIDGES ACROSS THE FORECAST
//*                                DATA INTO THE BUDGET VOLUME FILE.
//******************************************************************************
//SYSPRINT DD SYSOUT=A
//SYSUT1   DD   DSN=COMPARE.T618F&IN.(0),DISP=SHR
//SYSUT2   DD   DSN=COMPARE.T618F&OUT.(+1),DISP=(,CATLG,DELETE),
//       VOL=REF=COMPARE.POINTER1,
//           SPACE=(TRK,(9,9),RLSE),
//        LABEL=EXPDT=11111,
//       DCB=DSCB
//SYSIN DD DSN=&&STEP01A,DISP=(OLD,DELETE)
//*
//*
//******************************************************************************
NEWPAGEJH
                                                            ********************
                                                            *     COMPARE      *
                                                            *  JOB - COMPR620  *
                                                            *     INTRO        *
                                                            ********************
                    INTRO
                    -----
                    THE PURPOSE OF THIS JOB IS TO BRIDGE FORECAST
                    PRICES INTO BUDGET PRICE FILES.
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *  JOB - COMPR620  *
                                                            *      FLOW        *
                                                            ********************
            ---------------     ---------------       ---------------
           ( COMPARE.     (     |    UT432    |      ( COMPARE.     (
STEP01    (  T618F283    ( ---->|             |---->(  T618F783    (
           (   (0)        (     |    COPY     |      (   (+1)       (
            ---------------     ---------------       ---------------
NEWPAGEJC
                                                            ********************
                                                            *     COMPARE      *
                                                            *  JOB - COMPR620  *
                                                            *      JCL         *
                                                            ********************
./ ADD NAME=COMPR620,LIST=ALL
//COMPR620 PROC     INFILE='283',OUTFILE='783'
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01 EXEC PGM=UT432
//******************************************************************************
//*STEP01              UT432          SIMPLE FILE COPY
//******************************************************************************
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=COMPARE.T618F&INFILE.(0),DISP=SHR
//SYSUT2   DD   DSN=COMPARE.T618F&OUTFILE.(+1),DISP=(,CATLG,DELETE),
//       VOL=REF=COMPARE.POINTER1,SPACE=(TRK,(9,4),RLSE),
//       LABEL=EXPDT=11111,
//        DCB=(DSCB,RECFM=FB,LRECL=200,BLKSIZE=1000)
//*
//*
//******************************************************************************
NEWPAGEJH

                                                            ********************
                                                            *     COMPARE      *
                                                            *  JOB - COMPR795  *
                                                            *       INTRO      *
                                                            ********************
                   INTRO
                   *****
                   THIS PROCEDURE CREATES A BRIDGE FILE OF
                   COMPARE BUDGET-SALES DATA FOR ENTRY INTO TOBY
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *  JOB - COMPR795  *
                                                            *      FLOW        *
                                                            ********************
                                ---------------
                               (  COMPARE.    (
                              (  T618F722    (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
           ( COMPARE.     (     |             |
          (  CONTRLIB    (----->|    B1801    |
           ( (P790B181)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (   &&BRIDGE1  (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
           ( COMPARE.     (     |             |
          (  CONTRLIB    (----->|  IEBGENER   |
           ( (P790IEB1)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (   &&BRIDGE2  (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
           ( COMPARE.     (     |             |
          (  CONTRLIB    (----->|   B1801     |
           ( (P790B182)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (   &&BRIDGE3  (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
           ( COMPARE.     (     |             |
          (  CONTRLIB    (----->|  IERRCO00   |
           ( (P790SRT1)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (  &&BRIDGE4   (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------     ---------------
                                |             |     |             |
                                |  T618EBS1   |---->|  PRINTOUT   |
                                |             |     |     --------
                                ---------------     |    /
                                       |            -----
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (  &&BRIDGE5   (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
           (  COMPARE.   (----->|   UT432     |
           (  (P790TOB1)  (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |             |
                                |             |
                                |         -----
                                |        /
                                ---------
NEWPAGEJC
                                                            ********************
                                                            *     COMPARE      *
                                                            *  JOB - COMPR795  *
                                                            *      JCL         *
                                                            ********************
./ ADD NAME=COMPR795,LIST=ALL
//COMPR795     PROC
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//******************************************************************************
//*STEP01          B1801     SELECT BUDGET-DATA FOR CORRECT TIME PERIOD
//******************************************************************************
//STEP01   EXEC PGM=B1801,REGION=0120K
//SYSPRINT DD   SYSOUT=A
//SYSUT1   DD   DSN=COMPARE.T618F722,DISP=SHR
//SYSUT2   DD   DSN=&&BRIDGE1,DISP=(,PASS),
//         SPACE=(CYL,(5,2),RLSE),UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(P790B181),DISP=SHR
//STEP02   EXEC PGM=IEBGENER
//******************************************************************************
//*STEP02          IEBGENER  REFORMAT TO TOBY BS30-FORMAT
//******************************************************************************
//SYSPRINT DD   SYSOUT=A
//SYSUT1   DD   DSN=&&BRIDGE1,DISP=(OLD,DELETE)
//SYSUT2   DD   DSN=&&BRIDGE2,DISP=(,PASS),
//         SPACE=(CYL,(5,1),RLSE),UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(P790IEB1),DISP=SHR
//STEP03   EXEC PGM=B1801,REGION=0120K
//******************************************************************************
//*STEP03              B1801       PERFORM SIGN MANIPULATION
//*                          WICH  IEBGENER CANNOT HANDLE
//******************************************************************************
//SYSPRINT DD   SYSOUT=A
//SYSUT1   DD   DSN=&&BRIDGE2,DISP=(OLD,DELETE)
//SYSUT2   DD   DSN=&&BRIDGE3,DISP=(,PASS),
//         SPACE=(CYL,(5,1),RLSE),UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(P790B182),DISP=SHR
//STEP04   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP04          SORT       SORT BEFORE SUMMARIZATION
//******************************************************************************
//SORTLIB   DD  DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT    DD  SYSOUT=A
//SORTWK01  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03  DD  UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(P790SRT1),DISP=SHR
//SORTIN DD DSN=&&BRIDGE3,DISP=(OLD,DELETE)
//SORTOUT  DD   DSN=&&BRIDGE4,DISP=(,PASS),
//         SPACE=(CYL,(5,1),RLSE),UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//STEP05 EXEC PGM=T618EBS1
//******************************************************************************
//*STEP05          T618EBS1  SUMMARIZE TO AVOID LOSS OF DUPLICATE RECORDS
//*                (TOBY DOES NOT ACCUMULATE EQUAL KEYS IT REPLACES)
//******************************************************************************
//STEPLIB DD DSN=COMPARE.PROGLIB,DISP=SHR
//PRINTOUT DD SYSOUT=A,DCB=BLKSIZE=133
//INPTDATA DD DSN=&&BRIDGE4,DISP=(OLD,DELETE)
//OUTDATA      DD  DSN=COMPARE.CMPRTOBY,DISP=(,CATLG,DELETE),
//             VOL=REF=COMPARE.POINTER1,LABEL=EXPDT=11111,
//             SPACE=(CYL,(5,1),RLSE),
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//******************************************************************************
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            * JOB - COMPR800   *
                                                            *      FLOW        *
                                                            ********************
                                 --------------
                                /             |
                                |    DATA     |
                                |             |
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |             |
                                |    UT432    |
                                |             |
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (    &&TABLE   (
                               (              (
                                ---------------
                                       |
       --------------------------------|
       |                               |
       |                               |
       |                               V
       |    --------------      --------------      ---------------
       |   (  COMPARE     (     |             |     |             |
       |  (  CONTRLIB     (---->|    GRAFT    |---->|    PRINT    |
       |   (  (PRNTJOBS)  (     |             |     |         -----
       |    ---------------     ---------------     |        /
       |                               |            --------
       |                               |
       |                               |
       |                               |
       |                               V
       |                        ---------------
       |                       (              (
       |                      (   &&STEP02A  (
       |                       (              (
       |                        ---------------
       |                               |
       |                               |
       |                               |SYSIN
       |                               |
       V                               V
       |                               |
       V                               V
       |                        ---------------
       |                        |             |
       |----------------------->|    B1801    |-------------
       |                        |             |            |
       |                        ---------------            |
       |                                                   |
       |                                                   V
       |                                            ---------------
       |                                           (              (
       |                                          (    &&JOBS    (
       |                                           (              (
       |                                            ---------------
       |                                                   |
       |                                                   |-----------|
       |                                                               |
       |------------------------------|                                |
       |                               |                               |
       |                               V                               |
       |    ---------------     ---------------     ---------------    |
       |   (  COMPARE     (     |             |     |             |    |
       |  (  CONTRLIB     (---->|    GRAFT    |---->|    PRINT    |    |
       |   ( (PRNTEXEC)   (     |             |     |        ------    |
       |    --------------      ---------------     |       /          |
       |                                            --------           |
       |                               |                               |
       |                               |                               |
       |                               |                               |
       |                               V                               |
       |                        ---------------                        |
       |                       (              (                        |
       |                      (    &&STEP04A (                         |
       |                       (              (                        |
       |                        ---------------                        |
       |                               |                               |
       |                               |                               |
       |                               |SYSIN                          |
       |                               |                               |
       |                               V                               |
       |                        ---------------                        |
       |                        |             |                        |
       |----------------------->|    B1801    |                        |
                                |             |                        |
                                ---------------                        |
                                       |                               |
                                       |                               |
                                       |                               |
                                       V                               |
                                ---------------                        |
                               (              (                        |
                              (    &&EXECS   (                         |
                               (              (                        |
                                ---------------                        |
                                       |                               |
                                       |                               |
                                       |  ------------------------------
                                       |  |
                                       V  V
            ---------------     ---------------
           (  COMPARE     (     |             |
          (   CONTRLIB   (----->|   IERRCO00  |
           (  (PRNTSORT)  (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (   &&STEP06A  (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                   |--------------------------------------|
                   V                                       V
            ---------------                         ---------------
            |             |                          |            |
            |   UTL001    |                          |  UT457     |
            |             |                          |            |
            ---------------                         ---------------
                   |                                       |
                   |                                       |
                   |                                       |
                   V                                       V
            ---------------                         ---------------
            |             |                        (              (
            |             |                       (     INTRDR   (
            |        ------                        (              (
            |       /                               ---------------
            --------
NEWPAGEJC
                                                            ********************
                                                            *     COMPARE      *
                                                            * JOB - COMPR800   *
                                                            *         JCL      *
                                                            ********************
./ ADD NAME=COMPR800,LIST=ALL
//COMPR800 PROC DATA='800'
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=UT432
//******************************************************************************
//*STEP01          UT432     COPY REPORT SELECTION CRITERIA TO WORK FILE
//******************************************************************************
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=COMPARE.T618D&DATA.,DISP=SHR
//SYSUT2   DD DSN=&&TABLE,DISP=(,PASS),
//         SPACE=(TRK,(1,1),RLSE),UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP02      EXEC PGM=GRAFT
//******************************************************************************
//*STEP02          GRAFT     CONSTRUCT B1801 RULES FOR CONVERTING
//*                          SELECTION CRITERIA INTO 'JOB' CARDS
//******************************************************************************
//STEPLIB DD DSN=COMPARE.PROGLIB,DISP=SHR
//SYSOUT   DD SYSOUT=A
//PRINT    DD SYSOUT=A,DCB=BLKSIZE=133
//TABLE DD DSN=&&TABLE,DISP=(OLD,PASS)
//MDFYINST DD DSN=&&STEP02A,DISP=(,PASS),UNIT=SYSDA,
//        DCB=(LRECL=80,RECFM=FB,BLKSIZE=80),
//          SPACE=(TRK,(3,1),RLSE)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(PRNTJOBS),DISP=SHR
//*
//*
//STEP03   EXEC PGM=B1801,REGION=0120K
//******************************************************************************
//*STEP03          B1801     CONVERT SELECTION CRITERIA INTO 'JOB' CARD
//******************************************************************************
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=&&TABLE,DISP=(OLD,PASS)
//SYSUT2 DD DSN=&&JOBS,DISP=(,PASS),
//         SPACE=(TRK,(1,1),RLSE),UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//SYSIN DD DSN=&&STEP02A,DISP=(OLD,DELETE)
//*
//*
//STEP04      EXEC PGM=GRAFT
//******************************************************************************
//*STEP04          GRAFT     CONSTRUCT B1801 RULES FOR CONVERTING
//*                          SELECTION CRITERIA INTO 'EXEC' CARDS
//******************************************************************************
//STEPLIB DD DSN=COMPARE.PROGLIB,DISP=SHR
//SYSOUT   DD SYSOUT=A
//PRINT    DD SYSOUT=A,DCB=BLKSIZE=133
//TABLE DD DSN=&&TABLE,DISP=(OLD,PASS)
//MDFYINST DD DSN=&&STEP04A,DISP=(,PASS),UNIT=SYSDA,
//        DCB=(LRECL=80,RECFM=FB,BLKSIZE=80),
//          SPACE=(TRK,(3,1),RLSE)
//SYSIN DD DSN=COMPARE.CONTRLIB(PRNTEXEC),DISP=SHR
//*
//*
//STEP05   EXEC PGM=B1801,REGION=0120K
//******************************************************************************
//*STEP05          B1801     CONVERT SELECTION CRITERIA INTO 'EXEC' CARDS
//******************************************************************************
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=&&TABLE,DISP=(OLD,DELETE)
//SYSUT2 DD DSN=&&EXECS,DISP=(,PASS),
//         SPACE=(TRK,(1,1),RLSE),UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//SYSIN DD DSN=&&STEP04A,DISP=(OLD,DELETE)
//*
//*
//STEP06   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP06          SORT      SORT JOB AND EXEC CARDS INTO CORRECT SEQUENCE
//******************************************************************************
//SYSOUT       DD SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SORTLIB      DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01     DD UNIT=SYSDA,SPACE=(CYL,5,,CONTIG)
//SORTWK02     DD UNIT=SYSDA,SPACE=(CYL,5,,CONTIG)
//SORTWK03     DD UNIT=SYSDA,SPACE=(CYL,5,,CONTIG)
//SORTWK04     DD UNIT=SYSDA,SPACE=(CYL,5,,CONTIG)
//SORTOUT      DD DSN=&&STEP06A,DISP=(,PASS),UNIT=SYSDA,
//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//         SPACE=(TRK,(1,1),RLSE)
//SYSIN DD DSN=COMPARE.CONTRLIB(PRNTSORT),DISP=SHR
//SORTIN DD DSN=&&JOBS,DISP=(OLD,DELETE)
//         DD DSN=&&EXECS,DISP=(OLD,DELETE)
//*
//*
//STEP07 EXEC PGM=UTL001
//******************************************************************************
//*STEP07          UTL001    PRINT CONSTRUCTED JOB AND EXEC CARDS
//*                           FOR POSSIBLE TROUBLESHOOTING
//******************************************************************************
//SYSPRINT DD SYSOUT=A
//LISTDATA DD DSN=&&STEP06A,DISP=(OLD,PASS)
//*
//*
//STEP08   EXEC PGM=UT457
//******************************************************************************
//*STEP08          UT457     SET UP CONSTRUCTED JOBS IN INTERNAL READER
//******************************************************************************
//SYSIN    DD DSN=&&STEP06A,DISP=(OLD,DELETE)
//SYSUT2   DD UNIT=INTRDR
//*
//*
//******************************************************************************
NEWPAGEJH
                                                            ********************
                                                            *   COMPARE        *
                                                            * PROC - COMPR801  *
                                                            *    INTRO         *
                                                            ********************




                    PURPOSE
                    -------


                    THIS PROCEDURE PRINTS A VARIETY OF FORECAST
                    REPORTS (SEE THE REPORT LIST SECTION FOR
                    DETAILS).


                         THE PROCEDURE IS COMPLICATED, BUT THE
                    MAIN AIMS ARE AS FOLLOWS

                         A) TO CONSTRUCT A SPECIAL SYSIN FOR
                            PARROT CONTAINING CALCULATIONS WHICH
                            ARE CONSTANT AND CALCULATIONS WHICH
                            DEPEND ON THE QUARTER OF THE YEAR

                         B) TO MARK THE RELEVANT SALES RECORDS,
                            DEPENDENT ON DATE, IN A WAY WHICH
                            PROVIDES EASY RECOGNITION FOR PARROT.


                         YOU CAN SEE THE EXACT PROCESSING DETAILS
                    IN THE '  STEPS  ' SECTION.
NEWPAGE00
                                                            ********************
                                                            *    COMPARE       *
                                                            * PROC - COMPR801  *
                                                            *     FLOW         *
                                                            ********************
                                  /------------       ---------------
                                 /   PARM     |      (  COMPARE.    (
                                |             |     (   T618F801   (
                                |             |      (              (
                                ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |----------------------
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |  T618P103   |      (              (
STEP01    (   T618F000   ( ---->| APPLY MONTH |---->(     WORK     (
           (              (     |  IDENTITIES |      (              (
            ---------------     ---------------       ---------------
                    |                  |                      |
                    |                  |                      |
                    |                  |<---------------------|
                    |                  |
                    |                  V
                    |           ---------------       ---------------
                    |           |  IERRCO00   |      (    SORTED    (
STEP02              |           |    SORT     |---->(     DATA     (--------
                    |           |             |      (              (      |
                    |           ---------------       ---------------      |
                    |                  |                                   |
                    |                  |                                   |
                    |----------------->|                                   |
                                       |                                   |
                                       V                                   |
            ---------------     ---------------       ---------------      |
           ( COMPARE      (     |  T618P102   |      (    WORK      (      |
STEP03    (  CONTRLIB    ( ---->|CONSTR. GR10 |---->(  CONSTRUCTED (       |
            ( CMMYYPARS)  (     | FIND QRTR.  |      ( GR10 LINE    (      |
            ---------------     ---------------       ---------------      |
                                       |                      |            |
                                      /|                      |            |
                    -----------------/ |                      |            |
                    |                  |                      |            |
                    V                  |                      V            V
            ...............            |                    -----        -----
           . CONDITION    .            |                    |   |        |   |
            . CODE EQUALS .            |                    | B |        | A |
            .   QUARTER   .            |                    |   |        |   |
            ...............            V                    -----        -----
NEWPAGE00
            ...............            |
            . CONDITION   .            |     ONLY ONE OF THE FOUR UT432'S
            . CODE EQUALS .            |     IN STEP04 TO STEP07 IS ACTUALLY
            . QUARTER     .            |     EXECUTED. THEREFORE, DEPENDING
            ...............            |     ON THE CONDITION CODE, THE WORK
                   |                   |     FILE CONTAINS PARROT CONTROL
                   |                   |     CARDS FOR THE CORRECT QUARTER.
                   ------------------->|
                                       |
                                       V
            ---------------     ---------------       ---------------
STEP04     ( COMPARE.     (     |    UT432    |      (    WORK      (
  TO      (  CONTRLIB    ( ---->|     COPY   |----->(              (
STEP07     ( (RXXXQTRX)   (     |             |      (              (
            ---------------     ---------------       ---------------
                -----                  |                      |          -----
                |   |                  |                      |          |   |
                | B |                  |                      |          | A |
                |   |                  |                      |          |   |
                -----                  |                      |          -----
                  |                    |                      |            |
                  |      SYSIN         |         SYSIN        |            |
                  |------------------->|<---------------------|            |
                                       |                                   |
                SYSIN                  V                                   |
            ---------------     ---------------                            |
           ( COMPARE.     (     |   PARROT    |        SYSUT1              |
          (  CONTRLIB    ( ---->|             |<---------------------------|
           ( (RXXXPRTX)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |             |
                                |   RXXX      |
                                |        ------
                                --------/

STEP08              PARROT         PRINTS REPORT.
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR801 *
                                                             *     JCL         *
                                                             *******************

./ ADD NAME=COMPR801,LIST=ALL
//COMPR801  PROC REP='001',NEW='801',DAT='000'
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01 EXEC PGM=T618P103,PARM='0029,0027,18,0452,S'
//******************************************************************************
//*STEP01              T618P103       THIS PROGRAM READS THE FORECAST CYCLE
//*                                START DATE AND SELECTS RECORDS FROM
//*                                THE REPORT FILE OR SUBSEQUENT
//*                                PROCESSING. EACH OUTPUT RECORD IS
//*                                MARKED BY A MONTH NO RELATIVE TO THE
//*                                CYCLE START DATE.
//*                                  E.G. IF CYCLE START = 10.76 THEN
//*                                       A RECORD FOR 10.76 = MONTH NO. 01
//*                                THIS MONTH NO. IS FOR THE CONVENIENCE
//*                                OF PARROT.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA DD DSN=COMPARE.T618F&NEW.,DISP=SHR,
//         DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//OUTDATA DD DSN=&&STEP01A,DISP=(,PASS),SPACE=(CYL,(10,2),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DATEFILE DD DSN=COMPARE.T618F&DAT.,DISP=SHR
//*
//*
//STEP02  EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP02              IERRCO00       SORT.
//******************************************************************************
//SYSIN DD DSN=COMPARE.CONTRLIB(R&REP.SRT1),DISP=SHR
//SORTLIB  DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT   DD   SYSOUT=A
//SORTWK01 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTIN  DD DSN=&&STEP01A,DISP=(OLD,DELETE)
//SORTOUT DD DSN=&&STEP02A,DISP=(,PASS),SPACE=(CYL,(10,2),RLSE),
//      UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//*
//*
//STEP03   EXEC PGM=T618P102,PARM='QUARTER PLEASE'
//******************************************************************************
//*STEP03              T618P102       THIS PROGRAM READS THE CYCLE START
//*                                DATE AND DOES 2 THINGS -
//*                                     A) SETS CONDITION CODE EQUAL
//*                                        TO CALENDAR START QUARTER
//*                                          E.G. DATE = 01.77, COND = 1
//*                                                      04.77         2
//*                                                      07.77         3
//*                                                      10.77         4
//*                                     B) GENERATES A GR10 HEADING LINE
//*                                        FOR PARROT TO SHOW ACTUAL
//*                                        DATES MONTH BY MONTH.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA DD DSN=COMPARE.CONTRLIB(MMYYPARS),DISP=SHR
//DATEFILE DD DSN=COMPARE.T618F&DAT.,DISP=SHR
//OUTDATA DD DSN=&&STEP03A,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP04 EXEC PGM=UT432,COND=(1,NE,STEP03)
//******************************************************************************
//*STEP04              UT432          ONLY ONE OF THESE COPIES IS EXECUTED.
//*TO                              THE CONDITION CODE (WHICH ATTENTIVE
//*STEP07                             READERS WILL REMEMBER IS NOW EQUAL TO
//*                                THE CALENDAR QUARTER) DETERMINES
//*                                WHICH ONE.
//*                                     THE RESULT IS THAT, AT THE END
//*                                OF STEP08, FILE &&STEP0XA CONTAINS
//*                                THE SEASONAL PARROT CONTROL CARDS
//*                                (GR07) FOR THE CORRECT QUARTER.
//******************************************************************************
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=COMPARE.CONTRLIB(R&REP.QTR1),DISP=SHR
//SYSUT2 DD DSN=&&STEP0XA,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//           UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP05 EXEC PGM=UT432,COND=(2,NE,STEP03)
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=COMPARE.CONTRLIB(R&REP.QTR2),DISP=SHR
//SYSUT2 DD DSN=&&STEP0XA,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//           UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP06 EXEC PGM=UT432,COND=(3,NE,STEP03)
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=COMPARE.CONTRLIB(R&REP.QTR3),DISP=SHR
//SYSUT2 DD DSN=&&STEP0XA,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//           UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP07 EXEC PGM=UT432,COND=(4,NE,STEP03)
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=COMPARE.CONTRLIB(R&REP.QTR4),DISP=SHR
//SYSUT2 DD DSN=&&STEP0XA,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//           UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP08   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP08              PARROT      PRINTS REPORT.
//******************************************************************************
//SYSUT1  DD DSN=&&STEP02A,DISP=(OLD,DELETE)
//SYSIN  DD DSN=COMPARE.CONTRLIB(R&REP.PRT1),DISP=SHR
//      DD DSN=&&STEP03A,DISP=(OLD,DELETE)
//      DD DSN=COMPARE.CONTRLIB(R&REP.PRT2),DISP=SHR
//      DD DSN=&&STEP0XA,DISP=(OLD,DELETE)
//      DD DSN=COMPARE.CONTRLIB(R&REP.PRT3),DISP=SHR
//SYSPRINT DD SYSOUT=A
//PL1DUMP DD SYSOUT=A
//SYSOUT DD DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80  DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,30)
//SYSLIN DD DSN=PARROT.PICTURE,DISP=SHR
//WORK DD UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//           SPACE=(TRK,(9,9),RLSE)
//*
//******************************************************************************
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR802 *
                                                            *     INTRO        *
                                                            ********************


                    PURPOSE
                    -------


                    THIS PROC READS THE OLD & NEW REPORT FILES
                    AND PRODUCES A COMPARISON BY YEAR.
                         DIFFERENT REPORTS CAN BE SELECTED BY
                    VOLUME OR VALUE. THIS IS CONTROLLED BY
                    SYMBOLIC PARAMETER.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR802 *
                                                            *      FLOW        *
                                                            ********************
            ---------------       /------------       ---------------
           (  COMPARE.    (      /            |      (  COMPARE.    (
          (   T618F800   (      |    PARM     |     (   T618F801   (
           (   OLD FILE   (     |             |      (   NEW FILE   (
            ---------------     ---------------       ---------------
                    |                  |                      |
                    |                  |                      |
                    |----------------->|<---------------------|
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |  T618P103   |      (              (
STEP01    (   T618F000   ( ---->| APPLY MONTH |---->(     WORK     ( -------
           (              (     |   NUMBERS   |      (              (      |
            ---------------     ---------------       ---------------      |
                    |                  |                                   |
                    |                  |                                   |
                    |----------------->|                                   |
                                       |                                   |
                                       V                                   |
            ---------------     ---------------       ---------------      |
           ( COMPARE.     (     |  T618P102   |      (    WORK      (      |
STEP02    (  CONTRLIB    ( ---->|CONSTR. GR10 |---->(  CONSTRUCTED (       |
           ( (RXXXYYPR)   (     | FIND QTR    |      ( GR10 LINE    (      |
            ---------------     ---------------       ---------------      |
                                       |                      |            |
                                      /|                      |            |
                    -----------------/ |                      |            |
                    |                  |                      |            |
                    V                  |                      V            V
            ...............            |                    -----        -----
           . CONDITION    .            |                    |   |        |   |
            . CODE EQUALS .            |                    | B |        | A |
            .   QUARTER   .            |                    |   |        |   |
            ...............            V                    -----        -----
NEWPAGE00
            ...............            |
            . CONDITION   .            |     ONLY ONE OF THE FOUR UT432'S
            . CODE EQUALS .            |     IN STEP04 TO STEP07 IS ACTUALLY
            . QUARTER     .            |     EXECUTED. THEREFORE, DEPENDING
            ...............            |     ON THE CONDITION CODE, THE WORK
                   |                   |     FILE CONTAINS PARROT CONTROL
                   |                   |     CARDS FOR THE CORRECT QUARTER.
                   ------------------->|
                                       |
                                       V
            ---------------     ---------------       ---------------
STEP04     ( COMPARE.     (     |    UT432    |      (    WORK      (
  TO      (  CONTRLIB    ( ---->|     COPY   |----->(              (
STEP07     ( (RXXXQTRX)   (     |             |      (              (
            ---------------     ---------------       ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------                          -----
           ( COMPARE.     (     |  IERRCO00   |                          |   |
STEP07    (  CONTRLIB    ( ---->|    SORT     |<-------------------------| A |
           ( (RXXXSRT1)   (     |             |                          |   |
            ---------------     ---------------                          -----
                                       |
                                       |
                                       |
                                       |
                                       |
                  -----                |----------------------|
                  |   |                |                      |
                  | B |                |                      |
                  |   |                |                      |
                  -----                |                      |
                    |      SYSIN       |                      |
                    |----------------->|                      |
                                       |                      |
                                       |                      |
                SYSIN                  V                      V
            ---------------     ---------------       ---------------
           ( COMPARE.     (     |   PARROT    |      (    WORK      (
STEP08    (  CONTRLIB    ( ---->|             |-----(              (
           ( (RXXXPRT1)   (     |             |      (   SYSUT1     (
            ---------------     ---------------       ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |             |
                                |  RXXX       |
                                |        ------
                                --------/
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR802 *
                                                             *     JCL         *
                                                             *******************

./ ADD NAME=COMPR802,LIST=ALL
//COMPR802     PROC REP='005',NEW='801',DAT='000',OLD='800'
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01       EXEC PGM=T618P103,PARM='0029,0027,18,0452,S'
//******************************************************************************
//*STEP01          T618P103  READS DATEFILE (ONE RECORD FORMAT YYMM)
//*                          AND USING THIS AS START OF 18 MONTHS CYCLE,
//*                          PUTS MARKER IN OUTPUT RECORD TO SIGNIFY MONTH NO
//*                          EG. IF DATEFILE =7707,OUTPUT FOR 7707 = '01'
//*                                                 OUTPUT FOR 7807 = '13'
//*                                                            ETC.
//******************************************************************************
//STEPLIB DD DSN=COMPARE.PROGLIB,DISP=SHR
//INPDATA  DD     DSN=COMPARE.T618F&OLD.,DISP=SHR
//         DD DSN=COMPARE.T618F&NEW.,DISP=SHR
//OUTDATA DD DSN=&&STEP02A,DISP=(,PASS),SPACE=(CYL,(10,2),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DATEFILE DD DSN=COMPARE.T618F&DAT.,DISP=SHR
//*
//*
//STEP02       EXEC PGM=T618P102,PARM='QUARTER PLEASE'
//******************************************************************************
//*STEP02          T618P102  READS DATEFILE AND SETS CONDITION CODE
//*                          EQUAL TO QUARTER OF YEAR
//*                          EG. IF DATEFILE = 7707 COND.CODE = 3
//******************************************************************************
//STEPLIB       DD  DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA DD DSN=COMPARE.CONTRLIB(R&REP.YYPR),DISP=SHR
//DATEFILE DD DSN=COMPARE.T618F&DAT.,DISP=SHR
//OUTDATA DD DSN=&&STEP03A,DISP=(,PASS),SPACE=(TRK,(1,1),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP03       EXEC PGM=UT432,COND=(1,NE,STEP02)
//******************************************************************************
//*STEP03          UT432     ONLY ONE OF THESE STEPS IS EXECUTED DEPENDENT
//*  TO                      ON COND-CODE STEP03. THE RESULT IS THAT FILE
//*STEP06                    &&STEP0XA WITH CONTAINS PARROT CONTROL CARDS
//*                          FOR CORRECT SEASON
//******************************************************************************
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=COMPARE.CONTRLIB(R&REP.QTR1),DISP=SHR
//SYSUT2 DD DSN=&&STEP0XA,DISP=(,PASS),SPACE=(TRK,(1,1),RLSE),
//           UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=80)
//*
//*
//STEP04       EXEC PGM=UT432,COND=(2,NE,STEP02)
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=COMPARE.CONTRLIB(R&REP.QTR2),DISP=SHR
//SYSUT2 DD DSN=&&STEP0XA,DISP=(,PASS),SPACE=(TRK,(1,1),RLSE),
//           UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=80)
//*
//*
//STEP05       EXEC PGM=UT432,COND=(3,NE,STEP02)
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=COMPARE.CONTRLIB(R&REP.QTR3),DISP=SHR
//SYSUT2 DD DSN=&&STEP0XA,DISP=(,PASS),SPACE=(TRK,(1,1),RLSE),
//           UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=80)
//*
//*
//STEP06       EXEC PGM=UT432,COND=(4,NE,STEP02)
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=COMPARE.CONTRLIB(R&REP.QTR4),DISP=SHR
//SYSUT2 DD DSN=&&STEP0XA,DISP=(,PASS),SPACE=(TRK,(1,1),RLSE),
//           UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=80)
//*
//*
//STEP07   EXEC PGM=IERRCO00,REGION=0130K
//*                SORT
//SORTLIB  DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT   DD   SYSOUT=A
//SORTWK01 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SYSIN DD DSN=COMPARE.CONTRLIB(R&REP.SRT1),DISP=SHR
//SORTIN DD DSN=&&STEP02A,DISP=(OLD,DELETE),
//         DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTOUT DD DSN=&&STEP08A,DISP=(,PASS),SPACE=(CYL,(10,2),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=500,BLKSIZE=500)
//*
//*
//STEP08   EXEC PGM=PARROTL,REGION=0192K
//*                PRINT REPORT
//STEPLIB DD DSN=TESTLIB,DISP=SHR
//SYSUT1 DD DSN=&&STEP08A,DISP=(OLD,DELETE),
//         DCB=(RECFM=FB,LRECL=500,BLKSIZE=500,BUFNO=1)
//SYSIN DD DSN=COMPARE.CONTRLIB(R&REP.PRT1),DISP=SHR
//      DD DSN=&&STEP03A,DISP=(OLD,DELETE)
//      DD DSN=COMPARE.CONTRLIB(R&REP.PRT2),DISP=SHR
//      DD DSN=&&STEP0XA,DISP=(OLD,DELETE)
//      DD DSN=COMPARE.CONTRLIB(R&REP.PRT3),DISP=SHR
//SYSPRINT DD SYSOUT=A
//PL1DUMP DD SYSOUT=A
//SYSOUT DD DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80  DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,30)
//SYSLIN DD DSN=PARROT.PICTURE,DISP=SHR
//WORK DD UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//           SPACE=(TRK,(9,9),RLSE)
//*
//******************************************************************************
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR803 *
                                                            *     INTRO        *
                                                            ********************


                    PURPOSE
                    -------


                    THIS PROC PRINTS THE PACKAGE PLANNING
                    REPORT FOR MAPC. ONE FIDDLE WORTH
                    NOTING IS THE B1801 WHICH TAMPERS WITH
                    CUSTOMER CLASSIFICATION ON THE REPORT
                    FILE. THE B1801 MODIFY RULES COULD EASILY
                    BECOME OUT OF DATE.
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR803 *
                                                            *      FLOW        *
                                                            ********************
                                  /------------       ---------------
                                 /   PARM     |      (  COMPARE.    (
                                |             |     (   T618F801   (
                                |             |      (              (
                                ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |----------------------
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |  T618P103   |      (              (
STEP01    (   T618F&DAT. ( ---->|   APPLY MONTH |---->(     WORK     (
           (              (     |  IDENTITIES |      (              (
            ---------------     ---------------       ---------------
                    |                  |                      |
                    |                  |                      |
     ---------------|                  |<---------------------|
     |                                 |
     |                                 V
     |      ---------------     ---------------       ---------------
     |     ( COMPARE.     (     |   B1801     |      (              (
     |    (  CONTRLIB    ( ---->|FIDDLE WITH  |---->(     WORK     (
     |     ( (R007B181)   (     |CUST. NAMES  |      (              (
     |      ---------------     ---------------       ---------------
     |                                 |                      |
     |                                 |                      |
     |                                 |<---------------------|
     |                                 |
     |                                 V
     |      ---------------     ---------------       ---------------
     |     ( COMPARE.     (     |  IERRCO00   |      (    WORK      (
     |    (  CONTRLIB    ( ---->|             |---->(              ( -------
     |     ( (R007SRT1)   (     |    SORT     |      (              (      |
     |      ---------------     ---------------       ---------------      |
     |                                 |                                   |
     |                                 |                                   |
     |-------------------------------->|                                   |
                                       |                                   |
                                       V                                   |
            ---------------     ---------------       ---------------      |
           ( COMPARE.     (     |  T618P102   |      (    WORK      (      |
          (  CONTRLIB    ( ---->| CONSTRUCT   |---->(              (       |
           ( (MMYYPARS)   (     |   GR10      |      (  GR10 CARDS  (      |
            ---------------     ---------------       ---------------      V
                                                            -----        -----
                                                            |   |        |   |
                                                            | B |        | A |
                                                            |   |        |   |
                                                            -----        -----
NEWPAGE00
                  -----                                                  -----
                  |   |       SYSIN                                      |   |
                  | B |-----------------                                 | A |
                  |   |                |                                 |   |
                  -----                |                                 -----
                                       |                                   |
                                       |                                   |
                                       |                                   |
                                       |                                   |
                  SYSIN                V                                   |
            ---------------     ---------------                            |
           (  COMPARE.    (     |   PARROT    |            SYSUT1          |
          (   CONTRLIB   ( ---->|             |<----------------------------
           ( (R007PRTX)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |             |
                                |  R007       |
                                |        ------
                                --------/
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR803 *
                                                             *     JCL         *
                                                             *******************

./ ADD NAME=COMPR803,LIST=ALL
//COMPR803  PROC  NEW=801,DAT=000,REP=007
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01 EXEC PGM=T618P103,PARM='0029,0027,18,0452,S'
//******************************************************************************
//*STEP01          T618P103  READS DATEFILE (ONE RECORD FORMAT YYMM)
//*                          AND USING THIS AS START OF 18 MONTHS CYCLE,
//*                          PUTS MARKER IN OUTPUT RECORD TO SIGNIFY MONTH NO
//*                          EG. IF DATEFILE =7707,OUTPUT FOR 7707 = '01'
//*                                                 OUTPUT FOR 7807 = '13'
//*                                                            ETC.
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA DD DSN=COMPARE.T618F&NEW.,DISP=SHR,
//         DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//OUTDATA DD DSN=&&STEP01A,DISP=(,PASS),SPACE=(CYL,(10,2),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DATEFILE DD DSN=COMPARE.T618F&DAT.,DISP=SHR
//*
//*
//STEP02   EXEC PGM=B1801,REGION=0120K
//SYSPRINT DD SYSOUT=A
//SYSUT1 DD DSN=&&STEP01A,DISP=(OLD,DELETE)
//SYSUT2 DD DSN=&&STEP02A,DISP=(,PASS),SPACE=(CYL,(10,2),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SYSIN        DD  DSN=COMPARE.CONTRLIB(R&REP.B181),DISP=SHR
//*
//*
//STEP03   EXEC PGM=IERRCO00,REGION=0130K
//*                SORT
//SORTLIB  DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT   DD   SYSOUT=A
//SORTWK01 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SYSIN DD DSN=COMPARE.CONTRLIB(R007SRT1),DISP=SHR
//SORTIN DD DSN=&&STEP02A,DISP=(OLD,DELETE),
//         DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTOUT DD DSN=&&STEP03A,DISP=(,PASS),SPACE=(CYL,(10,2),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=500,BLKSIZE=500)
//*
//*
//STEP04   EXEC PGM=T618P102,PARM='QUARTER PLEASE'
//*STEP02          T618P102  READS DATEFILE AND SETS CONDITION CODE
//*                          EQUAL TO QUARTER OF YEAR
//*                          EG. IF DATEFILE = 7707 COND.CODE = 3
//STEPLIB     DD  DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA DD DSN=COMPARE.CONTRLIB(MMYYPARS),DISP=SHR
//DATEFILE DD DSN=COMPARE.T618F&DAT.,DISP=SHR
//OUTDATA DD DSN=&&STEP04A,DISP=(,PASS),SPACE=(TRK,(1,1),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP05   EXEC PGM=PARROTS,REGION=0192K
//*                PRINT REPORT
//SYSUT1 DD DSN=&&STEP03A,DISP=(OLD,DELETE),
//         DCB=(RECFM=FB,LRECL=500,BLKSIZE=500,BUFNO=1)
//SYSIN DD DSN=COMPARE.CONTRLIB(R&REP.PRT1),DISP=SHR
//      DD DSN=&&STEP04A,DISP=(OLD,DELETE)
//             DD  DSN=COMPARE.CONTRLIB(R&REP.PRT2),DISP=SHR
//             DD  DSN=COMPARE.CONTRLIB(R&REP.PRT3),DISP=SHR
//SYSPRINT DD SYSOUT=A
//PL1DUMP DD SYSOUT=A
//SYSOUT DD DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80  DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,30)
//SYSLIN DD DSN=PARROT.PICTURE,DISP=SHR
//WORK DD UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//     SPACE=(TRK,(9,9),RLSE)
//******************************************************************************
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            * JOB - COMPR804   *
                                                            *      FLOW        *
                                                            ********************
                                ---------------
                               (  COMPARE.    (
                              (   T618F722   (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
           ( COMPARE.     (     |             |
          (  CONTRLIB    (----->|  IERRCO00   |
           ( (R302SORT)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (   &&STEP01A  (
                               (              (
                                ---------------
                                       |
                                       |
                                       -------------------
                                       |                 |
                                       V                 |
             ---------------    ---------------          |
            (  COMPARE.   (     |             |          |
           (   CONTRLIB  (----->|   PARROTL   |          |
            (  (R302PRRT) (     |             |          |
             --------------     ---------------          |
                                       |                 |
                                       |                 |
                                       |                 |
                                       |                 |
                                       V                 |
                                ---------------          |
                                |             |          |
                                |             |          |
                                |        ------          |
                                |       /                |
                                --------                 |
                                                         |
                                       -------------------
                                       |
                                       V
                                       |
                                       |
                                       |
                                       V
                   -----------------------------------------
                   |                   |                   |
                   |                   |                   |
                   V                   V                   V
            ---------------     ---------------     ---------------
            |             |     |             |     |             |
            |  IERRCO00   |     |   IERRCO00  |     |   IERRCO00  |
            |SYSIN COMPARE|     |SYSIN COMPARE|     |SYSIN COMPARE|
            |CONTRLIB     |     | CONTRLIB    |     | CONTRLIB    |
            |(R303SORT)   |     | (R303SORT)  |     | (R305SORT)  |
            |             |     |             |     |             |
            ---------------     ---------------     ---------------
                   |                   |                   |
                   V                   V                   V
            ---------------     ---------------     ---------------
           (              (    (              (    (              (
          (   &&STEP02A  (    (   &&STEP03A  (    (   &&STEP04A  (
           (              (    (              (    (              (
            ---------------     ---------------     ---------------
                   |                   |                   |
                   |                   |                   |
                   |                   |                   |
                   V                   V                   V
            ---------------     ---------------     ---------------
            |             |     |             |     |             |
            |    PARROTL  |     |   PARROTL   |     |   PARROTL   |
            |SYSIN COMPARE|     |SYSIN COMPARE|     |SYSIN COMPARE|
            | CONTRLIB    |     | CONTRLIB    |     | CONTRLIB    |
            | (R303PRRT)  |     | (R304PRRT)  |     | (R305PRRT)  |
            |             |     |             |     |             |
            ---------------     ---------------     ---------------
                   |                   |                   |
                   |                   |                   |
                   |                   |                   |
                   |                   |                   |
                   V                   V                   V
            ---------------     ---------------     ---------------
            |             |     |             |     |             |
            |             |     |             |     |             |
            |        ------     |         -----     |         -----
            |       /           |        /          |        /
            --------            ---------           ---------
NEWPAGEJC
                                                            ********************
                                                            *     COMPARE      *
                                                            * PROC - COMPR804  *
                                                            *      JCL         *
                                                            ********************
./ ADD NAME=COMPR804,LIST=ALL
//COMPR804     PROC  NEW=722,REP=3
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=IERRCO00,REGION=0130K
//*                SORT
//SYSOUT       DD SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SORTLIB      DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK02     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTOUT      DD DSN=&&STEP01A,DISP=(,PASS),UNIT=SYSDA,
//     DCB=(RECFM=FB,LRECL=600,BLKSIZE=1200),
//             SPACE=(TRK,(50,19),RLSE)
//SORTIN DD DSN=COMPARE.T618F&NEW,DISP=SHR
//SYSUDUMP     DD SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(R302SORT),DISP=SHR
//*
//STEP02   EXEC PGM=PARROTL,REGION=0192K
//*                PRINT REPORT
//SYSOUT       DD   SYSOUT=A
//SYSPRINT     DD   SYSOUT=A
//SYSUDUMP     DD   SYSOUT=A
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=1680,RECFM=FB),
//             SPACE=(TRK,(9,9),RLSE)
//SYSUT1   DD DSN=&&STEP01A,DISP=(OLD,PASS)
//SYSIN   DD DSN=COMPARE.CONTRLIB(R&REP.02PRRT),DISP=SHR
//*
//STEP03   EXEC PGM=IERRCO00,REGION=0130K
//*                SORT
//SYSOUT       DD SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SORTLIB      DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK02     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTOUT      DD DSN=&&STEP02A,DISP=(,PASS),UNIT=SYSDA,
//     DCB=(RECFM=FB,LRECL=600,BLKSIZE=1200),
//             SPACE=(TRK,(50,19),RLSE)
//SORTIN  DD DSN=&&STEP01A,DISP=(OLD,DELETE)
//SYSUDUMP     DD SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(R303SORT),DISP=SHR
//*
//STEP04   EXEC PGM=PARROTL,REGION=0192K
//*                PRINT REPORT
//SYSOUT       DD   SYSOUT=A
//SYSPRINT     DD   SYSOUT=A
//SYSUDUMP     DD   SYSOUT=A
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=1680,RECFM=FB),
//             SPACE=(TRK,(9,9),RLSE)
//SYSUT1   DD DSN=&&STEP02A,DISP=(OLD,PASS)
//SYSIN   DD DSN=COMPARE.CONTRLIB(R&REP.03PRRT),DISP=SHR
//*
//STEP05   EXEC PGM=IERRCO00,REGION=0130K
//*                SORT
//SYSOUT       DD SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SORTLIB      DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK02     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTOUT      DD DSN=&&STEP01A,DISP=(,PASS),UNIT=SYSDA,
//     DCB=(RECFM=FB,LRECL=600,BLKSIZE=1200),
//             SPACE=(TRK,(50,19),RLSE)
//SORTIN  DD DSN=&&STEP02A,DISP=(OLD,DELETE)
//SYSUDUMP     DD SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(R304SORT),DISP=SHR
//*
//STEP06   EXEC PGM=PARROTL,REGION=0192K
//*                PRINT REPORT
//SYSOUT       DD   SYSOUT=A
//SYSPRINT     DD   SYSOUT=A
//SYSUDUMP     DD   SYSOUT=A
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=1680,RECFM=FB),
//             SPACE=(TRK,(9,9),RLSE)
//SYSUT1    DD DSN=&&STEP01A,DISP=(OLD,PASS)
//SYSIN   DD DSN=COMPARE.CONTRLIB(R&REP.04PRRT),DISP=SHR
//*
//STEP07   EXEC PGM=IERRCO00,REGION=0130K
//*                SORT
//SYSOUT       DD SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SORTWK01     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTLIB      DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK02     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03     DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTOUT      DD DSN=&&STEP04A,DISP=(,PASS),UNIT=SYSDA,
//     DCB=(RECFM=FB,LRECL=600,BLKSIZE=1200),
//             SPACE=(TRK,(50,19),RLSE)
//SORTIN   DD DSN=&&STEP01A,DISP=(OLD,DELETE)
//SYSUDUMP     DD SYSOUT=A
//SYSIN   DD DSN=COMPARE.CONTRLIB(R&REP.05PRRT),DISP=SHR
//*
//STEP08   EXEC PGM=PARROTL,REGION=0192K
//*                PRINT REPORT
//SYSOUT       DD   SYSOUT=A
//SYSPRINT     DD   SYSOUT=A
//SYSUDUMP     DD   SYSOUT=A
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=1680,RECFM=FB),
//             SPACE=(TRK,(9,9),RLSE)
//SYSUT1   DD DSN=&&STEP04A,DISP=(OLD,DELETE)
//SYSIN  DD DSN=COMPARE.CONTRLIB(R305PRRT),DISP=SHR
//*
//*********************************@********************************************
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            * JOB - COMPR805   *
                                                            *      FLOW        *
                                                            ********************
                      ---------------     ---------------
                     (  COMPARE.    (    (  COMPARE.    (
                    (   T618F724   (    (   T618F824   (
                     (              (    (              (
                      ---------------     ---------------
                             |                   |
                             |                   |
                             |                   |
                             V                   V
  ---------------     ---------------     ---------------      --------------
 (  COMPARE.    (     |             |     |             |     ( COMPARE.    (
(   CONTRLIB   (----->|    B1801    |     |   B1801     |<---( CONTRLIB   (
 (  (R313B181)  (     |             |     |             |     ( (R313B182)  (
  ---------------     ---------------     ---------------      --------------
                             |                   |
                             |                   |
                             ---------------------
                                       |
                                       V
            ---------------     ---------------
           (  COMPARE     (     |             |
          (   CONTRLIB   (----->|  IERRCO00   |
           (  (R313SORT)  (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (    &&STEP03A (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
           (  COMPARE.    (     |             |
          (   CONTRLIB   (----->|   PARROTL   |
           (  (R303PRRT)  (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       V
                                ---------------
                                |             |
                                |         -----
                                |        /
                                ---------
NEWPAGEJC
                                                            ********************
                                                            *     COMPARE      *
                                                            * JOB - COMPR805   *
                                                            *         JCL      *
                                                            ********************
//COMPR805 PROC REP='313',OLD='724',NEW='824'
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=B1801,REGION=0120K
//SYSPRINT  DD SYSOUT=A
//SYSUT1   DD   DSN=COMPARE.T618F&OLD.,DISP=SHR
//SYSUT2   DD DSN=&&STEP01A,DISP=(,PASS),UNIT=SYSDA,
//    DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400),
//        SPACE=(CYL,(9,9),RLSE)
//SYSIN    DD   DSN=COMPARE.CONTRLIB(R&REP.B181),DISP=SHR
//*
//*
//STEP02   EXEC PGM=B1801,REGION=0120K
//SYSPRINT  DD SYSOUT=A
//SYSUT1   DD   DSN=COMPARE.T618F&NEW.,DISP=SHR
//SYSUT2   DD DSN=&&STEP02A,DISP=(,PASS),UNIT=SYSDA,
//    DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400),
//        SPACE=(CYL,(9,9),RLSE)
//SYSIN    DD   DSN=COMPARE.CONTRLIB(R&REP.B182),DISP=SHR
//*
//*
//STEP03   EXEC PGM=IERRCO00,REGION=0130K
//*                SORT
//SYSOUT    DD SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SORTLIB  DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTIN   DD DSN=&&STEP01A,DISP=(OLD,DELETE)
//    DD DSN=&&STEP02A,DISP=(OLD,DELETE)
//SORTWK01  DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK02  DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03  DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTOUT  DD DSN=&&STEP03A,DISP=(,PASS),UNIT=SYSDA,
//     DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400),
//      SPACE=(CYL,(5,11),RLSE)
//SYSIN    DD   DSN=COMPARE.CONTRLIB(R&REP.SORT),DISP=SHR
//*
//*
//STEP04   EXEC PGM=PARROTL,REGION=0192K
//*                PRINT REPORT
//SYSUT1   DD   DSN=&&STEP03A,DISP=(OLD,DELETE)
//SYSIN    DD   DSN=COMPARE.CONTRLIB(R&REP.PRRT),DISP=SHR
//SYSPRINT DD SYSOUT=A
//PL1DUMP DD SYSOUT=A
//SYSOUT DD DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80  DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,30)
//SYSLIN DD DSN=PARROT.PICTURE,DISP=SHR
//WORK DD UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//           SPACE=(TRK,(9,9),RLSE)
//*
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            * JOB - COMPR806   *
                                                            *      FLOW        *
                                                            ********************
                                ---------------
                               (  COMPARE.    (
                              (   T618F722   (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
           (  COMPARE.    (     |             |
          (   CONTRLIB    (---->|     B1801   |
           (  (R314B1801) (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (   &&STEP02A  (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
           ( COMPARE.     (     |             |
          (  CONTRLIB    (----->|  IERRCO00   |
           ( (R314SORT)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               (              (
                              (   &&STEP99A  (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       V
                                       V
            ---------------     ---------------
           (   COMPARE    (     |             |
          (   CONTRLIB   (----->|   PARROTL   |
           (  (R314PRRT)  (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |             |
                                |             |
                                |        ------
                                |       /
                                --------
NEWPAGEJC
                                                            ********************
                                                            *     COMPARE      *
                                                            * PROC - COMPR806  *
                                                            *      JCL         *
                                                            ********************

./ ADD NAME=COMPR806,LIST=ALL
//COMPR806     PROC FILE=722,REP=314
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=B1801,REGION=0120K
//******************************************************************************
//*STEP01          B1801     PUTS MARKER IN FILE TO KNOW PARROT TO
//*                          DISTINGUISH BETWEEN 'OLD' AND 'NEW' RECORDS
//******************************************************************************
//SYSPRINT   DD SYSOUT=A
//SYSUT1    DD DSN=COMPARE.T618F&FILE.,DISP=SHR
//SYSUT2   DD DSN=&&STEP02A,DISP=(,PASS),UNIT=SYSDA,
//      DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400),
//     SPACE=(TRK,(12,12),RLSE)
//SYSIN  DD DSN=COMPARE.CONTRLIB(R314B181),DISP=SHR
//*
//*
//STEP02   EXEC PGM=IERRCO00,REGION=0130K
//*                SORT
//SYSOUT    DD SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SORTLIB  DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTIN   DD DSN=&&STEP02A,DISP=(OLD,DELETE)
//     DD DSN=COMPARE.T618F562,DISP=SHR
//     DD DSN=COMPARE.T618F826,DISP=SHR
//SORTWK01  DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK02  DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03  DD UNIT=SYSDA,SPACE=(CYL,5)
//SORTOUT  DD DSN=&&STEP99A,DISP=(,PASS),UNIT=SYSDA,
//    DCB=(RECFM=FB,LRECL=600,BLKSIZE=1200),
//      SPACE=(CYL,(5,11),RLSE)
//SYSIN  DD DSN=COMPARE.CONTRLIB(R&REP.SORT),DISP=SHR
//STEP03   EXEC PGM=PARROTL,REGION=0192K
//*                PRINT REPORT
//SYSOUT       DD   SYSOUT=A
//SYSPRINT     DD   SYSOUT=A
//SYSUDUMP     DD   SYSOUT=A
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(LRECL=80,BLKSIZE=1680,RECFM=FB),
//             SPACE=(TRK,(9,9),RLSE)
//SYSUT1   DD DSN=&&STEP99A,DISP=(OLD,DELETE)
//SYSIN  DD DSN=COMPARE.CONTRLIB(R&REP.PRRT),DISP=SHR
//******************************************************************************
NEWPAGEJH
                                                            ********************
                                                            *   COMPARE        *
                                                            * PROC - COMPR807  *
                                                            *    INTRO         *
                                                            ********************




                    PURPOSE
                    -------


                    THIS PROCEDURE PRINTS A VARIETY OF FORECAST
                    REPORTS (SEE THE REPORT LIST SECTION FOR
                    DETAILS).


                         THE PROCEDURE IS COMPLICATED, BUT THE
                    MAIN AIMS ARE AS FOLLOWS

                         A) TO CONSTRUCT A SPECIAL SYSIN FOR
                            PARROT CONTAINING CALCULATIONS WHICH
                            ARE CONSTANT AND CALCULATIONS WHICH
                            DEPEND ON THE MONTH OF THE YEAR

                         B) TO MARK THE RELEVANT SALES RECORDS,
                            DEPENDENT ON DATE, IN A WAY WHICH
                            PROVIDES EASY RECOGNITION FOR PARROT.


                         YOU CAN SEE THE EXACT PROCESSING DETAILS
                    IN THE '  STEPS  ' SECTION.
NEWPAGE00
                                                            ********************
                                                            *    COMPARE       *
                                                            * PROC - COMPR807  *
                                                            *     FLOW         *
                                                            ********************
                                  /------------       ---------------
                                 /   PARM     |      (  COMPARE.    (
                                |             |     (   T618F801   (
                                |             |      (              (
                                ---------------       ---------------
                                       |                     |
                                       |                     |
                                       |----------------------
                                       |
                                       V
            ---------------     ---------------       ---------------
           (  COMPARE.    (     |  T618P103   |      (              (
STEP01    (   T618F000   ( ---->| APPLY MONTH |---->(     WORK     (
           (              (     |  IDENTITIES |      (              (
            ---------------     ---------------       ---------------
                    |                  |                      |
                    |                  |                      |
                    |                  |<---------------------|
                    |                  |
                    |                  V
                    |           ---------------       ---------------
                    |           |  IERRCO00   |      (    SORTED    (
STEP02              |           |    SORT     |---->(     DATA     (----------
                    |           |             |      (              (        |
                    |           ---------------       ---------------        |
                    |                  |                                     |
                    |                  |                                     |
                    |----------------->|                                     |
                                       |                                     |
                                       V                                     |
            ---------------     ---------------                              |
           (   COMPARE    (     |  T618P102   |                              |
  STEP03  (   CONTRLIB   (----->|    FIND     |                              |
           ( (MMYYPARS)   (     |   MONTH     |                              |
            ---------------     ---------------                              |
                                       |                                     |
                                      /|                                     |
                    -----------------/ |                                     |
                    |                  |                                     V
            ...............            |                                   -----
            . CONDITION  .             |                                   |   |
            . CODE EQUALS .            |                                   | A |
            .   MONTH     .            |                                   |   |
            ...............            V                                   -----
NEWPAGE00
            ...............            |       ONLY ONE OF THE TWELVE B1801'S
            . CONDITION   .            |       IN STEP04 TO STEP15 IS ACTUALLY
            . CODE EQUALS .            |       EXECUTED. THEREFORE, DEPENDING
            .   MONTH     .            |       ON THE CONDITION CODE, THE WORK
            ...............            |       FILE CONTAINS PARROT CONTROL
                    |                  |       CARDS FOR THE CORRECT MONTH
                    |                  |
                    ------------------>|
                                       |
                                       V
            ---------------     ---------------       ---------------      -----
  STEP04   (  COMPARE     (     |             |      (              (      |   |
    TO    (   CONTRLIB   (----->|   B1801     |-----(     WORK     (------>| B |
  STEP15   (              (     |             |      (              (      |   |
            ---------------     ---------------       --------------       -----

            ---------------     ---------------       ---------------      -----
  STEP16   (  COMPARE     (     |  T618P102   |      (     WORK     (      |   |
          (  CONTRLIB    (----->|CONST.GR10   |---->( CONSTRUCTED  (------>| C |
           ( (MMYYPARS)   (     | FIND MONTH  |      (  GR10 LINE   (      |   |
            ---------------     ---------------       ---------------      -----

            ---------------     ---------------       ---------------
  STEP17   (   COMPARE    (     |   UT432     |      (              (
          (   CONTRLIB   (----->|   COPY      |---->(      WORK    (
           (              (     |             |      (              (
            ---------------     ---------------       ---------------
                                       |                      |
                -----      -----       |                      |
                |   |      |   |       |                      |            -----
                | B |      | C |       |                      |            |   |
                |   |      |   |       |                      |            | A |
                -----      -----       |                      |            |   |
                  |          |         |                      |            -----
                  -------------------->|<----------------------              |
                                       |                                     |
                                       V                                     |
            ---------------     ---------------                              |
           (  COMPARE     (     |             |                              |
  STEP18  (  CONTRLIB    (----->|   PARROT    |<------------------------------
           (              (     |             |
            ---------------     ---------------
                                       |
                                       V
                                ---------------
                                |             |
                                |   REPORT    |
                                |         -----
                                ---------/
NEWPAGEJC
                                                            ********************
                                                            *   COMPARE        *
                                                            * PROC - COMPR     *
                                                            *      JCL         *
                                                            ********************

./ ADD NAME=COMPR807,LIST=ALL
//COMPR807  PROC NEW='824',DAT='000',REP='122'
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01 EXEC PGM=T618P103,PARM='0029,0027,18,0452,S'
//******************************************************************************
//* STEP01      MARK RECORDS WITH MONTH NUMBERS
//*             TAKING START POINT FROM DATEFILE
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA DD DSN=COMPARE.T618F&NEW.,DISP=SHR,
//         DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//OUTDATA DD DSN=&&STEP01A,DISP=(,PASS),SPACE=(CYL,(10,2),RLSE),
//         UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//DATEFILE DD DSN=COMPARE.T618F&DAT.,DISP=SHR
//*
//*
//STEP02   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP02              IERRCO00       SORT.
//SYSIN  DD DSN=COMPARE.CONTRLIB(R&REP.SRT1),DISP=SHR
//SORTLIB  DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT   DD   SYSOUT=A
//SORTWK01 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK02 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTWK03 DD   UNIT=SYSDA,SPACE=(CYL,10,RLSE,CONTIG)
//SORTIN DD DSN=&&STEP01A,DISP=(OLD,DELETE),
//         DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//      DD DSN=COMPARE.T618F562,DISP=SHR
//SORTOUT DD DSN=&&STEP02A,DISP=(,PASS),SPACE=(CYL,(10,2),RLSE),
//     UNIT=SYSDA,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//*
//*
//STEP03  EXEC PGM=T618P102,PARM='MONTHNO PLEASE'
//******************************************************************************
//*STEP03              T618P102       THIS PROGRAM READS THE CYCLE START
//*                                   DATE AND SETS CONDITION CODE EQUAL
//*                                   TO CALENDAR START MONTH
//*                                          E.G. DATE = 01.77, COND = 1
//*                                                      04.77         4
//*                                                      07.77         7
//*                                                      10.77        10
//******************************************************************************
//STEPLIB      DD  DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA  DD DSN=COMPARE.CONTRLIB(MMYYPARS),DISP=SHR
//DATEFILE DD DSN=COMPARE.T618F&DAT.,DISP=SHR
//OUTDATA   DD DUMMY,DCB=BLKSIZE=80
//*
//STEP04   EXEC PGM=B1801,COND=(01,NE,STEP03),REGION=0120K
//******************************************************************************
//* STEPS 04 TO 15           CREATE TEMP.DATA SETS DEPENDENT ON MONTH FOR
//*                          LATER CONCATENATION AS PARROT SYSIN.
//*                          ALSO CREATES INPTDATA FOR RUN OF T618P102
//*                          WICH CREATES GR10 LINES FOR PARROT.
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY01),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM01),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM01),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP05   EXEC PGM=B1801,COND=(02,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY02),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM02),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM02),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP06   EXEC PGM=B1801,COND=(03,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY03),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM03),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM03),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP07   EXEC PGM=B1801,COND=(04,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY04),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM04),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM04),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP08   EXEC PGM=B1801,COND=(05,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY05),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM05),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM05),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP09   EXEC PGM=B1801,COND=(06,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY06),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM06),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM06),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP10   EXEC PGM=B1801,COND=(07,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY07),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM07),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM07),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP11   EXEC PGM=B1801,COND=(08,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY08),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM08),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM08),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP12   EXEC PGM=B1801,COND=(09,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY09),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM09),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM09),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP13   EXEC PGM=B1801,COND=(10,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY10),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM10),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM10),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP14   EXEC PGM=B1801,COND=(11,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY11),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM11),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM11),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP15   EXEC PGM=B1801,COND=(12,NE,STEP03),REGION=0120K
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DSN=COMPARE.CONTRLIB(R&REP.MY12),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LM12),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.LMAL),DISP=SHR
//          DD DSN=COMPARE.CONTRLIB(R&REP.TM12),DISP=SHR
//DD1    DD DSN=&&CSTEP01A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD2    DD DSN=&&CSTEP02A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//      SPACE=(TRK,(3,3),RLSE)
//DD3       DD DSN=&&CSTEP03A,DISP=(,PASS),UNIT=SYSDA,
//       DCB=(RECFM=FB,LRECL=80,BLKSIZE=80),
//       SPACE=(TRK,(1,1),RLSE)
//SYSUDUMP     DD   SYSOUT=A
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL120),DISP=SHR
//*
//*
//STEP16   EXEC PGM=T618P102,PARM='MONTHNO PLEASE'
//******************************************************************************
//* STEP16                   CREATES GR10 FOR PARROT SYSIN.
//*                          THIS SECOND EXEC NEEDED SINCE INPTDATA
//*                          DEPENDED ON MONTH
//STEPLIB   DD DSN=COMPARE.PROGLIB,DISP=SHR
//INPTDATA  DD DSN=&&CSTEP03A,DISP=(OLD,DELETE)
//DATEFILE  DD DSN=COMPARE.T618F&DAT.,DISP=SHR
//OUTDATA  DD DSN=&&STEP99A,DISP=(,PASS),SPACE=(CYL,(1,1),RLSE),
//     UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
//*
//*
//STEP17   EXEC PGM=PARROTL,REGION=0192K
//SYSUT1 DD DSN=&&STEP02A,DISP=(OLD,DELETE)
//SYSIN  DD DSN=COMPARE.CONTRLIB(R&REP.PRT1),DISP=SHR
//    DD DSN=&&STEP0XA,DISP=(OLD,DELETE)
//       DD DSN=COMPARE.CONTRLIB(R&REP.PRT2),DISP=SHR
//     DD DSN=&&CSTEP01A,DISP=(OLD,DELETE)
//       DD DSN=COMPARE.CONTRLIB(R&REP.PRT3),DISP=SHR
//     DD DSN=&&CSTEP02A,DISP=(OLD,DELETE)
//       DD DSN=COMPARE.CONTRLIB(R&REP.PRT4),DISP=SHR
//SYSPRINT DD SYSOUT=A
//PL1DUMP DD SYSOUT=A
//SYSOUT DD DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80  DD SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB DD DSN=SYS1.SORTLIB,DISP=SHR
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,30)
//SYSLIN DD DSN=PARROT.PICTURE,DISP=SHR
//WORK DD UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//           SPACE=(TRK,(9,9),RLSE)
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR850  *
                                                             *     INTRO       *
                                                             *******************


            PURPOSE
            -------

                    THE PURPOSE OF THESE PROCS IS TO PRODUCE
                    R052  AND  R054
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR850  *
                                                             *     FLOW        *
                                                             *******************
                                ---------------
                               ( COMPARE.T618F(
                              ( 562/552/826/ (
                               ( 701/724      (
                                ---------------
            X=0                        |
              2                        |
              4                        |
                                       |
                                       V
            ---------------     ---------------
STEP01     ( COMPARE.     (     |IERCO000     |
          (  CONTRLIB    (----->| (SORT)      |
           ( (SRTCP55X)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               ( WORKFILE     (
                              (              (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP02     ( COMPARE.     (     | PARROT      |
          (  CONTRLIB    (----->|             |
           ( (R05XPRT1)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |R05X REPORT  |
                                |             |
                                |       /-----|
                                --------


NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR850  *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR850,LIST=ALL
//COMPR850     PROC  SORT=552,REP=052
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP01              IERRCO00       SORTS THE INPUT FILES IN THE REQUIRED
//*                                SEQUENCE
//******************************************************************************
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT       DD   SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SYSUDUMP     DD   SYSOUT=A
//SORTIN       DD   DSN=COMPARE.T618F562,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F552,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F826,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F724,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F701,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTOUT      DD   DSN=&&T618R050,DISP=(,PASS,DELETE),
//             UNIT=SYSDA,SPACE=(CYL,(10,1),RLSE),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK02     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK03     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK04     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SYSIN        DD   DSN=COMPARE.CONTRLIB(SRTCP&SORT.),DISP=SHR
//*
//*
//STEP02   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP02              PARROT         PRINTS THE REPORT
//*                                R050
//*                                R052
//*                                R054
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//PL1DUMP      DD   SYSOUT=A
//SYSOUT       DD   DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSUT1       DD   DSN=&&T618R050,DISP=(OLD,PASS)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03     DD   AFF=SORTWK01,SPACE=(CYL,30),UNIT=SYSDA
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//             SPACE=(TRK,(9,9),RLSE)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(R&REP.PRT1),DISP=SHR
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR855 *
                                                             *     INTRO       *
                                                             *******************


            PURPOSE
            -------

                    THE PURPOSE OF THESE PROCS IS TO PRODUCE
                    R055
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR855 *
                                                             *     FLOW        *
                                                             *******************
                                ---------------
                               ( COMPARE.T618F(
                              ( 562/552/724  (
                               (              (
                                ---------------
            X=0                        |
              2                        |
              4                        |
                                       |
                                       V
            ---------------     ---------------
STEP01     ( COMPARE.     (     |IERCO000     |
          (  CONTRLIB    (----->| (SORT)      |
           ( (SRTCP555)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               ( WORKFILE     (
                              (              (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP02     ( COMPARE.     (     | PARROT      |
          (  CONTRLIB    (----->|             |
           ( (R055PRT1)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                | R055 REPORT |
                                |             |
                                |       /-----|
                                --------


NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR855 *
                                                             *      JCL        *
                                                             *******************


./ ADD NAME=COMPR855,LIST=ALL
//COMPR855     PROC  SORT=555,REP=055
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP01              IERRCO00       SORTS THE INPUT FILES IN THE REQUIRED
//*                                SEQUENCE
//******************************************************************************
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT       DD   SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SYSUDUMP     DD   SYSOUT=A
//SORTIN       DD   DSN=COMPARE.T618F562,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F552,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F724,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTOUT      DD   DSN=&&T618R050,DISP=(,PASS,DELETE),
//             UNIT=SYSDA,SPACE=(CYL,(10,1),RLSE),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK02     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK03     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SORTWK04     DD   UNIT=SYSDA,SPACE=(TRK,(50))
//SYSIN        DD   DSN=COMPARE.CONTRLIB(SRTCP&SORT.),DISP=SHR
//*
//*
//STEP02   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP02              PARROT         PRINTS THE REPORT
//*                                R050
//*                                R052
//*                                R054
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//PL1DUMP      DD   SYSOUT=A
//SYSOUT       DD   DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSUT1       DD   DSN=&&T618R050,DISP=(OLD,PASS)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03     DD   AFF=SORTWK01,SPACE=(CYL,30),UNIT=SYSDA
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//             SPACE=(TRK,(9,9),RLSE)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(R&REP.PRT1),DISP=SHR
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR860  *
                                                             *     INTRO       *
                                                             *******************
            PURPOSE
            -------
                    THE PURPOSE OF THIS PROC IS PRODUCE THE
                    SALES PROSPECT REPORT BY MONTH AND
                    COUNTRY WITHIN PRODUCT GROUP (R060)


NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR860  *
                                                             *     FLOW        *
                                                             *******************
                                ---------------
                               ( COMPARE.T618F(
                              ( 562/826/     (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP01     ( COMPARE.     (     |IERCO000     |
          (  CONTRLIB    (----->| (SORT)      |
           ( (SRTCP560)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               ( WORKFILE     (
                              (              (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP02     ( COMPARE.     (     | PARROT      |
          (  CONTRLIB    (----->|             |
           ( (R060PRT1)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |R060 REPORT  |
                                |             |
                                |       /-----|
                                --------

NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR860  *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR860,LIST=ALL
//COMPR860     PROC
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP01              IERRCO00       SORTS THE INPUT FILES IN THE REQUIRED
//*                                SEQUENCE
//******************************************************************************
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT       DD   SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SYSUDUMP     DD   SYSOUT=A
//SORTIN       DD   DSN=COMPARE.T618F562,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F826,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTOUT      DD   DSN=&&T618R060,DISP=(,PASS,DELETE),
//             UNIT=SYSDA,SPACE=(TRK,(200,10),RLSE),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(SRTCP&SORT.),DISP=SHR
//*
//*
//STEP02   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP02              PARROT         PRINTS THE REPORT
//*                                R060
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//PL1DUMP      DD   SYSOUT=A
//SYSOUT       DD   DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSUT1       DD   DSN=&&T618R060,DISP=(OLD,PASS)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03     DD   AFF=SORTWK01,SPACE=(CYL,30),UNIT=SYSDA
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//             SPACE=(TRK,(9,9),RLSE)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(R&REP.PRT1),DISP=SHR

NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR862  *
                                                             *     INTRO       *
                                                             *******************
            PURPOSE
            -------
                    THE PURPOSE OF THIS PROC IS PRODUCE THE
                    PROSPECT CHANGE REPORT  (R062)
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR862  *
                                                             *     FLOW        *
                                                             *******************
                                ---------------
                               ( COMPARE.T618F(
                              ( 564/826/806  (
                               (/562          (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP01     ( COMPARE.     (     |IERCO000     |
          (  CONTRLIB    (----->| (SORT)      |
           ( (SRTCP562)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               ( WORKFILE     (
                              (              (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP02     ( COMPARE.     (     | PARROT      |
          (  CONTRLIB    (----->|             |
           ( (R062PRT1)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |R062 REPORT  |
                                |             |
                                |       /-----|
                                --------

NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR862  *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR862,LIST=ALL
//COMPR862     PROC
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP01              IERRCO00       SORTS THE INPUT FILES IN THE REQUIRED
//*                                SEQUENCE
//******************************************************************************
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT       DD   SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SYSUDUMP     DD   SYSOUT=A
//SORTIN       DD   DSN=COMPARE.T618F562,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F564,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=1800)
//             DD   DSN=COMPARE.T618F826,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F806,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=1800)
//SORTOUT      DD   DSN=&&T618R062,DISP=(,PASS,DELETE),
//             UNIT=SYSDA,SPACE=(TRK,(200,10),RLSE),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(SRTCP&SORT.),DISP=SHR
//*
//*
//STEP02   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP02              PARROT         PRINTS THE REPORT
//*                                R062
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//PL1DUMP      DD   SYSOUT=A
//SYSOUT       DD   DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSUT1       DD   DSN=&&T618R062,DISP=(OLD,PASS)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03     DD   AFF=SORTWK01,SPACE=(CYL,30),UNIT=SYSDA
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//             SPACE=(TRK,(9,9),RLSE)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(R&REP.PRT1),DISP=SHR

NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR864  *
                                                             *     INTRO       *
                                                             *******************
            PURPOSE
            -------
                    THE PURPOSE OF THIS PROC IS PRODUCE THE
                    WHOLE YEAR PROSPECT, BUDGET AND PREVIOUS
                    YEAR'S ACTUALS REPORT BY PRODUCT GROUP
                    (R064)

                    THE PURPOSE OF THIS PROC IS PRODUCE THE
                    WHOLE YEAR PROSPECT, BUDGET AND PREVIOUS
                    YEAR'S ACTUALS FOR EUROPE & AFRICA (R066)
NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR864  *
                                                             *     FLOW        *
                                                             *******************
                                ---------------
                               ( COMPARE.T618F(
                              ( 562/552/826/ (
                               ( 701/         (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP01     ( COMPARE.     (     |IERCO000     |
          (  CONTRLIB    (----->| (SORT)      |
           ( (SRTCP56 4/6 (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               ( WORKFILE     (
                              (              (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP02     ( COMPARE.     (     | PARROT      |
          (  CONTRLIB    (----->|             |
           ( (R064 4/6 PRT(     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |R06 4/6 REP  |
                                |             |
                                |       /-----|
                                --------
NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR864  *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR864,LIST=ALL
//COMPR864     PROC
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP01              IERRCO00       SORTS THE INPUT FILES IN THE REQUIRED
//*                                SEQUENCE
//******************************************************************************
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT       DD   SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SYSUDUMP     DD   SYSOUT=A
//SORTIN       DD   DSN=COMPARE.T618F562,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F542,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F826,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F701,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTOUT      DD   DSN=&&T618R064,DISP=(,PASS,DELETE),
//             UNIT=SYSDA,SPACE=(TRK,(200,10),RLSE),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(SRTCP&SORT.),DISP=SHR
//STEP02   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP02              PARROT         PRINTS THE REPORT
//*                                R064
//*                                R066
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//PL1DUMP      DD   SYSOUT=A
//SYSOUT       DD   DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSUT1       DD   DSN=&&T618R064,DISP=(OLD,PASS)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03     DD   AFF=SORTWK01,SPACE=(CYL,30),UNIT=SYSDA
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//             SPACE=(TRK,(9,9),RLSE)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(R&REP.PRT1),DISP=SHR
NEWPAGEJH
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR868  *
                                                             *     INTRO       *
                                                             *******************
            PURPOSE
            -------
                    THE PURPOSE OF THIS PROC IS PRODUCE THE
                    ACTUAL SALES -MONTH & YTD-AGAINST
                    PREVIOUS YEAR  (R068)


NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR868  *
                                                             *     FLOW        *
                                                             *******************


                                ---------------
                               ( COMPARE.T618F(
                              ( 562/552/724/ (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP01     ( COMPARE.     (     |IERCO000     |
          (  CONTRLIB    (----->| (SORT)      |
           ( (SRTCP568)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               ( WORKFILE     (
                              (              (
                               (              (
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
            ---------------     ---------------
STEP02     ( COMPARE.     (     | PARROT      |
          (  CONTRLIB    (----->|             |
           ( (R068PRT1)   (     |             |
            ---------------     ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                                |R068 REPORT  |
                                |             |
                                |       /-----|
                                --------



NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                            * PROC - COMPR868  *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR868,LIST=ALL
//COMPR868     PROC
//*
//*
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=IERRCO00,REGION=0130K
//******************************************************************************
//*STEP01              IERRCO00       SORTS THE INPUT FILES IN THE REQUIRED
//*                                SEQUENCE
//******************************************************************************
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSOUT       DD   SYSOUT=A,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//SYSUDUMP     DD   SYSOUT=A
//SORTIN       DD   DSN=COMPARE.T618F562,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F552,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//             DD   DSN=COMPARE.T618F724,DISP=(SHR,PASS),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTOUT      DD   DSN=&&T618R068,DISP=(,PASS,DELETE),
//             UNIT=SYSDA,SPACE=(TRK,(200,10),RLSE),
//             DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SORTWK03     DD   UNIT=SYSDA,SPACE=(CYL,5)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(SRTCP&SORT.),DISP=SHR
//*
//*
//STEP02   EXEC PGM=PARROTL,REGION=0192K
//******************************************************************************
//*STEP02              PARROT         PRINTS THE REPORT
//*                                R068
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//PL1DUMP      DD   SYSOUT=A
//SYSOUT       DD   DUMMY,DCB=(RECFM=FB,LRECL=120,BLKSIZE=120)
//PRINT        DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//TW80         DD   SYSOUT=A,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=133)
//SORTLIB      DD   DSN=SYS1.SORTLIB,DISP=SHR
//SYSUT1       DD   DSN=&&T618R068,DISP=(OLD,PASS)
//SORTWK01     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK02     DD   UNIT=SYSDA,SPACE=(CYL,30)
//SORTWK03     DD   AFF=SORTWK01,SPACE=(CYL,30),UNIT=SYSDA
//SYSLIN       DD   DSN=PARROT.PICTURE,DISP=SHR
//WORK         DD   UNIT=SYSDA,DCB=(RECFM=FB,LRECL=80,BLKSIZE=1680),
//             SPACE=(TRK,(9,9),RLSE)
//SYSIN        DD   DSN=COMPARE.CONTRLIB(R&REP.PRT1),DISP=SHR
NEWPAGEJH


                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR890 *
                                                             *     INTRO       *
                                                             *******************


            PURPOSE
            -------

                    THE PURPOSE OF THIS PROC IS TO GATHER
                    INTO ONE FILE (T618F890) ALL THE RECORDS
                    OF THE USER SELECTED FILES (MAX 9 ) USED
                    TO PRODUCE A PARROT FORMAT REPORT


NEWPAGE00
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR890 *
                                                             *     FLOW        *
                                                             *******************


                                ---------------
STEP01                          | UT434       |
                                |(REMOVE COMPA|
                                |RE.T618F890) |
                                ---------------





                                ---------------
                              (  COMPARE.    (   FILE1 TO FILE9
                               ( T618F&FILE1/ (  CAN BE ANY FILE (MAX 9)
                              (  ... TO 9    (   AS DEFINED IN THE INPUT SECTION
                                ---------------  SELECTED BY THE USER
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
STEP02                          | COPY        |
                                |             |
                                |             |
                                ---------------
                                       |
                                       |
                                       |
                                       |
                                       V
                                ---------------
                               ( COMPARE.     (
                              (  T618F890    (
                               (              (
                                ---------------

NEWPAGEJC
                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR890 *
                                                             *      JCL        *
                                                             *******************


./ ADD  NAME=COMPR890,LIST=ALL
//COMPR890     PROC    FILE1=891,FILE2=892,FILE3=893,FILE4=894,        C
//             FILE5=895,FILE6=896,FILE7=897,FILE8=898,FILE9=899
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=UT434,REGION=0080K,
//         PARM='REMOVE DSN=COMPARE.T618F890'
//******************************************************************************
//*STEP01              UT434          REMOVE THE FILE COMPARE.T618F890 BEFORE
//*                                IT IS RECREATED IN //*STEP02 OF THE SAME JOB
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//DD1          DD   DISP=SHR,VOL=REF=COMPARE.POINTER1
//STEP02       EXEC PGM=COPY
//******************************************************************************
//*STEP02              COPY           GATHER INTO ONE OUTPUT FILE (COMPARE.
//*                                T618F890) ALL THE INPUT FILES RECORDS
//*                                SELECTED USING THE SYMBOLIC PARAMETERS
//*                                DEFINED INTO THE JCL EXEC CARD
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//SYSIN        DD   DUMMY
//SYSUT1       DD   DSN=COMPARE.T618F&FILE1,DISP=SHR
//SYSUT2       DD   DSN=COMPARE.T618F890,DISP=(,CATLG,DELETE),
//             VOL=REF=COMPARE.POINTER1,SPACE=(TRK,(200,10)),
//             LABEL=RETPD=25,DCB=(RECFM=FB,LRECL=600,BLKSIZE=2400)
//STEP03       EXEC PGM=COPY
//SYSPRINT     DD   SYSOUT=A
//SYSIN        DD   DUMMY
//SYSUT1       DD   DSN=COMPARE.T618F&FILE2,DISP=SHR
//SYSUT2       DD   DSN=COMPARE.T618F890,DISP=MOD,
//             VOL=REF=COMPARE.POINTER1
//STEP04       EXEC PGM=COPY
//SYSPRINT     DD   SYSOUT=A
//SYSIN        DD   DUMMY
//SYSUT1       DD   DSN=COMPARE.T618F&FILE3,DISP=SHR
//SYSUT2       DD   DSN=COMPARE.T618F890,DISP=MOD,
//             VOL=REF=COMPARE.POINTER1
//STEP05       EXEC PGM=COPY
//SYSPRINT     DD   SYSOUT=A
//SYSIN        DD   DUMMY
//SYSUT1       DD   DSN=COMPARE.T618F&FILE4,DISP=SHR
//SYSUT2       DD   DSN=COMPARE.T618F890,DISP=MOD,
//             VOL=REF=COMPARE.POINTER1
//STEP06       EXEC PGM=COPY
//SYSPRINT     DD   SYSOUT=A
//SYSIN        DD   DUMMY
//SYSUT1       DD   DSN=COMPARE.T618F&FILE5,DISP=SHR
//SYSUT2       DD   DSN=COMPARE.T618F890,DISP=MOD,
//             VOL=REF=COMPARE.POINTER1
//STEP07       EXEC PGM=COPY
//SYSPRINT     DD   SYSOUT=A
//SYSIN        DD   DUMMY
//SYSUT1       DD   DSN=COMPARE.T618F&FILE6,DISP=SHR
//SYSUT2       DD   DSN=COMPARE.T618F890,DISP=MOD,
//             VOL=REF=COMPARE.POINTER1
//STEP08       EXEC PGM=COPY
//SYSPRINT     DD   SYSOUT=A
//SYSIN        DD   DUMMY
//SYSUT1       DD   DSN=COMPARE.T618F&FILE7,DISP=SHR
//SYSUT2       DD   DSN=COMPARE.T618F890,DISP=MOD,
//             VOL=REF=COMPARE.POINTER1
//STEP09       EXEC PGM=COPY
//SYSPRINT     DD   SYSOUT=A
//SYSIN        DD   DUMMY
//SYSUT1       DD   DSN=COMPARE.T618F&FILE8,DISP=SHR
//SYSUT2       DD   DSN=COMPARE.T618F890,DISP=MOD,
//             VOL=REF=COMPARE.POINTER1
//STEP10       EXEC PGM=COPY
//SYSPRINT     DD   SYSOUT=A
//SYSIN        DD   DUMMY
//SYSUT1       DD   DSN=COMPARE.T618F&FILE9,DISP=SHR
//SYSUT2       DD   DSN=COMPARE.T618F890,DISP=MOD,
//             VOL=REF=COMPARE.POINTER1
NEWPAGEJH


                                                             *******************
                                                             *      COMPARE    *
                                                             * PROC - COMPR900 *
                                                             *     INTRO       *
                                                             *******************
         PURPOSE
         -------

         THE PURPOSE OF THIS PROCEDURE IS TO
         GENERATE JCL FOR COMPARE EXECUTIONS


NEWPAGE00


                                                             *******************
                                                             *       COMPARE   *
                                                             * PROC - COMPR900 *
                                                             *      FLOW       *
                                                             *******************


STEP01                         -------------
                             /             |
                             |             |
                             |             |
                             ---------------
                                    |
                                    |
                                    |
                                    |
                                    V
          --------------     ---------------
         ( COMPARE.    (     |             |
        (  CONTRLIB   (----->|    B1801    |
         ( (SEL900)    (     |             |
          --------------     ---------------
                                    |
                                    |--------------------
                                    |                   |
                                    |                   |
                                    V                   V
                              --------------       --------------
                             (             (      (             (
                            (             (---   (   &&D900    (
                             (             (  (   (             (
                              -------------- (    ---------------
                                (             (         |
                                 --------------         |
                                                        |
                                                        |
                                                        |
                                                        |
          --------------     ---------------            |
STEP02   ( COMPARE.    (     |             |            |
        (  CONTRLIB   (--->|   LIBRARY     |            |
         ( (OPSHED)    (     |             |            |
          --------------     ---------------            |
                                    |                   |
                                    |                   |
                                    |                   |
                                    V                   |
                              --------------            |
                             (             (            |
                            (   &&JCL     (             |
                             (             (            |
                              --------------            |
                                    |                   |
                                    |                   |
                                    |                   |
                                    V                   |
STEP03                       ---------------<------------
                             |             |
                             |   T618P900  |
                             |             |
                             ---------------
                                    |
                                    |
                   --------------------------------------
                   |                                    |
                   |                                    |
                   |                                    |
                   V                                    V
              ----------------                    --------------
              |              |                   (             (
              |  REPORT      |                  (   &&INTRDR  (
              |             /                    (             (
              |            /                      --------------
              -------------                             |
                                                        |
                                                        |
                                                        V
                                                 ---------------
                                                 |             |
STEP99                                           |    UT457    |
                                                 |             |
                                                 ---------------
                                                        |
                                                        |
                                                        |
                                                        |
                                                        V
                                                  --------------
                                                 (             (
                                                ( I N T R D R (
                                                 (             (
                                                  --------------


NEWPAGEJC

                                                             *******************
                                                             *    COMPARE      *
                                                             * PROC - COMPR900 *
                                                             *      JCL        *
                                                             *******************

./ ADD NAME=COMPR900,LIST=ALL
//COMPR900   PROC
//******************************************************************************
//*****                       R E S T A R T S                              *****
//******************************************************************************
//*****        THIS PROC MAY BE RESTART WITHOUT RESTRICTION                *****
//******************************************************************************
//STEP01   EXEC PGM=B1801,REGION=0120K
//******************************************************************************
//* STEP01                   SPLITS INPUT DATA AND CONTROL CARDS ONTO DATA
//*                          SETS FOR LATER ACCESS BY GENERATED JOBS.
//******************************************************************************
//SYSPRINT     DD   SYSOUT=A
//SYSUT1   DD DDNAME=INPUT,DCB=BLKSIZE=80
//SYSUT2       DD   DUMMY,DCB=BLKSIZE=80
//D100     DD   DSN=COMPARE.T618D100,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D130     DD   DSN=COMPARE.T618D130,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D140     DD   DSN=COMPARE.T618D140,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D200     DD   DSN=COMPARE.T618D200,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D300     DD   DSN=COMPARE.T618D300,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D310     DD   DSN=COMPARE.T618D310,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D311     DD   DSN=COMPARE.T618D311,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D312     DD   DSN=COMPARE.T618D312,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D700     DD   DSN=COMPARE.T618D700,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D710     DD   DSN=COMPARE.T618D710,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D711     DD   DSN=COMPARE.T618D711,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D712     DD   DSN=COMPARE.T618D712,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D800     DD   DSN=COMPARE.T618D800,DISP=(OLD,KEEP),
//         SPACE=(TRK,(1,1),RLSE),VOL=REF=COMPARE.POINTER1,
//         LABEL=EXPDT=11111
//D900     DD   DSN=&&D900,DISP=(,PASS),SPACE=(TRK,1),
//           DCB=BLKSIZE=80,UNIT=SYSDA
//SYSIN  DD DSN=COMPARE.CONTRLIB(SEL900),DISP=SHR
//******************************************
//*
//STEP02   EXEC PGM=LIBRARY,REGION=0070K,
//             PARM='DEPTH=60,IEX=IEX,NJTA,NRJS'
//******************************************************************************
//* STEP02                   PICKS UP EXECUTION J C L FROM OPS.GUIDE ON LIBRARYN
//******************************************************************************
//MASTER       DD   DSN=LIBRARYN.DOCUMENT,DISP=SHR
//STEPLIB      DD   DSN=SYS2.LIBRN53,DISP=SHR
//SYSPRINT     DD   SYSOUT=A,DCB=(RECFM=FM,LRECL=133,BLKSIZE=133)
//INDEX        DD   SYSOUT=A,DCB=(RECFM=FM,LRECL=133,BLKSIZE=133)
//LIST         DD   SYSOUT=A,DCB=(RECFM=FM,LRECL=133,BLKSIZE=133)
//OSJOB        DD   DSN=&&JCL,SPACE=(TRK,(18,18),RLSE),
//             UNIT=SYSDA,DISP=(NEW,PASS),
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//SYSPUNCH     DD   SYSOUT=B,DCB=BLKSIZE=80
//SYSIN  DD DSN=COMPARE.CONTRLIB(OPSHED),DISP=SHR
//*
//*******************************************
//*
//STEP03       EXEC PGM=T618P900
//******************************************************************************
//* STEP03                   GENERATES STREAM OF DEPENDENT JOBS FROM EXEC JCL
//******************************************************************************
//STEPLIB      DD   DSN=COMPARE.PROGLIB,DISP=SHR
//JCL          DD   DSN=&&JCL,DISP=OLD
//PRINT        DD   SYSOUT=A,DCB=BLKSIZE=133
//INTRDR       DD   DSN=&&INTRDR,DISP=(,PASS),UNIT=SYSDA,SPACE=(TRK,2),
//             DCB=(RECFM=FB,BLKSIZE=80,LRECL=80)
//SORTFILE     DD   DSN=&&SORTFILE,DISP=(,PASS),UNIT=SYSDA,
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=1600),SPACE=(TRK,1)
//SORTWK01     DD   SPACE=(TRK,1),UNIT=SYSDA
//SORTWK02     DD   SPACE=(TRK,1),UNIT=SYSDA
//SORTWK03     DD   SPACE=(TRK,1),UNIT=SYSDA
//OPTION     DD   DSN=&&D900,DISP=(OLD,DELETE)
//SYSUDUMP DD SYSOUT=A
//SYSOUT DD SYSOUT=A
//STEP99   EXEC PGM=UT457,REGION=0080K,COND=(0,NE,STEP03)
//******************************************************************************
//* STEP99                   PUTS J C L OUT ONTO INTERNAL READER
//******************************************************************************
//SYSUDUMP     DD   DUMMY
//SYSUT1       DD   DSN=&&INTRDR,DISP=OLD
//SYSUT2       DD   UNIT=INTRDR
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *   EXECUTION      *
                                                            *      JCL         *
                                                            ********************
//COMPR100 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR100                                                    CARD
                                                                            CARD
//COMPR110 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR110                                                    CARD
                                                                            CARD
//COMPR120 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR120                                                    CARD
                                                                            CARD
//COMPR130 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR130                                                    CARD
                                                                            CARD
//COMPR135 JOB (6180,9),'VAN HEESVELDE',CLASS=B                             CARD
//STEP01   EXEC COMPR130,LISTCTL='1'                                        CARD
                                                                            CARD
//COMPR140 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01  EXEC COMPR100,FILE='001',DATA='140'                               CARD
                                                                            CARD
//COMPR200 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR200                                                    CARD
                                                                            CARD
//COMPR300 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR300                                                    CARD
                                                                            CARD
//COMPR310 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR310                                                    CARD
//STEP01.DATA DD *                                                          CARD
                                                                            CARD
//COMPR311 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01  EXEC COMPR310,MASTER='F284',REPORT='R211',BUDGIE='FF',            CARD
//         DATA='311'                                                       CARD
                                                                            CARD
//COMPR312 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR310,MASTER='F285',REPORT='212',BUDGIE='FP',            CARD
//      DATA='312'                                                          CARD
                                                                            CARD
//COMPR320 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR320,MASTER='F283',REPORT='R210',                       CARD
                                                                            CARD
//COMPR321 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR320,MASTER='F284',REPORT='R211',                       CARD
//         PARAM='YYDDD'                                                    CARD
                                                                            CARD
//COMPR322 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR320,MASTER='F285',REPORT='R212',                       CARD
//         PARAM='YYDDD'                                                    CARD
                                                                            CARD
//COMPR350 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR350                                                    CARD
                                                                            CARD
//COMPR450 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR450                                                    CARD
                                                                            CARD
//COMPR455 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01       EXEC COMPR540,INPTDAT=820,FCSTCMP=822,FCSTCON=824,      C    CARD
//             FCSTBLY=826,PARAM1=MAPC,PARAM2=F                             CARD
                                                                            CARD
//COMPR500     JOB  (6180,0001,,,104),'H VAN HEESVELDE',CLASS=A             CARD
//STEP01       EXEC COMPR500                                                CARD
                                                                            CARD
//COMPR510     JOB  (6180,0001,,,104),'H VAN HEESVELDE',CLASS=A             CARD
//STEP01       EXEC COMPR510                                                CARD
                                                                            CARD
//COMPR520  JOB (6180,9),'H VAN HEESEVELDE',CLASS=A                         CARD
//*****STEP02 IN COMPR520 = 0 IS THE CONDITION TO RELEASE THE NEXT JOB      CARD
//STEP01       EXEC COMPR520                                                CARD
                                                                            CARD
//COMPR530     JOB  (6180,9),'H VAN HEESVELDE',CLASS=A                      CARD
//STEP01       EXEC COMPR530,INPTDAT='520(0)',FCSTCMP='522(+1)',       C    CARD
//             BACK='522(0)',PARAM1=MAPC,PARAM2=A,VAMPOUT='SYSOUT=A'        CARD
//STEP01       EXEC COMPR530,INPTDAT=540,FCSTCMP='542(+1)',            C    CARD
//             BACK='542(0)',PARAM1=MAPC,PARAM2=L                           CARD
//STEP01       EXEC COMPR530,INPTDAT=550,FCSTCMP='552(+1)',            C    CARD
//             BACK='552(0)',PARAM1=MAPC,PARAM2=L                           CARD
//STEP01       EXEC COMPR530,INPTDAT=560,FCSTCMP='562(+1)',            C    CARD
//             BACK='562(0)',PARAM1=MAPC,PARAM2=A                           CARD
                                                                            CARD
//COMPR540     JOB  (6180,9),'H VAN HEESVELDE',CLASS=A                      CARD
//STEP01       EXEC COMPR540,INPTDAT=720,FCSTCMP=701,FCSTCON=724,      C    CARD
//             FCSTBLY=726,PARAM1=MAPC,PARAM2=T                             CARD
//STEP01       EXEC COMPR540,INPTDAT=820,FCSTCMP=824,FCSTCON=801,      C    CARD
//             FCSTBLY=826,PARAM1=MAPC,PARAM2=F                             CARD
                                                                            CARD
//COMPR610 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR610                                                    CARD
                                                                            CARD
//COMPR620 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR620                                                    CARD
                                                                            CARD
//COMPR621 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR620,INFILE='284', OUTFILE='784'                        CARD
                                                                            CARD
//COMPR622 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR620,INFILE='285',OUTFILE='785'                         CARD
                                                                            CARD
//COMPR650 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR610,IN='040',OUT='745',DAT='002'                       CARD
                                                                            CARD
//COMPR651 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR620,INFILE='283',OUTFILE='793'                         CARD
                                                                            CARD
//COMPR652 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR620,INFILE='284',OUTFILE='794'                         CARD
                                                                            CARD
//COMPR653 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR620,INFILE='285',OUTFILE='795'                         CARD
                                                                            CARD
//COMPR660 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR610,IN='745',OUT='740',DAT='002'                       CARD
                                                                            CARD
//COMPR661 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR620,INFILE='793',OUTFILE='783'                         CARD
                                                                            CARD
//COMPR662 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR620,INFILE='794',OUTFILE='784'                         CARD
                                                                            CARD
//COMPR663 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR620,INFILE='795',OUTFILE='785'                         CARD
                                                                            CARD
//COMPR700 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01  EXEC COMPR200,BUDGIE='BV',FILE='740',DATA='700'                   CARD
                                                                            CARD
//COMPR705 JOB (6180,9,,,052),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR110,INFILE='724',OUTFILE='704'                         CARD
                                                                            CARD
//COMPR710 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR310,BUDGIE='BA',MASTER='F783',REPORT='R210',           CARD
//      DATA='710'                                                          CARD
                                                                            CARD
//COMPR711 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR310,BUDGIE='BF',MASTER='F784',REPORT='R211',           CARD
//           DATA='711'                                                     CARD
                                                                            CARD
//COMPR712 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01  EXEC COMPR310,BUDGIE='BP',MASTER='F785',REPORT='R212',            CARD
//           DATA='712'                                                     CARD
                                                                            CARD
//COMPR750 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR450,VOL='740',PRICE='78',OUT='720'                     CARD
                                                                            CARD
//COMPR755 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01       EXEC COMPR540,INPTDAT=720,FCSTCMP=722,FCSTCON=724,      C    CARD
//             FCSTBLY=726,PARAM1=MAPC,PARAM2=T                             CARD
                                                                            CARD
//COMPR760 JOB (6180,9,,,104),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR350,FILES='78'                                         CARD
                                                                            CARD
//COMPR770 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR200,BUDGIE='BV',FILE='745',DATA='770'                  CARD
                                                                            CARD
//COMPR775 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR310,BUDGIE='BA',MASTER='F793',REPORT='R210'            CARD
                                                                            CARD
//COMPR776 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR310,BUDGIE='BF',MASTER='F794',REPORT='R211'            CARD
                                                                            CARD
//COMPR777 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR310,BUDGIE='BP',MASTER='F795',REPORT='R212'            CARD
                                                                            CARD
//COMPR780 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR450,VOL='745',PRICE='79',OUT='730'                     CARD
                                                                            CARD
//COMPR785 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR540,INPTDAT='730',FCSTCMP='703',FCSTCON='XXX',         CARD
//     FCSTBLY='XXX',PARAM1=MAPC,PARAM2='B'                                 CARD
                                                                            CARD
//COMPR790 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR350,FILES='79'                                         CARD
                                                                            CARD
//COMPR795 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR350,FILES='79'                                         CARD
//*  THIS JOB INACTIVE AT PRESENT                                           CARD
                                                                            CARD
//COMPR800 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01   EXEC COMPR800                                                    CARD
                                                                            CARD
//COMPR850     JOB  (6180,9),'H VAN HEESVELDE',CLASS=A                      CARD
//STEP01       EXEC COMPR850,SORT=550,REP=050                               CARD
                                                                            CARD
//COMPR852     JOB  (6180,9),'H VAN HEESVELDE',CLASS=A                      CARD
//STEP01       EXEC COMPR850,SORT=552,REP=052                               CARD
                                                                            CARD
//COMPR854     JOB  (6180,9),'H VAN HEESVELDE',CLASS=A                      CARD
//STEP01       EXEC COMPR850,SORT=554,REP=054                               CARD
                                                                            CARD
//COMPR855     JOB  (6180,9),'H VAN HEESEVELDE',CLASS=A                     CARD
//STEP01       EXEC COMPR855                                                CARD
                                                                            CARD
//COMPR860     JOB  (6180,9),'H VAN HEESVELDE',CLASS=B                      CARD
//STEP01       EXEC COMPR860                                                CARD
                                                                            CARD
//COMPR862     JOB  (6180,9),'H VAN HEESVELDE',CLASS=B                      CARD
//STEP01       EXEC COMPR862                                                CARD
                                                                            CARD
//COMPR864     JOB  (6180,9),'H VAN HEESVELDE',CLASS=B                      CARD
//STEP01       EXEC COMPR864                                                CARD
                                                                            CARD
//COMPR866     JOB  (6180,9),'H VAN HEESVELDE',CLASS=B                      CARD
//STEP01       EXEC COMPR864 SORT=866,REP=066                               CARD
                                                                            CARD
//COMPR868     JOB  (6180,9),'H VAN HEESVELDE',CLASS=B                      CARD
//STEP01       EXEC COMPR868                                                CARD
                                                                            CARD
//COMPR870 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01       EXEC COMPR804                                                CARD
//COMPR874     JOB  (6180,9),'FOR VAN HEESEVELDE',CLASS=B                   CARD
//STEP01       EXEC COMPR804,NEW=722,REP=4                                  CARD
                                                                            CARD
                                                                            CARD
//COMPR875 JOB (6180,9,,,128),'VAN HEESVELDE',CLASS=B                       CARD
//STEP01       EXEC COMPR804,NEW=703                                        CARD
NEWPAGE00
                                                            ********************
                                                            *      COMPARE     *
                                                            *      RERUNS      *
                                                            *  INSTRUCTIONS    *
                                                            ********************

            JOB NUMBER       ACTION BEFORE RERUN
            ==========       ===================

            COMPR100         NONE
            COMPR110         NONE
            COMPR120         NONE
            COMPR130         RESET CMF.BACKUP
            COMPR135         NONE
            COMPR140         NONE
            COMPR200         REST COMPARE.T618F040
            COMPR300         NONE
            COMPR310         RESET COMPARE.T618F283
            COMPR311         RESET COMPARE.T618F284
            COMPR312         RESET COMPARE.T618F285
            COMPR320         RESET COMPARE.T618F283
            COMPR321         RESET COMPARE.T618F284
            COMPR322         RESET COMPARE.T618F285
            COMPR350         NONE
            COMPR450         NONE
            COMPR455         NONE
            COMPR500         NONE
            COMPR510         NONE
            COMPR520         RESET COMPARE.T618F720 AND 530
            COMPR530         NONE
            COMPR540         NONE
            COMPR610         RESET COMPARE.T618F740
            COMPR620         RESET COMPARE.T618F783
            COMPR621         RESET COMPARE.T618F784
            COMPR622         RESET COMPARE.T618F785
            COMPR650         RESET COMPARE.T618F745
            COMPR651         RESET COMPARE.T618F793
            COMPR652         RESET COMPARE.T618F794
            COMPR653         RESET COMPARE.T618F795
            COMPR660         RESET COMPARE.T618F740
            COMPR661         RESET COMPARE.T618F783
            COMPR662         RESET COMPARE.T618F784
            COMPR663         RESET COMPARE.T618F785
            COMPR700         RESET COMPARE.T618F740
            COMPR705         NONE
            COMPR710         RESET COMPARE.T618F783
            COMPR711         RESET COMPARE.T618F784
            COMPR712         RESET COMPARE.T618F785
            COMPR750         NONE
            COMPR755         NONE
            COMPR760         NONE
            COMPR770         RESET COMPARE.T618F745
            COMPR775         RESET COMPARE.T618F793
            COMPR776         RESET COMPARE.T618F794
            COMPR777         RESET COMPARE.T618F795
            COMPR780         NONE
            COMPR785         NONE
            COMPR790         NONE
            COMPR795         NONE
            COMPR800         NONE
            COMPR850         NONE
            COMPR852         NONE
            COMPR855         NONE
            COMPR860         NONE
            COMPR862         NONE
            COMPR864         NONE
            COMPR866         NONE
            COMPR868         NONE
            COMPR870         NONE
            COMPR874         NONE
            COMPR875         NONE
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *     RESTARTS     *
                                                            *   INSTRUCTIONS   *
                                                            ********************
                   RESTARTING  JOBS
                   ================
                   RESTARTS CREATE NO GREAT PROBLEM
                   WITHIN THE COMPARE  SYSTEM. GENERALLY SPEAKING,
                   WHEN A JOB FAILS IT CAN BE RERUN WITHIUT PRIOR
                   ACTION. IN THESE CASES RESTARTING WITHIN A JOB
                   MAKES NO GREAT SAVING IN COMPUTER TIME USAGE.
                   THERE ARE, HOWEVER, SOME EXCEPTIONS, I.E. SOME
                   JOBS WHICH REQUIRE RESETS ETC. BEFORE RERUNNING
                   AND WHICH MAY REQUIRE RESTARTING AT A POINT OTHER
                   THAN THE FIRST STEP.
                        INSTRUCTIONS ARE PROVIDED IN THE FORM OF
                   JCL NOTES IN EACH PROC, TELLING YOU  WHERE
                   TO RESTART FOR ANY GIVEN ABEND. NOTE ,
                   HOWEVER, THAT A PROC CAN BE USED IN MANY JOBS,
                   SO BE SURE TO CONSULT THE CORRECT RESTART
                   PANEL IN THE NOTATION.
                        WHEN YOU HAVE TO RESTART A COMPARE JOB
                   FROM A POINT OTHER THAN STEP01, YOU WILL,
                   UNFORTUNATELY, HAVE TO PUNCH THE JOB &
                   EXEC CARDS TO ACHIEVE THIS. IT IS NOT POSSIBLE
                   TO USE THE AUTOMATIC JOB GENERATOR WHICH
                   IS EMPLOYED FOR NORMAL SCHEDULING (COMPR900).
                        WHEN YOU PUNCH THESE CARDS, USE THE
                   RESTART PARAMETER IN THE JOB CARD

                        EG TO RESTART JOB COMPR311 FROM STEP09
                           CODE THE JOB CARD AS FOLLOWS

                   //COMPR311 JOB (6180,9),'VAN HEESVELDE',CLASS=N,
                              RESTART=STEP01.STEP09

                   NOTE ALSO THAT THE OVERRIDES MUST BE SUPPLIED
                   (FOR COMPR311 IT WOULD BE

                   //STEP01 EXEC COMPR310,MASTER='F284',REPORT='R211',
                   //     BUDGIE='FF',DATA='311'
                   //STEP09.SYSUT1 DD DSN=COMPARE.T618F284(0),DISP=SHR
                                                          ===
                                                          ===
                                                          ===

                        ALSO, REMEMBER THAT OTHER COMPARE JOBS
                   WILL BE WAITING ON 'HOLD' IN THE QUEUE, SO
                   DON'T FORGET TO ADD THE RELEASE AT THE END
                   OF YOUR DECK TO START UP THE REST OF THE SYSTEM
                   UPON SUCCESSFUL COMPLETION OF YOUR RESTART.
NEWPAGE00
                                                            ********************
                                                            *     COMPARE      *
                                                            *   DEPENDENCIES   *
                                                            *                  *
                                                            ********************


                   DEPENDENCY
                   ==========


                   THE COMPARE'S SYSTEMS PROCS ARE STRUCTURED
                   INTO LOGICAL TASKS. MAXIMUM USE HAS BEEN
                   MADE OF SYMBOLIC PARAMETERS FOR ECONOMY
                   OF JCL.
                        THUS A PARTICULAR PROCEDURE CAN BE
                   CALLED IN DIFFERENT PHASES TO HANDLE SIMILAR
                   TASKS
                        E.G. PROCEDURE COMPR200 IS CALLED
                             IN JOB COMPR200 TO UPDATE THE
                             FORECAST VOLUMES AND IN JOB
                             COMPR700 TO UPDATE BUDGET
                             VOLUMES.
                        FOR DEPENDENCIES WITHIN THE SYSTEM,
                   HOWEVER, THE JOB NAMES HEVE BEEN STRUCTURED
                   TO ALLOW YOU TO FOLLOW THIS RULE -
                             'JOBS MUST BE RUN IN STRICT
                              NUMERICAL SEQUENCE'
                   FOR EXAMPLE -
                        JOB COMPR100 WOULD RELEASE
                        JOB COMPR130 WHICH WOULD RELEASE
                        JOB COMPR200 WHICH WOULD RELEASE
                        JOB COMPR310 ETC.....
                   THE SCHEDULER'S TASK , THEREFORE, IS TO
                   COLLATE ANY REQUESTS FOR RUNNING COMPARE
                   (WHETHER THESE COME FROM USER DEPARTMENTS
                   OR FROM PART OF THE OPS. PRODUCTION
                   SCHEDULE) AND ESTABLISH A CHAIN OF NUMERICALLY
                   DEPENDENT JOBS.

NEWPAGE00
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****            RRRRRR  EEEEEEE PPPPPP  OOOOOOO RRRRRR  TTTTTTT           *****
*****            R     R E       P     P O     O R     R    T              *****
*****            R     R E       P     P O     O R     R    T              *****
*****            RRRRRR  EEEEE   PPPPPP  O     O RRRRRR     T              *****
*****            R   R   E       P       O     O R   R      T              *****
*****            R    R  E       P       O     O R    R     T              *****
*****            R     R EEEEEEE P       OOOOOOO R     R    T              *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                    IIIIIII N     N FFFFFFF OOOOOOO                   *****
*****                       I    NN    N F       O     O                   *****
*****                       I    N N   N F       O     O                   *****
*****                       I    N  N  N FFFFF   O     O                   *****
*****                       I    N   N N F       O     O                   *****
*****                       I    N    NN F       O     O   ..              *****
*****                    IIIIIII N     N F       OOOOOOO   ..              *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
*****                                                                      *****
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
********************************************************************************
NEWPAGERL
R000     CYCLE DATE LIST           COMPR100 VAMPIRE  VAN HEESVELDE     QTY
R001     FCAST AID - LOC UNITS     COMPR801 PARROT   VAN HEESVELDE     QTY
R002     FCAST AID - LOC UN-CURR   COMPR801 PARROT   VAN HEESVELDE     QTY
R003     FCAST AID - US UN/$       COMPR801 PARROT   VAN HEESVELDE     QTY
R004     PR(3)/AREA/CTY - US UN/$  COMPR801 PARROT   VAN HEESVELDE     QTY
R005     FCAST CHANGE - 000'S $    COMPR802 PARROT   VAN HEESVELDE     QTY
R006     FCAST CHANGE - 000'S USUN COMPR802 PARROT   VAN HEESVELDE     QTY
R007     PACKAGE PLANNING AID      COMPR803 PARROT   F. DE WERPE       QTY
R008     PR(3)/PR(2)/PR(1)         COMPR801 PARROT   VAN HEESVELDE     QTY
R009     UK FCAST BY SALESMAN      COMPR803 PARROT   VAN HEESVELDE     QTY
R010     UK FCAST BY SMAN / NO ADJ COMPR803 PARROT   VAN HEESVELDE     QTY
R011     FCAST AID - LOC UN NO ADJ COMPR801 PARROT   VAN HEESVELDE     QTY
R020     COND PROD INDEX LIST      COMPR120 VAMPIRE  VAN HEESVELDE     QTY
R025     COND PROD IND  VS  CMF    COMPR120 VAMPIRE  VAN HEESVELDE     QTY
R050     DETAILED SALES PERFORMANC COMPR550 PARROT   VAN HEESVELDE    MTH
R052     SUMMAR'D SALES PERFORMANC COMPR552 PARROT   VAN HEESVELDE    MTH
R054     GROUPED  SALES PERFORMANC COMPR554 PARROT   VAN HEESVELDE    MTH
R055     SALES PER. BY CTRY/PRO.GP COMPR855 PARROT   VAN HEESEVLED     REQ
R056     BATCH BALANCING & VALIDAT COMPR510 BUDGIE   VAN HEESVELDE    MTH
R058     BRIDGED ACTUAL SALES      COMPR500 VAMPIRE  VAN HEESVELDE    MTH
R059     MAIN UPDATE REJECT LIST   COMPR520 T618P050 VAN HEESVELDE    MTH
R060     SALES PROSPECTS BY MONTH  COMPR560 PARROT   VAN HEESVELDE    MTH
R062     PROSPECT CHANGE REPORT    COMPR562 PARROT   VAN HEESVELDE    MTH
R064     WHOLE YEAR PROSPECT (DET) COMPR564 PARROT   VAN HEESVELDE    MTH
R066     WHOLE YEAR PROSPECT (SUM) COMPR566 PARROT   VAN HEESVELDE    MTH
R068     ACTUAL SALES / PREV YEAR  COMPR568 PARROT   VAN HEESVELDE    MTH
R100     VOLUME UPDATE VALIDATION  COMPR200 BUDGIE   VAN HEESVELDE     QTY
R101     CMF FAILURE - SUM DISTR   COMPR450 VAMPIRE  VAN HEESVELDE     QTY
R102     CMF FAILURE - FP          COMPR450 VAMPIRE  VAN HEESVELDE     QTY
R103     CMF FAILURE - COUNTRY     COMPR450 VAMPIRE  VAN HEESVELDE     QTY
R104     CMF FAILURE - DISTR.      COMPR450 VAMPIRE  VAN HEESVELDE     QTY
R105     CMF FAILURE - PACKAGE     COMPR450 VAMPIRE  VAN HEESVELDE     QTY
R106     CMF FAILURE - LOC. CURR   COMPR450 VAMPIRE  VAN HEESVELDE     QTY
R107     CMF FAILURE - LOC. UNIT   COMPR450 VAMPIRE  VAN HEESVELDE     QTY
R108     CMF FAILURE - SALESMAN    COMPR450 VAMPIRE  VAN HEESVELDE     QTY
R110     VOLUME UPDATE MISMATCHES  COMPR200 T618P045 VAN HEESVELDE     QTY
R150     PRICE FAILURES            COMPR450 T618P080 VAN HEESVELDE     QTY
R180     DEDN UPDATE VALIDATION    COMPR300 BUDGIE   VAN HEESVELDE     QTY
R185     DEDN FILE LIST            COMPR300 VAMPIRE  VAN HEESVELDE     QTY
R190     PRICE PLANNING REPORT     COMPR390 T618P040 VAN HEESVELDE     REQ
R200     PRICE UPDATE VALIDATION   COMPR310 BUDGIE   VAN HEESVELDE     QTY
R210     SHORT PRICE LIST - APPR   COMPR350 PARROT   VAN HEESVELDE     QTY
R211     FULL PRICE LIST - APPR    COMPR310 T618P040 VAN HEESVELDE     QTY
R220     SHORT PRICE LIST - FCAST  COMPR350 PARROT   VAN HEESVELDE     QTY
R221     FULL PRICE LIST - FCAST   COMPR310 T618P040 VAN HEESVELDE     QTY
R230     SHORT PRICE LIST - COMM   COMPR350 PARROT   VAN HEESVELDE     QTY
R231     FULL PRICE LIST - COMM    COMPR310 T618P040 VAN HEESVELDE     QTY
R302     BDGT-AREA/MINOR PRODUCT   COMPR804 PARROT   VAN HEESVELDE     REQ
R303     BDGT-MINOR PRODUCT        COMPR804 PARROT   VAN HEESVELDE     REQ
R304     BDGT-MIN.PROD/COUNTRY     COMPR804 PARROT   VAN HEESVELDE     REQ
R305     BDGT-COUNTRY/MIN.PROD     COMPR804 PARROT   VAN HEESVELDE     REQ
R313     12 MTH COMP.-VOL.PRD/CTY  COMPR805 PARROT   VAN HEESVELDE     REQ
R314     12 MTH COMP -$/MIN.PROD   COMPR805 PARROT   VAN HEESVELDE     REQ
R315     12 MTH COMP -VOL.PRD/CTY  COMPR805 PARROT   VAN HEESVELDE     REQ
R316     12 MTH COMP -$/PRD/CTY    COMPR805 PARROT   VAN HEESVELDE     REQ
R402     BDGT-AREA/MIN PROD IN LIT COMPR804 PARROT   VAN HEESEVELDE    REQ
R403     BDGT-MINOR PROD    IN LIT COMPR804 PARROT   VAN HEESEVELDE    REQ
R404     BDGT-MIN.PROD/CTY  IN LIT COMPR804 PARROT   VAN HEESEVELDE    REQ
R405     BDGT-CTRY/MIN.PROD IN LIT COMPR804 PARROT   VAN HEESEVELDE    REQ
UT485    UT485 ACTION LIST         COMPR310 UT485    VAN HEESVELDE     QTR

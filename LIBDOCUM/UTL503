1************
 * UTL503   *
 ************
01. PURPOSE
 ----------
0        THE PURPOSE OF THIS PROGRAM IS TO DEVOUR THE UTL003--FORMAT
    REPORT DATA SET AND OUTPUT THE REPORTS IT CONTAINS TO ONE OR MORE
    OUTPUT DATA SETS IN PRINT-LINE FORMAT.  THE REPORTS ARE DIRECTED
    TO ONE OR MORE OF THE OUTPUT DATA SETS ACCORDING TO THE INFORMATION
    HELD IN A TABLE WHICH IS READ INTO CORE IN THE INITIALISATION
    SECTION OF THE PROGRAM.  THE REPORTS ON THE OUTPUT DATA SETS MAY
    BE SUBSEQUENTLY PRINTED AT THEIR ULTIMATE DESTINATIONS BY USE OF
    IEBGENER AND /*ROUTE CARDS.
0        UTL503 DOES NOT HANDLE STATIONERY AND CARRIAGE TAPE REQUESTS,
    AS UTL003 DID, SINCE PRINTING IS NO LONGER ON-LINE.  SPECIAL FORMS
    MAY BE REQUESTED BY CODING THE REQUIREMENT IN THE FORMS SUB-PARAMETER
    OF THE SYSOUT PARAMETER, AS SHOWN IN APPENDIX D, WHEREUPON HASP WILL
    REQUEST FORMS AS NECESSARY.  ALIGNMENT OF SPECIAL FORMS MAY BE
    ACHIEVED BY USE OF NORMAL HASP COMMANDS, AND IS UNDER THE CONTROL
    OF THE RECEIVING OPERATOR.
02. LIMITATIONS
 --------------
0        NO MORE THAN ONE HUNDRED RECORDS MAY BE READ INTO THE IN-CORE
    TABLE WHICH INDICATES THE RELATIONSHIP BETWEEN REPORT NUMBER AND
    OUTPUT DDNAME.
0        NO MORE THAN FIFTEEN OUTPUT DATA SETS (IN ADDITION TO SYSPRINT)
    MAY BE OPENED IN ONE EXECUTION OF THE PROGRAM.  HOWEVER, MORE THAN
    FIFTEEN MAY BE SPECIFIED.
0        BLOCK SIZE FOR ALL INPUT AND OUTPUT DATA SETS (WITH THE EXCEPTION
    OF SYSPRINT) MUST BE SUPPLIED EITHER IN THE JCL OR IN THE DATA SET
    LABELS.
0        THE SEQUENCE OF THE INPUT FILE IS NOT CHECKED, BUT MERELY THE
    VALIDITY OF THE SKIP/SPACE CODES.
03. INPUT
 --------
0   1)   REPORT NAME - DDNAME TABLE. (TABLE)
0        THE FORMAT OF THE TABLE ENTRIES IS AS FOLLOWS:
0   BYTES 1-4      PT01     - TABLE IDENTIFIER
    BYTES 5-10     REPORT NO. - CORRESPONDING TO THE REPORT NUMBER FIELD
                                IN THE UTL003-FORMAT INPUT RECORDS.
    BYTES 11-15    DDNAME     - A FIVE CHARACTER FIELD THAT IS PREFIXED
                                BY PRT TO CONSTRUCT THE DDNAME ASSOCIATED
                                WITH THE REPORT.
    BYTES 16-80    UNUSED.
0        THE SAME DDNAME MAY BE SPECIFIED BY MORE THAN ONE REPORT, AND IF
 ONE REPORT IS TO BE WRITTEN TO MORE THAN ONE OUTPUT DATA SET, AS MANY TABLE
 ENTRIES AS ARE NECESSARY MAY BE CODED SPECIFYING THE SAME REPORT NUMBER.
1************
 * UTL503   *
 ************
0        IF, INSTEAD OF A DDNAME SUFFIX, LOCAL IS CODED IN BYTES
    11-15, THE REPORT WILL BE WRITTEN TO THE SYSPRINT DATA SET.
    OTHER ENTRIES SPECIFYING DDNAMES MAY BE SPECIFIED FOR THE REPORT
    IF REQUIRED.
0        IF DUMMY IS CODED IN BYTES 11-15, THE REPORT IS IGNORED, AND
    PROCESSING CONTINUES WITH THE NEXT REPORT ON THE INPUT DATA SET.
    HOWEVER, IF OTHER TABLE ENTRIES ARE ENCOUNTERED FOR THE SAME REPORT,
    IT WILL BE WRITTEN TO THE DDNAMES THEY SPECIFY.  JUDICIOUS USE OF
              THE OPTIONS AVAILABLE IN THE TABLE WILL SIMULATE THE
    REPORT SELECTION AND OMISSION FACILITIES PROVIDED BY THE ORIGINAL
    PROGRAM, UTL003.
0   2)   IMAP PRINT-TAPE DATA SET.     (PRINTIN)
0        INPUT TO UTL503 IS A DATA SET OF THE SAME FORMAT AS THAT INPUT
    TO UTL003.  THE RECORD LAYOUT OF THIS 150-BYTE RECORD MAY BE FOUND
    IN APPENDIX C.
04. OUTPUT
 ---------
0   1)   SYSPRINT DATA SET.  (SYSPRINT)
0        ERROR MESSAGES RELATING TO THE INPUT TABLE ARE PUT OUT ON THE
    SYSPRINT DATA SET, FOLLOWED BY ANY REPORTS FOR WHICH LOCAL HAS BEEN
    SPECIFIED.
0   2)   OUTPUT DATA SETS.   (PRTXXXXX)
0        THE DDNAMES OF THE OUTPUT DATA SETS ARE VARIABLE, AND ARE
    CONSTRUCTED FROM THE IN-CORE TABLE ENTRIES WITH A PREFIX OF PRT.
    THE OUTPUT RECORDS ARE 132 BYTE PRINT-LINE IMAGES PRECEDED BY 1
    BYTE CONTAINING A MACHINE CONTROL CHARACTER, GIVING A RECORD LENGTH
    OF 133.
0        THESE OUTPUT DATA SETS MAY SUBSEQUENTLY BE PRINTED BY USE OF
    IEBGENER.
05. OPERATION
 ------------
0        THE JCL STATEMENTS REQUIRED TO INVOKE AND EXECUTE THIS PROGRAM
    ARE
0        //STEP         EXEC PGM=UTL503
         //SYSPRINT     DD   SYSOUT=A
         //TABLE        DD   (TABLE DD INFORMATION)
         //PRINTIN      DD   (PRINT-TAPE DD INFORMATION)
         //PRTXXXXX     DD   (OUTPUT DATA SET DD INFORMATION)
0        AS MANY OUTPUT DATA SETS AS ARE NECESSARY MAY BE SPECIFIED.
    NOTE THAT ALL DATA SETS ARE DEVICE INDEPENDENT.
1************
 * UTL503   *
 ************
0                            APPENDIX A
                             ----------
0                          ERROR MESSAGES
                           --------------
1************
 * UTL503   *
 ************
0        TWO ERROR MESSAGES, BOTH ASSOCIATED WITH ERRORS IN THE INPUT TABLE,
    MAY BE PRINTED ON THE SYSPRINT DATA SET.  THESE ARE:-
0   1)   INVALID RECORD TYPE IN TABLE
0        A RECORD HAS BEEN FOUND IN THE INPUT TABLE THAT DOES NOT CONTAIN THE
         TABLE IDENTIFIER 'PT01' IN THE FIRST FOUR BYTES.  THE INVALID RECORD
         IS IGNORED, AND PROCESSING CONTINUES WITH THE NEXT RECORD ON THE FILE.
0   2)   IN-CORE TABLE IS FULL - SUBSEQUENT RECORDS IGNORED
0        ONE HUNDRED VALID RECORDS HAVE ALREADY BEEN READ FROM THE DATA SET
         ASSOCIATED WITH THE DDNAME TABLE, AND THE IN-CORE TABLE BUILT UP
         BY UTL503 IS FULL.  THE CURRENT, AND SUBSEQUENT, TABLE RECORDS ARE
    IGNORED.
                             -------------------------
0        TWO ERROR MESSAGES, BOTH ASSOCIATED WITH ERRORS IN THE INPUT UTL003-
    FORMAT RECORDS, MAY BE PRINTED WITHIN THE REPORT TO WHICH THEY APPLY.
    THESE ARE:-
0   1)   ***** THE FOLLOWING LINE HAD AN INVALID IMMEDIATE SKIP/SPACE CODE *****
         INVALID CODE = X'AA'.
0        AN INVALID CHARACTER HAS BEEN FOUND IN THE BEFORE PRINT SKIP/SPACE
         CODE (BYTE 16 OF THE UTL003-FORMAT RECORD), AND 'AA' IS THE HEXADECIMAL
         REPRESENTATION OF THE ERROR CHARACTER. BY DEFAULT, NO SKIP/SPACE ACTION
         IS TAKEN BEFORE THE LINE IS PRINTED, AND THE DATA LINE IS PRINTED
         IMMEDIATELY FOLLOWING THE ERROR MESSAGE.
0   2)   *** THE PRECEDING LINE HAD AN INVALID AFTER PRINT SKIP/SPACE CODE ***
         INVALID CODE = X'AA'
0        AN INVALID CHARACTER HAS BEEN FOUND IN THE AFTER PRINT SKIP/SPACE
         CODE (BYTE 15 OF THE UTL003-FORMAT RECORD), AND 'AA' IS THE HEXADECIMAL
         REPRESENTATION OF THE ERROR CHARACTER.  THE INVALID CHARACTER DEFAULTS
         TO A REQUEST TO SPACE ONE LINE AFTER PRINTING, AND THE ERROR MESSAGE
         IS PRINTED ONE LINE BELOW THE DATA LINE.
                             -------------------------
0        A NUMBER OF MESSAGES MAY BE DISPLAYED ON THE CONSOLE TYPEWRITER,
    INDICATING THAT A CORRECTABLE ERROR HAS BEEN DETECTED DURING EXECUTION OF
    UTL503, AND THE OPERATOR IS ASKED WHAT ACTION IS TO BE TAKEN.  EACH OF
    THESE MESSAGES IS FOLLOWED BY THE QUESTION:
0   'UTL503 - REPLY IGNORE, ABEND, LOCAL OR DDNAME'.
0   IF THE REPLY IS IGNORE, THE REPORT TO WHICH THE PRECEDING INFORMATORY
    MESSAGE APPLIES, WILL NOT BE PROCESSED.  IF THE REPLY IS 'ABEND', AN
    ABNORMAL TERMINATION IS INVOKED WITH A USER COMPLETION CODE OF 503.
1************
 * UTL503   *
 ************
0   IF THE REPLY IS 'LOCAL', THE REPORT TO WHICH THE PRECEDING INFORMATORY
    MESSAGE APPLIES WILL BE OUTPUT TO THE SYSPRINT DATA SET.  ALTERNATIVELY,
    THE REPLY MAY BE OF THE FORM 'XXXXX', WHERE PRTXXXXX IS ONE OF THE
    VARIABLE DDNAMES CODED FOR THIS EXECUTION OF UTL503.  THE REPLY MAY BE
    IN UPPER OR LOWER CASE, OR EVEN, IF THE FANCY TAKES YOU, IN A MIXTURE
    OF BOTH.
0        THE INFORMATORY MESSAGES THAT MAY PRECEDE THIS QUESTION ARE:-
0   1)   'UTL503 - REPORT NO. AAAAAA HAS NO DDNAME'.
0        A REPORT HAS BEEN FOUND FOR WHICH THERE IS NO ENTRY IN THE TABLE,
         AND CONSEQUENTLY NO DDNAME TO WHICH TO DIRECT THE OUTPUT.  THE
         SIX BYTE REPORT NAME APPEARS IN THE FIELD AAAAAA.
0   2)   'UTL503 - NO DCB FOR REPORT AAAAAA,DDNAME XXXXX'.
0        UTL503 WISHES TO OPEN THE DATA SET ASSOCIATED WITH THE DDNAME
         PRTXXXXX IN ORDER TO WRITE THE REPORT WHOSE NAME IS CONTAINED
         IN THE FIELD AAAAAA.HOWEVER, FIFTEEN OUTPUT DATA SETS HAVE ALREADY
         BEEN OPENED, AND NO FURTHER SYSTEM CONTROL BLOCKS ARE AVAILABLE FOR
         USE.
0   3)   'UTL503 - NO DD STATEMENT FOR PRTXXXXX, RPTAAAAAA'.
0        UTL503 LONGS, WITH ALL ITS SOUL, TO OPEN THE DATA SET ASSOCIATED
         WITH THE DDNAME PRTXXXXX IN ORDER TO WRITE THE REPORT WHOSE NAME
         IS CONTAINED IN THE FIELD AAAAAA.  HOWEVER, THERE IS NO DD STATE-
         MENT WITH THE RELEVANT DDNAME.
1************
 * UTL503   *
 ************
0                            APPENDIX B
                             ----------
0                BEFORE AND AFTER PRINT SKIP/SPACE CODES
                 ---------------------------------------
1************
 * UTL503   *
 ************
0   BEFORE PRINT CODES
    ------------------
0                                      IMMEDIATE SKIP TO
                                       -----------------
0             1 - 9                     CHANNEL 1 - 9
                0                          "     10
                =                          "     11
              X'7D' (@)                    "     12
0                                      IMMEDIATE SPACE
                                       ---------------
0             J                               1
              K                               2
              L                               3
              BLANK - NO SKIP/SPACE ACTION BEFORE PRINTING
0   AFTER PRINT CODES
    -----------------
0                                      SKIP AFTER PRINT TO
                                       -------------------
              A - I                     CHANNEL 1 - 9
              X'6F' (?)                   "     10
              X'4B'(.)                    "     11
              X'4C' (#)                   "     12
0                                      SPACE AFTER PRINT
                                       -----------------
              /                             1
              S                             2
              T                             3
1************
 * UTL503   *
 ************
0                  APPENDIX C
                   ----------
0                FILE LAYOUTS
                 ------------
1************
 * UTL503   *
 ************
0   IMAP  PRINT  TAPE
0        1         BLANK
         2-7       REPORT NUMBER
         8-9       CARRIALE TAPE CODE
        10-11      STATIONERY CODE
        12-14      REPORT LINE NUMBER
        15         AFTER PRINT SKIP/SPACE CODE
        16         BEFORE PRINT SKIP/SPACE CODE
        17-148     PRINT LINE
        149        CONSTANT 'A'
        150        BLANK
1************
 * UTL503   *
 ************
0   UTL503    CONTROL   TABLE
0        1-4       TABLE IDENTIFIER ('PT01')
         5-10      REPORT NAME
        11-15      DDNAME/'LOCAL'/'DUMMY'
        16-80      BLANK
1************
 * UTL503   *
 ************
0                            APPENDIX D
                             ----------
0                        SAMPLE JOB STREAM
                         -----------------
1************
 * UTL503   *
 ************
0

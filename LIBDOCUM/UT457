1************
 * UT457    *
 ************
01.      PURPOSE
 ---------------
0   ONE OF THE INCREMENTAL IMPROVEMENTS OFFERED BY THE HASP
    MAINTENANCE RELEASE VERSION 3.1 WAS TO ALLOW THE USE OF
    THE RELEASE COMMAND (SA) BY JOB NAME AS WELL AS BY THE
    HASP-ASSIGNED JOB NUMBER.  UT457 WAS WRITTEN TO TAKE
    ADVANTAGE OF THIS FACILITY, AND THUS TO PROVIDE A METHOD
    FOR AUTOMATICALLY RELEASING A DEPENDENT JOB UPON SUCCESS-
    FUL COMPLETION OF THE CURRENT JOB.
0   UT457 PASSES TO HASP A RELEASE COMMAND SPECIFYING AS THE
    JOB NAME THE CONTENTS OF THE PARM FIELD.  ADDITIONAL
    FUNCTIONS OF THE UTILITY ARE TO PASS TO HASP ANY OTHER
    SPECIFICALLY REQUESTED COMMAND, AND TO PASS A JOB STREAM
    DIRECTLY TO HASP WITHOUT THE NEED FOR MANUAL INTERVENTION.
02.      LIMITATIONS
 -------------------
0   1.   HASP WILL ONLY PROCESS THE JOB NAME VERSION OF THE
         RELEASE COMMAND IF THE NAME IS UNIQUE (I.E. IF MORE
         THAN ONE JOB WITH THE SPECIFIED NAME IS FOUND IN THE
         SYSTEM, HASP IGNORES THE COMMAND).
0   2.   UT457 CANNOT DETERMINE WHETHER OR NOT THE COMMANDS
         IT PASSES TO HASP HAVE BEEN ACTIONED; NOT CAN IT
         DETERMINE WHETHER OR NOT THE JOBS IT PASSES TO HASP
         HAVE BEEN ACCEPTED.
03.      INPUT DATA
 ------------------
0        UT457 ACCEPTS INPUT FROM THREE SOURCES : FROM THE
         DATA SET SPECIFIED BY SYSUT1; FROM THE DATA SET
         SPECIFIED BY SYSIN; AND FROM THE PARM FIELD CODED
         IN THE EXEC STATEMENT.  NONE OF THESE SOURCES ARE
         MANDATORY, BUT IF PRESENT THEY WILL BE PROCESSED
         IN THE SEQUENCE SYSUT1, SYSIN, PARM.
0        SYSUT1 :-
         ------
0        THE DATA SET ASSOCIATED WITH SYSUT1 MUST COMPRISE A
         CARD IMAGE DATA SET (I.E. A LOGICAL RECORD LENGTH OF
         80), AND IS ASSUMED TO BE A JOB STREAM.  THE UTILITY
         PERFORMS NO PROCESSING WHATSOEVER ON THE DATA, BUT
1************
 * UT457    *
 ************
0        MERELY PASSES THEM TO THE INTERNAL READER OF HASP
         (I.E. SYSUT2).
0        SYSIN :
         -----
0        THIS DATA SET CAN CONTAIN BOTH CONTROL CARDS AND
         DATA CARDS.  IF THE FIRST TWO COLUMNS OF A CARD
         CONTAIN '.S', IT IS REFORMATED AS A HASP COMMAND
         CARD, WITH COLUMNS 3 TO 79 SHIFTED TO COLUMNS 4
         TO 80, AND '/*S' IN THE FIRST THREE COLUMNS, AND
         THEN PASSED TO THE INTERNAL READER.  IF THE FIRST
         TWO COLUMNS OF THE CARD CONTAIN EITHER './' OR
         '.*' IT IS ASSUMED TO BE A PSEUDO-JCL CARD, AND
         A '/' IS INSERTED IN COLUMN 1 BEFORE IT IS PASSED
         TO SYSUT2.
0        IF NONE OF THE PRECEDING TESTS ARE SATISFIED, THE
         CARD IS PASSED TO SYSUT2 UNCHANGED, AND WITHOUT
         FURTHER PROCESSING.
0        PARM
         ----
0        THE PARM FIELD MAY CONSIST OF ONE OR MORE SUB-
         FIELDS SEPARATED BY COMMAS ;
0                  'PARM = 'NAME 1, NAME 2, ... NAME N'
0          OR      'PARM = 'S COMMAND 1, S COMMAND 2...,S COMMAND N'
0        IF THE FIRST CHARACTER IN THE PARM FIELD IS A 'S', THE
         PARM IS ASSUMED TO CONSIST OF ONE OR MORE HASP COMMANDS,
         EACH OF WHICH IS RE-FORMATED AS A HASP COMMAND CARD AND
         PASSED TO THE INTERNAL READER.  OTHERWISE THE PARM IS
         ASSUMED TO CONSIST OF ONE OR MORE JOB NAMES, SEPARATED
         BY COMMAS, EACH OF WHICH IS RE-FORMATED INTO A HASP
         RELEASE COMMAND.
0        NOTES :
         -----
0        1.   SUB-FIELD TYPES CANNOT BE MIXED (I.E. THE PARM
              MAY CONTAIN ONLY JOB NAMES OR ONLY COMMANDS).
0        2.   A COMMAND ENTERED IN THE PARM MAY CONTAIN COMMAS
              WITHIN ITS TEXT.
0        3.   THE ONLY VALIDITY CHECK APPLIED TO THE PARM FIELD
              IS TO DETERMINE WHETHER OR NOT THE FIRST CHARACTER
              IS A 'S'.
1************
 * UT457    *
 ************
04. OUTPUT DATA
 --------------
0   THE UTILITY HAS PROVISION FOR THREE OUTPUT DATA SETS
    (SYSUT2, SYSPRINT AND SYSOUT), OF WHICH ONLY SYSUT2
    IS MANDATORY.  SYSUT2 IS THE DDNAME ASSOCIATED WITH
    THE HASP INTERNAL READER, TO WHICH ALL CARD-IMAGE
    OUTPUT IS DIVERTED.  SYSPRINT IS A MESSAGE DATA SET
    TO WHICH INFORMATION AND ERROR MESSAGES ARE PASSED,
    AND SYSOUT CONTAINS AN 80/80 LISTING OF THE CARDS
    PASSED TO THE INTERNAL READER.
0   ADDITIONAL OUTPUT IS SUPPLIED IN THE FORM OF A RETURN
    CODE, WHICH INDICATES THE RESULTS OF PROGRAM EXECUTION.
    THE RETURN CODES AND THEIR INTERPRETATIONS ARE AS
    FOLLOWS :-
0        0    -  NO ERRORS ENCOUNTERED DURING PROCESSING.
        12    -  I/O ERROR DURING PROCESSING.  PROCESSING
                 TERMINATED.
        16    -  NO SYSUT2 DD STATEMENT.  PROCESSING BYPASSED.
05. OPERATION
 ------------
0   THE JCL STATEMENTS REQUIRED TO INVOKE THE UTILITY ARE :
0   1.   EXEC
    2.   SYSPRINT  DD
    3.   SYSOUT    DD
    4.   SYSUT1    DD
    5.   SYSUT2    DD
    6.   SYSIN     DD
0   BUT ONLY THE EXEC AND SYSUT2 STATEMENTS ARE MANDATORY.
0   1.   EXEC STATEMENT
         --------------
0        THIS IS CODED AS
0        //STEPNAME     EXEC     PGM=UT457
0        OPTIONALLY, THE STATEMENT CAN INCLUDE A PARM FIELD
         WHICH, IF PRESENT, IS USED AS INPUT TO THE UTILITY.
         (SEE SECTION III).
1************
 * UT457    *
 ************
02. SYSPRINT STATEMENT
 ---------------------
0   THIS OPTIONAL STATEMENT DEFINES A SEQUENTIAL
    MESSAGE DATA SET, WHICH MAY BE WRITTEN ONTO
    A DIRECT ACCESS VOLUME.  THE DATA SET CONTAINS
    INFORMATION MESSAGES AND ERROR MESSAGES, IF
    ANY.  THE STATEMENT IS NORMALLY CODED AS :-
0   //SYSPRINT     DD   SYSOUT=A
03. SYSOUT STATEMENT
 -------------------
0   THIS OPTIONAL STATEMENT DEFINES A SEQUENTIAL
    MESSAGE DATA SET, WHICH MAY BE WRITTEN ONTO A
    SYSTEM OUTPUT DEVICE, A MAGNETIC TAPE VOLUME,
    OR A DIRECT ACCESS VOLUME.  THE DATA SET CON-
    TAINS AN 80/80 LISTING OF THE CARDS PASSED TO
    THE INTERNAL READER (SYSUT2).  THE STATEMENT
    IS NORMALLY CODED AS :-
0   //SYSOUT  DD   SYSOUT=A
04. SYSUT1 STATEMENT
 -------------------
0   THIS OPTIONAL STATEMENT DEFINES A SEQUENTIAL
    CARD-IMAGE DATA SET WHICH, IF PRESENT, IS USED
    AS INPUT TO THE UTILITY.  (SEE SECTION III).
05. SYSUT2 STATEMENT
 -------------------
0   THIS STATEMENT DEFINES THE HASP INTERNAL READER,
    AND MUST BE PRESENT.  IT SHOULD BE CODED AS :-
0   //SYSUT2  DD   UNIT=INTRDR
06. SYSIN STATEMENT
 ------------------
0   THIS OPTIONAL STATEMENT DEFINES A SEQUENTIAL
    CARD-IMAGE DATA SET WHICH, IF PRESENT, IS USED
    AS A SOURCE OF BOTH UTILITY CONTROL CARDS AND
    INPUT DATA.  (SEE SECTION III).  THE STATEMENT
    IS NORMALLY CODED AS :-
0   //SYSIN   DD   *
1************
 * UT457    *
 ************
06. TECHNIQUES
 -------------
0   1.   IF THE UTILITY IS USED TO RELEASE JOBS FOR
         EXECUTION, EXECUTION OF THE UTILITY ITSELF
         SHOULD BE CONDITIONED ON THE SUCCESSFUL
         COMPLETION, OR OTHERWISE, OF THE CURRENT
         JOB.
0   2.   MULTIPLE EXECUTIONS OF THE UTILITY MAY BE
         COMBINED ON A CONDITIONAL BASIS TO EITHER
         RELEASE A DEPENDENT JOB OR PURGE FROM THE
         SYSTEM ALL THE DEPENDENT JOBS, ACCORDING
         TO THE SUCCESS OR OTHERWISE OF THE CURRENT
         JOB.  (SEE EXAMPLE 3).
0   3.   THE UTILITY MAY BE USED TO AUTOMATICALLY
         PASS A RERUN JOB TO HASP IN THE EVENT OF
         AN ABNORMAL TERMINATION.  (SEE EXAMPLE 4).
0   4.   JOBS CAN BE AUTOMATICALLY HELD ON INPUT
         EITHER BY PLACING A     /*SETUP CARD IN THE
         JCL, OR BY CODING TYPRUN=HOLD IN THE JOB
         CARD.
1************
 * UT457    *
 ************
0                            APPENDIX A
                             ----------
0                             EXAMPLES
                              --------
1************
 * UT457    *
 ************
0   EXCLUDE                  OPTIONAL.  IF IT APPEARS, THE ANALYSIS
                             WILL COVER ALL RECORDS EXCEPT THOSE
                             THAT MATCH THE IDENTIFIER.  IF IT DOES
                             NOT APPEAR, THE ANALYSIS WILL COVER ONLY
                             THOSE RECORDS.
0   EXAMPLE
    -------
0   SUPPOSE WE WISH TO ANALYSE ALL RECORDS ON THE FILE EXCEPT
    THOSE IDENTIFIED BY 'BS' IN BYTES 3-4.  THE IDENT CARD
    WOULD READ:
                        IDENT  'BS',POSITION=3,EXCLUDE
03) SUBAN
 --------
0   THIS CARD, IF PRESENT, WILL CAUSE THE PROGRAM TO CREATE
    AN ANALYSIS ON CHANGE OF MAJOR SORT KEY, AND PRINT ALL
    THE SUB-ANALYSES FOLLOWED BY AN OVERALL FILE ANALYSIS.
    THE CARD SHOULD CONTAIN:
0   'FIELD NAME',            THIS IS FOR THE REPORT ONLY, AND SHOULD
                             GIVE A DESCRIPTION OF THE FIELD FOR
                             WHICH THE SUBANALYSIS IS TAKING PLACE.
                             IT MUST BE CONTAINED IN QUOTES, MAY NOT
                             CONTAIN EMBEDDED QUOTES, AND MUST NOT
                             EXCEED FORTY BYTES IN LENGTH.
0   POSITION=NNN,)
                             THESE DEFINE THE FIELD IN THE RECORD ON
    LENGTH=NN    )
                             WHICH THE SUBANALYSIS IS TO TAKE PLACE.
0   NOTE THE SUBANALYSIS FUNCTION PRINTS A REPORT AND RESETS
    ----
    VALUES EVERY TIME THE VALUE OF THE FIELD CHANGES.  THUS,
    TO BE MEANINGFUL, THIS FIELD MUST BE THE MAJOR SORT KEY
    OF THE FILE.
0   EXAMPLE
    -------
0   SUPPOSE WE WISH TO ANALYSE THE VALUES FOR EVERY COUNTRY,
    WHERE COUNTRY NUMBER APPEARS IN BYTES 12 - 14.
1************
 * UT457    *
 ************
0   THE SUBAN CARD WOULD READ:
0        SUBAN  'COUNTRY',POSITION=12,LENGTH=3
04) FIELD
 --------
0   THIS CARD IS COMPULSORY AND SPECIFIES THE NUMERIC FIELD TO
    BE ANALYSED.  IT SHOULD CONTAIN:
0   POSITION=NNN,       THE STARTING POSITION OF THE FIELD, EXPRESSED
                        AS BYTE NUMBER.
0   LENGTH=NN,          THE LENGTH IN BYTES OF THE FIELD TO BE ANALYSED.
0   TYPE=XX,            THE TYPE OF DATA IN THE FIELD, WHERE
                        XX = PD FOR PACKED DECIMAL DATA,
                        XX = XE FOR CHARACTER DECIMALS.
                        THE DEFAULT OPTION IF TYPE IS NOT CODED IS "PD".
0   DECIMALS=N,         THE NUMBER OF POSITIONS AFTER THE IMPLIED
                        DECIMAL POINT.  (NR OF BYTES FOR XE, NR OF
                        HALF-BYTES FOR PD)
                        THE DEFAULT OPTION IS ZERO.
0   NEGATIVE=XXX,       INSTRUCTS THE PROGRAM WHAT TO DO WITH NEGATIVE
                        VALUES ENCOUNTERED IN THE FIELD, WHERE
                        XXX = YES MEANS TREAT NEGATIVES IN THE NORMAL
                                   ALGEBRAIC FASHION.
                        XXX = ABS MEANS TAKE THE ABSOLUTE VALUE OF
                                   NEGATIVES, I.E. -100 WILL APPEAR IN
                                   THE SAME RANGE AS 100.
                        XXX = IGN MEANS IGNORE NEGATIVES, ALL RECORDS
                                   WITH NEGATIVE VALUES WILL BE LEFT OUT
                                   OF THE ANALYSIS.
                        THE DEFAULT OPTION IS "YES".
0   FIELD PARAMETERS MAY BE ENTERED IN ANY ORDER. EACH, HOWEVER,
    MUST BE TERMINATED BY A COMMA OR A BLANK.
0   THE PARAMETERS "POSITION" AND "LENGTH" ARE COMPULSORY; THE OTHERS
    ARE OPTIONAL AND HAVE DEFAULT VALUES.
1************
 * UT457    *
 ************
05) RANGE
 --------
0   THE RANGE CARDS MUST BE SUBMITTED WITH A NUMBER TERMINATING
    IN COLUMN 20.  THE CARDS MUST BE SUBMITTED IN ASCENDING
    ORDER OF THIS FIGURE.
0   THIS NUMBER DEFINES THE LOWER END OF A RANGE.  THE NUMBER
    IN THE NEXT CARD SPECIFIES THE UPPER END OF THE RANGE.
0   FOR NEGATIVE RANGES A MINUS SIGN SHOULD BE PUNCHED IN
    COLUMN 21.
0   EXAMPLE
    -------
0                                                 COL. 20
                                                  -------
0   THE RANGE CARDS:
                        RANGE                    1000-
                        RANGE                       0
                        RANGE                    1000
                        RANGE                    2000
                        RANGE                    5000
                        RANGE                   10000
0   WILL CAUSE THE PROGRAM TO PRINT SEVEN LINES FOR EACH
    REPORT, ONE FOR EACH OF THE RANGES:
0                         X < -1000
                  -1000 < X < 0
                      0 < X < 1000
                   1000 < X < 2000
                   2000 < X < 5000
                   5000 < X < 10000
                  10000 < X
0   A MAXIMUM OF 49 RANGE CARDS MAY BE SUBMITTED IN ANY ONE RUN.
1************
 * UT457    *
 ************
0   EXAMPLE
    -------
0   THE JCL SHOWN IN THE ATTACHED EXAMPLE IS THAT NECESSARY FOR
    AN ANALYSIS OF A DATA SET CALLED SYSTEM.COSTFILE, FOR THE
    DISTRIBUTION OF VALUES IN A FIELD FOUR BYTES LONG, STARTING
    IN BYTE 84 OF THE RECORD.  THE FIELD IS PACKED DECIMAL, AND
    HAS THREE DECIMAL PLACES.
0   IN COBOL THIS WOULD BE A FIELD WITH
    PICTURE S9(6)V999 COMPUTATIONAL-3.
0   WE ONLY WISH TO CONSIDER RECORDS IDENTIFIED BY "SA" IN THE
    FIRST TWO BYTES, AND WE WISH TO GIVE AN ANALYSIS FOR EACH
    "COST CENTRE", IDENTIFIED BY TWO BYTES IN POSITIONS 3 AND 4.
0   THE REPORTS (ONE FOR EACH COST CENTRE AND ONE OVERALL) WILL
    EACH CONTAIN NINE LINES, WITH RANGES AS FOLLOWS:
0        LESS THAN    10
            10 TO     50
            50 TO    100
           100 TO    500
           500 TO   1000
          1000 TO   5000
          5000 TO  10000
         10000 TO  50000
         50000 AND OVER.
0   A SAMPLE REPORT GENERATED WITH THESE CONTROL CARDS IS
    SHOWN.
1************
 * UT457    *
 ************
0

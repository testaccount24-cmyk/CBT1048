1************
 * UT434    *
 ************
0UT434
 -----
01. PURPOSE
    -------
0   UT434 WAS WRITTEN FOR USE IN A SITUATION WHERE THE
    MEMBERS OF A GENERATION DATA GROUP ARE RECYCLED
    AROUND THE SAME VOLUMES (I.E. A SITUATION WHERE,
    IN THE CASE OF A GDG OF 3 ENTRIES, GENERATION
    (+1) IS TO BE WRITTEN ON THE VOLUME OR VOLUMES
    THAT GENERATION (-2) IS ON).
    IN ORDER TO RERUN A JOB IT IS OFTEN NECESSARY TO
    RESET ONE OR MORE GENERATION DATA GROUPS.  THIS
    IS NORMALLY ACCOMPLISHED USING THE IBM-SUPPLIED
    UTILITY IEHPROGM, AND NECESSITATES DETERMINING
    THE ABSOLUTE GENERATION NAMES OF THE GENERATIONS
    TO BE UNCATALOGUED AND CATALOGUED.  THE PURPOSE
    OF UT434 IS TO SIMPLIFY THIS PROCESS : THE ONLY
    INFORMATION THAT NEEDS TO BE SUPPLIED TO UT434
    IS THE NAME OF THE GENERATION DATA GROUP, WHERE-
    UPON THE UTILITY AUTOMATICALLY PERFORMS THE
    FOLLOWING FUNCTIONS :-
0   (1)  UNCATALOGS GENERATION         (0)
0   (2)  SCRATCHES GENERATION          (0) IF IT IS ON A DIRECT
                                            ACCESS DEVICE.
0   (3)  CATALOGS GENERATION         (-N)   WHERE 'N+1' IS THE
                                            NUMBER OF GENERATIONS
                                            IN THE DATA GROUP.
0   (4)  LISTS ALL THE CATALOG ENTRIES THAT APPLY TO THE
         GENERATION DATA GROUP THAT HAS BEEN RESET.
0   NOTE THAT UT434 AUTOMATICALLY WORKS OUT HOW MANY
    GENERATIONS THERE ARE IN THE GROUP, WHAT THE ABSOLUTE
    GENERATION NAMES ARE, AND WHICH VOLUME(S) THEY ARE
    RESIDENT UPON, THEREBY SIMPLIFYING THE PROCESS OF
    RESETTING THE GDG (AND ENSURING THAT GENERATION (-N)
    IS CATALOGUED CORRECTLY - A NOT INCONSIDERABLE ADVANTAGE.)
02. LIMITATIONS
 --------------
0   1.   A RESET REQUEST IS DEEMED TO BE INVALID AND IS
         CONSEQUENTLY IGNORED IF :-
0   (A)  THE EMPTY OPTION WAS SPECIFIED WHEN THE GDG INDEX
         WAS CREATED WITH THE BLDG CONTROL STATEMENT OF
         IEHPROGM.
1************
 * UT434    *
 ************
0   (B)  THE NUMBER OF GENERATIONS CURRENTLY CATALOGUED
         IS NOT EQUAL TO THE VALUE THAT WAS SPECIFIED IN
         THE ENTRIES= OPERAND OF THE BLDG CONTROL STATE-
         MENT THAT CREATED THE GDG.
0   (C)  THE ABSOLUTE GENERATION NUMBER OF THE (0) GENERA-
         TION DOES NOT EXCEED THE VALUE THAT WAS SPECIFIED
         IN THE ENTRIES= OPERAND OF THE BLDG CONTROL
         STATEMENT THAT CREATED THE GDG.
0   2.   IF THE NUMBER OF ENTRIES IN THE GDG EXCEEDS 10,
         ONLY THE FIRST 10 ENTRIES - FROM GENERATION (0)
         TO GENERATION (-9) - ARE LISTED OUT AFTER THE
         RESET OPERATION HAS BEEN COMPLETED.
0   3.   THE ONLY CVOL DEVICE CURRENTLY SUPPORTED IS A
         2314.
03. INPUT DATA
 -------------
0   INPUT TO THE UTILITY CONSISTS OF UTILITY CONTROL STATE-
    MENTS WHICH ARE SIMILAR IN FORMAT TO THOSE USED BY IBM-
    SUPPLIED UTILITIES IN THAT THEY COMPRISE NAME, OPERATION
    AND OPERAND FIELDS DELIMITED BY BLANKS, WITH KEYWORD
    OPERANDS THAT MAY BE CODED IN ANY ORDER AND ARE SEPA-
    RATED BY COMMAS.
0   (1)  THE RESET COMMAND
    ----------------------
         THE FORMAT OF THE RESET COMMAND IS :
0   NAME           OPERATION      OPERAND
0   (NAME)         RESET          GDG = NAME
                                  CVOL = DEVICE =
                                         SERIAL
                                  PURGE
0   GDG = NAME                                   (MANDATORY)
         SPECIFIES THE FULLY QUALIFIED NAME OF THE GENE-
         RATION DATA GROUP TO BE RESET (I.E. THE NAME THAT
         WAS CODED IN THE INDEX= OPERAND OF THE BLDG
         CONTROL STATEMENT THAT ORIGINALLY CREATED THE
         GDG).
1************
 * UT434    *
 ************
0        CVOL = DEVICE = LIST                              (OPTIONAL)
              SPECIFIES THE DEVICE TYPE AND VOLUME SERIAL
              NUMBER OF THE CONTROL VOLUME ON WHICH THE
              CATALOG SEARCH IS TO BEGIN.  IF CVOL IS
              OMITTED, THE SYSTEM RESIDENCE VOLUME IS
              ASSUMED.
0        PURGE                                             (OPTIONAL)
              REQUESTS THAT, IF THE (0)'TH GENERATION RESIDES
              ON A DIRECT ACCESS DEVICE, THE DATA SET BE
              SCRATCHED EVEN IF ITS EXPIRATION DATE HAS NOT
              ELAPSED.  IF PURGE IS OMITTED AND THE EXPIRA-
              TION DATE HAS NOT ELAPSED, THE DATA SET WILL
              NOT BE SCRATCHED.
0   (2)  THE REMOVE COMMAND
         ------------------
         THE FORMAT OF THE REMOVE COMMAND IS
0   NAME                OPERATION      OPERAND
0   (NAME)         REMOVE              DSNAME = NAME
                                       CVOL = DEVICE = SERIAL
                                       PURGE
0   (NAME)         REMOVE              DSN = NAME
                                       CVOL = DEVICE = SERIAL
                                       PURGE
0   (NAME)         REMOVE              GDG = NAME
                                       CVOL = DEVICE = SERIAL
                                       PURGE
                   DELETE         INDSN=NAME,MEMBER=AAA
                                                   (AAA,GGG,---)
0        DSNAME = NAME
0        DSN = NAME
                   SPECIFIES THE FULLY QUALIFIED NAME OF THE
                   DATA SET TO BE REMOVED.
0        GDG = NAME
                   SPECIFIES THE FULLY QUALIFIED NAME OF THE
                   GENERATION DATA GROUP TO BE REMOVED.  (I.E.
                   THE NAME THAT WAS CODED IN THE INDEX =
                   OPERAND OF THE BLDG CONTROL STATEMENT THAT
                   ORIGINALLY CREATED THE GDG).
1************
 * UT434    *
 ************
0        CVOL = DEVICE = SERIAL                            (OPTIONAL)
                   SPECIFIES THE DEVICE TYPE AND VOLUME SERIAL
                   NUMBER OF THE CONTROL VOLUME ON WHICH THE CAT-
                   ALOG SEARCH IS TO BEGIN.  IF CVOL IS OMITTED,
                   THE SYSTEM RESIDENCE DEVICE IS ASSUMED.
0   PURGE          REQUESTS THAT IF THE DATA SET OR GDG NUMBER TO
                   BE REMOVED RESIDES ON A DIRECT-ACCESS DEVICE,
                   IT IS TO BE SCRATCHED EVEN IF ITS EXPIRATION
                   DATE HAS NOT ELAPSED.  IF PURGE IS OMITTED,
                   AND THE EXPIRATION DATE HAS NOT ELAPSED, THE
                   DATA SET WILL NOT BE SCRATCHED.
0   NOTES:
    ------
0   1.   THE NAME FIELD IS OPTIONAL AND IS IGNORED BY UT434.
         IF PRESENT, THE NAME FIELD MUST START IN COLUMN 1
         OF THE CONTROL STATEMENT, MAY BE OF ANY LENGTH, AND
         MAY CONTAIN ANY ALPHAMERIC, NATIONAL, OR SPECIAL
         CHARACTERS EXCEPT A BLANK.
0   2.   THE OPERATION FIELD MUST BE PRECEDED AND FOLLOWED
         BY AT LEAST ONE BLANK.
0   3.   THERE IS NO PROVISION FOR THE CONTINUATION OF A
         CONTROL STATEMENT ON TO A SECOND CARD (I.E. EACH
         CONTROL STATEMENT MUST BE CONTAINED ON ONE CARD).
0   4.   PROVIDED THAT AT LEAST THE FIRST LEVEL OF THE
         QUALIFIED NAME OF THE DATA SET OR GDG SPECIFIED
         IN A CONTROL STATEMENT EXISTS AS AN INDEX LEVEL
         ON THE SYSTEM RESIDENCE DEVICE, IT IS NOT NECESSARY
         TO USE THE CVOL OPERAND.
0   5.   THERE IS NO LIMIT TO THE NUMBER OF CONTROL STATE-
         MENTS THAT MAY BE ENTERED VIA THE SYSIN DD STATE-
         MENT, AND BOTH RESET AND REMOVE OPERATIONS CAN BE
         PERFORMED IN ONE EXECUTION OF THE PROGRAM.
0   6.   OPTIONALLY, ONE CONTROL STATEMENT MAY BE CODED IN
         THE PARM FIELD OF THE EXEC STATEMENT INVOKING THE
         UTILITY.  THIS CONTROL STATEMENT MAY BE IN ADDITION
         TO, OR INSTEAD OF, CONTROL STATEMENTS IN THE CONTROL
         STATEMENT DATA SET SYSIN.  THE CONTROL STATEMENT
         ENTERED IN THE PARM IS THE FIRST CONTROL STATEMENT
         ACTIONED.
0   IF THE PARM FACILITY IS USED, THE CONTROL STATEMENT
    MAY NOT CONTAIN A NAME FIELD, BUT THE OPERATION NEED
    NOT BE PRECEDED BY A BLANK.  THUS THE FORM OF THE
    EXEC STATEMENT IS :
0        EXEC PGM=UT434,PARM= 'OPERATION OPERANDS'
    WITH THE CONTROL STATEMENT ENCLOSED BY APOSTROPHES.
0   CODING HINT :  IT IS THUS POSSIBLE TO USE UT434 IN
    A PROCEDURE AND MODIFY THE NAME OF THE DATA SET OR
    GDG BY USING SYMBOLIC PARAMETERS.
04. OUTPUT DATA
 --------------
0   THE OUTPUT DATA FROM UT434 IS THE UPDATED CATALOG
    AND A MESSAGE DATA SET.  THE MESSAGE DATA SET
    CONTAINS A LIST OF THE INPUT CONTROL STATEMENTS,
    THE ACTIONS TAKEN BY THE UTILITY (I.E. WHICH DATA
    SETS HAVE BEEN UNCATALOGUED, SCRATCHED AND CATALOGUED),
    AND A LIST OF THE CATALOG ENTRIES FOR THE GDG AFTER
    UTILITY PROCESSING IN THE CASE OF A RESET OPERATION.
    THE MESSAGE DATA SET ALSO CONTAINS A LIST OF ERROR
    MESSAGES, IF ANY.
0   ADDITIONAL OUTPUT IS SUPPLIED IN THE FORM OF A RETURN
    CODE, WHICH INDICATES THE RESULTS OF PROGRAM EXECUTION.
    THE RETURN CODES AND THEIR INTERPRETATIONS ARE AS
    FOLLOWS :
0   0    -    NO ERRORS ENCOUNTERED DURING PROCESSING.
0   4    -    A SCRATCH FAILED BECAUSE THE DATA SET WAS
              NOT FOUND ON VOLUME, OR A DATA SET TO BE
              REMOVED WAS NOT CATALOGUED.
0   8    -    A REQUEST WAS IGNORED ENTIRELY.
0   12   -    A SCRATCH FAILED FOR A REASON OTHER THAN
              BECAUSE THE DATA SET WAS NOT FOUND ON THE
              VOLUME.
0   16   -    A REQUEST WAS PARTLY ACTIONED WHEN AN
              UNRECOVERABLE ERROR WAS ENCOUNTERED.
1************
 * UT434    *
 ************
05. OPERATION
 ------------
0   THE JCL STATEMENTS REQUIRED TO INVOKE THE PROGRAM ARE :
0   1.   EXEC
0   2.   SYSPRINT  DD
0   3.   ANYNAME        DD
0   4.   SYSIN          DD
0   5.   SNAPDUMP       DD
0   1.   EXEC STATEMENT
         --------------
         THIS IS CODED AS
         //STEPNAME     EXEC     PGM=UT434
         OPTIONALLY, THE STATEMENT CAN INCLUDE A PARM
         FIELD WHICH CONTAINS ONE CONTROL STATEMENT FOR
         THE UTILITY.  (SEE NOTES IN SECTION 111).
0   2.   SYSPRINT     DD  STATEMENT
         --------------------------
         THIS STATEMENT DEFINES A SEQUENTIAL MESSAGE DATA
         SET, WHICH MAY BE WRITTEN ONTO A SYSTEM OUTPUT
         DEVICE, A MAGNETIC TAPE VOLUME, OR A DIRECT
         ACCESS VOLUME.  THE STATEMENT IS NORMALLY CODED AS
0        //SYSPRINT     DD     SYSOUT=A
0   3.   ANYNAME  DD STATEMENT
         ---------------------
         ONE SUCH STATEMENT MUSTBE INCLUDED FOR EVERY
         PERMANENTLY MOUNTED VOLUME OR MOUNTABLE DEVICE
         TYPE THAT IS TO BE USED IN THE JOB STEP (I.E.
         FOR EACH VOLUME THAT IS EITHER REFERRED TO
         DIRECTLY INA CVOL OPERAND OR WILL BE SUBJECTED
         TO AN AUTOMATIC SCRATCH OPERATION).  THESE
         STATEMENTS MAY BE ONE OF TWO FORMATS : EITHER
         //ANYNAME  DD  UNIT=XXXX,VOL=SER=YYYYYY,DISP=OLD
                             OR
         //ANYNAME  DD VOLUME=(PRIVATE,...),UNIT=(XXXX,DEFER),
                                            DISP=OLD
1************
 * UT434    *
 ************
0        THE SECOND EXAMPLE CAN BE USED TO SPECIFY DEFERRED
         MOUNTING WHEN A LARGE NUMBER OF DIRECT ACCESS VOLUMES
         ARE TO BE PROCESSED IN ONE APPLICATION OF THE PROGRAM.
0   4.   SYSIN  DD STATEMENT
         -------------------
0        THIS DD STATEMENT DEFINES THE DATA SET THAT CONTAINS
         THE CONTROL STATEMENTS TO BE PROCESSED.  IT MAY DEFINE
         A DATA SET IN THE JOB STREAM, A SEQUENTIAL DATA SET,
         OR A MEMBER OF A PARTIONED DATA SET.  IT WILL NORMALLY
         BE WRITTEN AS
         //SYSIN   DD   *
0   5.   SNAPDUMP  DD  STATEMENT
         ------------------------
0        THIS OPTIONAL DD STATEMENT DEFINES A SEQUENTIAL DATA
         SET WHICH WILL NORMALLY BE DIRECTED TO A SYSTEM OUTPUT
         DEVICE, THUS
0        //SNAPDUMP   DD   SYSOUT=A
0        IF PRESENT, THE PROGRAM WILL DUMP RELEVANT AREAS OF
         CORE TO THE DATA SET IN THE EVENT THAT AN UNRECOGNISABLE
         ERROR OCCURS WHILE PROCESSING A CONTROL STATEMENT.
         AFTER WRITING THE PERTINENT INFORMATION, THE PROGRAM
         WILL RESUME PROCESSING WITH THE NEXT CONTROL STATEMENT,
         IF ANY.
0        IF THE SNAPDUMP  DD STATEMENT IS NOT PRESENT AND AN
         UNRECOGNISABLE ERROR IS FOUND - INCIDENTALLY, A MOST
         UNLIKELY EVENTUALITY - THE PROGRAM WILL ABNORMALLY
         TERMINATE.
1************
 * UT434    *
 ************
0                       APPENDIX A
                        ----------
0                        EXAMPLES
                         --------
1************
 * UT434    *
 ************
